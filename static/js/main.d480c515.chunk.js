(this["webpackJsonpbudget-reports"]=this["webpackJsonpbudget-reports"]||[]).push([[0],{443:function(t,e,n){"use strict";n.r(e);var r,o,a,c,i,s,u,l=n(1),d=n.n(l),h=n(64),g=n.n(h),b=n(18),p=n(31),j=n.n(p),f=n(45),m=n(106),y=n(7),x=n.n(y),O=n(21),v=n.n(O),M=n(46),I=n.n(M),A=n(139),S=n.n(A),C={},k=function(t){if(C[t])return C[t];var e=localStorage.getItem(t);if(e){var n=JSON.parse(e);return C[t]=n,n}return null},w=function(t,e){delete C[t];try{localStorage.setItem(t,JSON.stringify(e))}catch(n){}},T=function(){var t=Object(f.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.getItem(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=n(22),_=n(2),P=n(63),F=n.n(P),E={excludeFirstMonth:{localStorageKey:"budget-reports-exclude-first-month",default:!1},excludeLastMonth:{localStorageKey:"budget-reports-exclude-last-month",default:!1},investmentAccounts:{localStorageKey:"budget-reports-investment-accounts",default:{}},lastUpdated:{localStorageKey:"budget-reports-last-updated",default:null},mortgageAccounts:{localStorageKey:"budget-reports-mortgage-accounts",default:{}},netWorthHiddenAccounts:{localStorageKey:"budget-reports-networth-hidden-accounts",default:{}},spendingMonthsToCompare:{localStorageKey:"budget-reports-spending-months-to-compare",default:3},trendsShowAverage:{localStorageKey:"budget-reports-trends-show-average",default:!0}},R=function(t,e){var n=E[t];if(!n)throw new Error("not a valid settings key");return F()(k(n.localStorageKey),e,n.default)},L=function(t,e,n){var r=E[t];if(!r)throw new Error("not a valid settings key");var o=k(r.localStorageKey);w(r.localStorageKey,Object(_.a)(Object(_.a)({},o),{},Object(B.a)({},e,n)))},G=n(6),Y=n.n(G),D=n(84),N=n.n(D),z=n(220),W=n.n(z),U=n(82),q=n.n(U),K=n(55),H=n.n(K),V=n(221),J=n.n(V),$=n(19),Z=n.n($),Q=n(85),X=n.n(Q),tt=function(t){return function(e){var n={};return e.forEach((function(e){var r=t(e);n[r]||(n[r]=[]),n[r].push(e)})),n}},et=function(t){return function(e){var n={};return e.forEach((function(e){n[e[t]]||(n[e[t]]=[]),n[e[t]].push(e)})),n}},nt=function(t){return function(e){return e.reduce((function(e,n){return Object(_.a)(Object(_.a)({},e),{},Object(B.a)({},n[t],n))}),{})}},rt=function(t){return function(e){return e.reduce((function(e,n){return e+n[t]}),0)}},ot=function(t){var e=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return null!==e&&e.length===o.length&&o.every((function(t,n){return t===e[n]}))?n:(e=o,n=t.apply(void 0,o))}},at=function(t){return function(e){return t.every((function(t){return!t(e)}))}},ct=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t,e){return e},o=!1,a=t.map((function(t){return t[e]===n[e]?(o=!0,r(t,n)):t}));return o?a:a.concat(n)},it=m.b.convertMilliUnitsToCurrencyAmount,st=["Internal Master Category","Credit Card Payments"],ut=function(t){var e=X()(t.subtransactions.map((function(t){return t.transaction_id}))),n=t.category_groups.filter((function(t){return!st.includes(t.name)})),r=t.categories.filter((function(t){return!t.deleted})).map((function(t){return Object(_.a)(Object(_.a)({},t),{},{activity:it(t.activity),balance:it(t.balance),budgeted:it(t.budgeted)})})),o=nt("id")(r),a=x()().subtract(239,"months").format("YYYY-MM-01"),c={symbol:t.currency_format.currency_symbol};return Object(_.a)(Object(_.a)({},H()(["category_groups","currency_format"])(t)),{},{accountsById:nt("id")(t.accounts),categoryGroups:n,categoryGroupsById:nt("id")(n),categories:r,categoriesById:o,currencyFormat:c,payeesById:nt("id")(t.payees),months:Z()("month")(t.months),transactions:Y()([function(t){return t.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{amount:it(t.amount)})}))},function(t){return t.filter((function(t){return!t.category_id||!!o[t.category_id]}))},N()((function(n){return e.includes(n.id)?Y()([function(t){return t.map((function(t){return H()("transaction_id")(Object(_.a)(Object(_.a)(Object(_.a)({},n),t),{},{payee_id:t.payee_id||n.payee_id}))}))},function(t){return t.filter(q()("transaction_id",n.id))}])(t.subtransactions):n})),J.a,W()((function(t){return t.date<a})),Z()("date"),function(t){return t.filter((function(t){return 0!==t.amount&&!t.deleted}))}])(t.transactions)})},lt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=arguments.length>3?arguments[3]:void 0;return e.reduce((function(t,e){return ct(t,n,e,r)}),t)},dt=["accounts","categories","category_groups","payee_locations","payees","scheduled_subtransactions","scheduled_transactions","subtransactions","transactions"],ht=function(t,e){return Object(_.a)(Object(_.a)(Object(_.a)(Object(_.a)({},t),e),dt.reduce((function(n,r){return Object(_.a)(Object(_.a)({},n),{},Object(B.a)({},r,lt(t[r],e[r])))}),{})),{},{months:lt(t.months,e.months,"month",(function(t,e){return Object(_.a)(Object(_.a)(Object(_.a)({},t),e),{},{categories:lt(t.categories,e.categories)})}))})},gt="ynab_budget_details",bt=null,pt=function(){var t=Object(f.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!bt){t.next=2;break}return t.abrupt("return",bt);case 2:return t.next=4,T(gt);case 4:return bt=t.sent,t.abrupt("return",bt);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),jt=function(){var t=Object(f.a)(j.a.mark((function t(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt();case 2:return n=t.sent,t.abrupt("return",F()(n,e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ft=function(){var t=Object(f.a)(j.a.mark((function t(e){var n,r,o,a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.budget,o=e.server_knowledge,t.next=3,pt();case 3:a=t.sent,c=Object(_.a)(Object(_.a)({},a),{},Object(B.a)({},n,{budget:r,server_knowledge:o})),i=gt,s=c,S.a.setItem(i,s),bt=c;case 7:case"end":return t.stop()}var i,s}),t)})));return function(e){return t.apply(this,arguments)}}(),mt="ynab_access_token",yt="ynab_budgets",xt="budget-reports-last-location",Ot="https://api.youneedabudget.com/oauth/authorize?client_id=a956b3eb0134b7ba4a854eae1ef58fdaefa3b44109af6643d86e5e1479e5c608&redirect_uri=https://tomcheng.github.io/budget-reports/&response_type=token&scope=read-only",vt=null,Mt=function(){return vt.budgets.getBudgets().then((function(t){var e=t.data;return w(yt,e),e})).catch((function(t){if(I()({id:"401",name:"unauthorized"})(t.error)||"Failed to fetch"===t.message)return localStorage.removeItem(mt),k(yt)||{budgets:[]};throw t}))},It=function(t){return vt.budgets.getBudgetById(t).then((function(e){var n=e.data,r=n.budget,o=n.server_knowledge;return ft({id:t,budget:r,server_knowledge:o}),L("lastUpdated",t,x()().valueOf()),{budget:ut(r),authorized:!0}})).catch((function(t){if(I()({id:"401",name:"unauthorized"})(t.error)||"Failed to fetch"===t.message)return localStorage.removeItem(mt),{budget:{categories:[],transactions:[],payees:[]},authorized:!1};throw t}))},At=function(){var t=Object(f.a)(j.a.mark((function t(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jt(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",It(e));case 5:if(!(x()().valueOf()-R("lastUpdated",e)<8e3)){t.next=7;break}return t.abrupt("return",It(e));case 7:return t.abrupt("return",vt.budgets.getBudgetById(e,n.server_knowledge).then((function(t){var r=t.data;try{var o=ht(n.budget,r.budget);return ft({id:e,budget:o,server_knowledge:r.server_knowledge}),L("lastUpdated",e,x()().valueOf()),{budget:ut(o),authorized:!0}}catch(a){return It(e)}})).catch((function(t){if(I()({id:"401",name:"unauthorized"})(t.error)||"Failed to fetch"===t.message)return{budget:ut(n.budget),authorized:!1};throw t})));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),St=function(){localStorage.setItem(xt,window.location.hash)},Ct=n(13),kt=n(14),wt=n(16),Tt=n(15),Bt=n(12),_t=n(65),Pt=n.n(_t),Ft=n(3),Et=n(4),Rt=Et.a.div(r||(r=Object(Ft.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]))),Lt=Et.a.div(o||(o=Object(Ft.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]))),Gt=Et.a.div(a||(a=Object(Ft.a)(["\n  font-size: 14px;\n  line-height: 22px;\n  font-weight: 500;\n  color: #222;\n"]))),Yt=Et.a.div(c||(c=Object(Ft.a)(["\n  font-size: 13px;\n  line-height: 21px;\n  font-weight: 400;\n  color: #666;\n"]))),Dt=Et.a.div(i||(i=Object(Ft.a)(["\n  font-size: 11px;\n  line-height: 16px;\n  font-weight: 400;\n  color: #999;\n"]))),Nt=n(0),zt=function(){return Object(Nt.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(Nt.jsx)(Gt,{children:"Loading\u2026"}),Object(Nt.jsx)(Yt,{children:"beep, beep, boop"})]})},Wt=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.budgetId,n=t.budgetLoaded,r=t.onRequestBudget;n||r(e)}},{key:"render",value:function(){return this.props.budgetLoaded?this.props.children:Object(Nt.jsx)(zt,{})}}]),n}(l.Component),Ut=n(57),qt=n.n(Ut),Kt="#4399ff",Ht="red",Vt=qt()(Kt).lighten(32).desaturate().toHexString(),Jt=qt()(Kt).lighten(5).desaturate().toHexString(),$t=qt()(Kt).lighten(25).desaturate().toHexString(),Zt=qt()(Ht).lighten(30).desaturate(60).toHexString(),Qt=Object(Et.a)(Yt)(s||(s=Object(Ft.a)(["\n  display: inline-block;\n  user-select: none;\n  border: 1px solid #ccc;\n  padding: 4px 12px;\n  border-radius: 2px;\n\n  & + & {\n    margin-left: 5px;\n  }\n"]))),Xt=Object(Et.a)(Qt)(u||(u=Object(Ft.a)(["\n  background-color: ",";\n  border-color: ",";\n  color: #fff;\n"])),Kt,Kt),te=Qt,ee=n(225),ne=n(67),re=n(54),oe=n.n(re),ae=n(58),ce=n(140),ie=n(141),se=n(142),ue=n(143),le=n(144),de=n(145),he=n(146),ge=n(147),be=n(148),pe=n(149),je=n(227);ae.b.add(ce.faArrowLeft,ie.faBars,se.faCaretDown,ue.faChevronRight,le.faCog,de.faEllipsisV,he.faEye,ge.faEyeSlash,be.faPencilAlt,pe.faTimes);var fe,me,ye,xe,Oe,ve,Me,Ie,Ae,Se,Ce,ke,we={"arrow-left":ce.faArrowLeft,bars:ie.faBars,"caret-down":se.faCaretDown,"chevron-right":ue.faChevronRight,cog:le.faCog,pencil:be.faPencilAlt,"ellipsis-v":de.faEllipsisV,eye:he.faEye,"eye-slash":ge.faEyeSlash,times:pe.faTimes},Te={faded:{fontWeight:400,color:"#aaa",fontSize:10}},Be=function(t){var e=t.icon,n=t.style,r=t.faded,o=Object(ne.a)(t,["icon","style","faded"]);return Object(Nt.jsx)(je.a,Object(_.a)(Object(_.a)({},o),{},{icon:we[e],style:Object(_.a)(Object(_.a)({},n),r&&Te.faded)}))},_e=function(t,e){return t.replace(/:([a-zA-Z]*)/g,(function(t,n){return e[n]}))},Pe={currentMonth:{path:"/budgets/:budgetId/current",title:"Current Month Spending",props:["budget","currentMonth","investmentAccounts"]},currentMonthGroup:{path:"/budgets/:budgetId/current/:categoryGroupId",title:function(t,e){return e.categoryGroupsById[t.categoryGroupId].name},props:["budget","currentMonth"],paramProps:["categoryGroupId"],breadcrumbs:["currentMonth"]},currentMonthCategory:{path:"/budgets/:budgetId/current/:categoryGroupId/:categoryId",title:function(t,e){return e.categoriesById[t.categoryId].name},props:["budget","currentMonth"],paramProps:["categoryId","categoryGroupId"],breadcrumbs:["currentMonth","currentMonthGroup"]},groups:{path:"/budgets/:budgetId/groups",title:"Spending Trends",props:["budget"]},group:{path:"/budgets/:budgetId/groups/:categoryGroupId",title:function(t,e){return e.categoryGroupsById[t.categoryGroupId].name},props:["budget"],paramProps:["categoryGroupId"],breadcrumbs:["groups"]},category:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId",title:function(t,e){return e.categoriesById[t.categoryId].name},props:["budget"],paramProps:["categoryId"],breadcrumbs:["groups","group"]},categoryPayee:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId/payees/:payeeId",title:function(t,e){return v()(["payeesById",t.payeeId,"name"],e)||"Payee Not Found"},props:["budget"],paramProps:["categoryId","payeeId"],breadcrumbs:["groups","group","category"]},income:{path:"/budgets/:budgetId/income",title:"Income Trends",props:["budget"]},incomeVsExpenses:{path:"/budgets/:budgetId/income-vs-expenses",title:"Income vs Expenses",props:["budget","investmentAccounts"]},netWorth:{path:"/budgets/:budgetId/net-worth",title:"Net Worth",props:["budget","investmentAccounts","mortgageAccounts"]},investments:{path:"/budgets/:budgetId/investments",title:"Investments",props:["budget","investmentAccounts"]},projections:{path:"/budgets/:budgetId/projections",title:"Retirement Calculator",props:["budget","investmentAccounts","mortgageAccounts"]},settings:{path:"/budgets/:budgetId/settings",title:"Budget Settings",props:["budget","investmentAccounts","mortgageAccounts","onUpdateAccounts"]}},Fe=Et.a.div(fe||(fe=Object(Ft.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  height: 60px;\n"]))),Ee=Et.a.div(me||(me=Object(Ft.a)(["\n  width: ","px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),60),Re=Object(Et.a)(b.c)(ye||(ye=Object(Ft.a)(["\n  color: inherit;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding: 0 20px;\n  background-color: ",";\n"])),(function(t){return t.active&&Vt})),Le=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.budgetId,n=t.hasMultipleBudgets,r=t.location,o=t.onCloseSidebar;return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(Ge,{onCloseSidebar:o,budgetId:e}),["currentMonth","groups","income","incomeVsExpenses","netWorth","investments","projections"].map((function(t){var n=Pe[t],a=n.path,c=n.title;return Object(Nt.jsx)(Ye,{to:_e(a,{budgetId:e}),active:Object(Bt.e)(r,{path:a}),onClick:o,children:c},a)})),n&&Object(Nt.jsx)(Ye,{to:"/",children:"Switch Budgets"})]})}}]),n}(l.PureComponent),Ge=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.onCloseSidebar,n=t.budgetId;return Object(Nt.jsxs)(Fe,{children:[Object(Nt.jsx)(Ee,{onClick:e,children:Object(Nt.jsx)(Be,{icon:"times"})}),Object(Nt.jsx)(b.b,{to:_e(Pe.settings.path,{budgetId:n}),style:{display:"flex",color:"inherit"},onClick:e,children:Object(Nt.jsx)(Ee,{children:Object(Nt.jsx)(Be,{icon:"cog"})})})]})}}]),n}(l.PureComponent),Ye=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){return Object(Nt.jsx)(Re,Object(_.a)({},this.props))}}]),n}(l.PureComponent),De=Le,Ne=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={open:!1},t.handleSetOpen=function(e){t.setState({open:e})},t.handleTriggerClick=function(){t.setState({open:!0})},t.handleCloseSidebar=function(){t.setState({open:!1})},t}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.budgetId,n=t.children,r=t.hasMultipleBudgets,o=t.location,a=this.state.open;return Object(Nt.jsx)(ee.a,{sidebar:Object(Nt.jsx)(De,{budgetId:e,hasMultipleBudgets:r,location:o,onCloseSidebar:this.handleCloseSidebar}),open:a,onSetOpen:this.handleSetOpen,styles:{sidebar:{backgroundColor:"#fff",width:280,pointerEvents:!a&&"none"}},children:n({sidebarTrigger:Object(Nt.jsx)(ze,{onClick:this.handleTriggerClick})})})}}]),n}(l.Component),ze=function(t){var e=t.onClick;return Object(Nt.jsx)("div",{onClick:e,style:{alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"center",width:60},children:Object(Nt.jsx)(Be,{icon:"bars"})})},We=Ne,Ue=Et.a.div(xe||(xe=Object(Ft.a)(["\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),qe=function(t){var e=t.authorized,n=t.budgetId,r=t.budgetLoaded,o=t.children,a=t.hasMultipleBudgets,c=t.location,i=t.onAuthorize,s=t.onRequestBudget;return Object(Nt.jsx)(Wt,{budgetId:n,budgetLoaded:r,onRequestBudget:s,children:Object(Nt.jsx)(We,{budgetId:n,location:c,hasMultipleBudgets:a,children:function(t){var n=t.sidebarTrigger;return Object(Nt.jsxs)(Ue,{children:[o({sidebarTrigger:n}),!e&&Object(Nt.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,borderTop:"1px solid #ccc"},children:["Your authorization expired.",Object(Nt.jsx)(Xt,{onClick:i,children:"Reauthorize"})]})]})}})})},Ke=n(8),He=n(66),Ve=n.n(He),Je=n(38),$e=n.n(Je),Ze=n(56),Qe=n.n(Ze),Xe=n(17),tn=n.n(Xe),en=n(42),nn=n.n(en),rn=tn.a.convert({cap:!1}),on=ot((function(t){var e=$e()({name:"Starting Balance"})(t.payees),n=$e()({name:"Reconciliation Balance Adjustment"})(t.payees);return function(t){return t.payee_id===(null===e||void 0===e?void 0:e.id)||t.payee_id===(null===n||void 0===n?void 0:n.id)}})),an=ot((function(t){var e=$e()((function(t){return t.name.match(/^Inflow: /)}))(t.categories);return function(t){return t.category_id===(null===e||void 0===e?void 0:e.id)}})),cn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return!e.category_id||Boolean(t[e.transfer_account_id])}},sn=function(t){return t.date.slice(0,7)},un=ot((function(t){return t.filter((function(t){return t.category_id}))})),ln=function(t){var e=un(t.transactions);return e.length?sn(nn()(e)):void 0},dn=function(t){var e=t.payeesById,n=t.transactions,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Y()([rn((function(t,n){return Object(_.a)(Object(_.a)({},e[n]?Qe()(["id","name"])(e[n]):{id:"no-payee",name:"(no payee)"}),{},{amount:rt("amount")(t)/r})})),et("payee_id")])(n)},hn=function(t){return t.replace(/[^a-zA-Z0-9 ]/g,"").trim()},gn=function(){var t=Object(l.useState)(null),e=Object(Ke.a)(t,2),n=e[0],r=e[1],o=Object(l.useRef)(n);o.current=n;return[n,function(t){r(t===o.current?null:t)}]},bn=function(){var t=Object(l.useState)(null),e=Object(Ke.a)(t,2),n=e[0],r=e[1];return[n,function(t){r(t===n?null:t)}]},pn=function(t){var e=Object(l.useState)(R("trendsShowAverage",t)),n=Object(Ke.a)(e,2),r=n[0],o=n[1];return[r,function(){o(!r),L("trendsShowAverage",t,!r)}]},jn=function(t){var e=Object(l.useState)(R("excludeFirstMonth",t.id)),n=Object(Ke.a)(e,2),r=n[0],o=n[1],a=Object(l.useState)(R("excludeLastMonth",t.id)),c=Object(Ke.a)(a,2),i=c[0],s=c[1],u=ln(t);return{excludeFirstMonth:r,excludeLastMonth:i,months:function(t,e){for(var n=[t],r=t;r!==e;)r=x()(r).add(1,"months").format("YYYY-MM"),n.push(r);return n}(r?x()(u).add(1,"months").format("YYYY-MM"):u,i?x()().subtract(1,"months").format("YYYY-MM"):x()().format("YYYY-MM")),onSetExclusion:function(e){var n=e.month,r=e.exclude;"first"===n?(o(r),L("excludeFirstMonth",t.id,r)):(s(r),L("excludeLastMonth",t.id,r))}}},fn=function(t){var e=Object(l.useState)(t),n=Object(Ke.a)(e,2),r=n[0],o=n[1];return[r,function(){o(!1)},function(){o(!0)},function(){o(!r)}]},mn=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).toBeScrolled=null,t.raf=null,t.scrollPositions={},t}return Object(kt.a)(n,[{key:"getSnapshotBeforeUpdate",value:function(){return{scrollTop:this.toBeScrolled.scrollTop}}},{key:"componentDidUpdate",value:function(t,e,n){var r=this,o=this.props,a=o.action,c=o.location;c!==t.location&&("POP"===a&&(this.scrollPositions[t.location]=n.scrollTop,this.raf=requestAnimationFrame((function(){r.toBeScrolled.scrollTop=r.scrollPositions[c]||0}))),"PUSH"===a&&(this.scrollPositions[t.location]=n.scrollTop,this.raf=requestAnimationFrame((function(){r.toBeScrolled.scrollTop=0}))),"REPLACE"===a&&(this.raf=requestAnimationFrame((function(){r.toBeScrolled.scrollTop=0}))))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){var t=this;return this.props.children({ref:function(e){t.toBeScrolled=e}})}}]),n}(l.Component),yn=n(88),xn=n.n(yn),On=xn()(Pe).filter((function(t){return!!t.breadcrumbs})).map((function(t){return{path:t.path,breadcrumbs:t.breadcrumbs.map((function(t){return{title:Pe[t].title,path:Pe[t].path}}))}})),vn=function(t){var e=t.budget;return e?Object(Nt.jsx)(Bt.c,{children:On.map((function(t){var n=t.path,r=t.breadcrumbs;return Object(Nt.jsx)(Bt.a,{path:n,exact:!0,render:function(t){return Object(Nt.jsx)(Dt,{style:{lineHeight:1,whiteSpace:"normal"},children:r.map((function(n,o){var a=n.title,c=n.path;return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(b.b,{to:_e(c,t.match.params),style:{paddingBottom:8,display:"inline-block"},children:"function"===typeof a?a(t.match.params,e):a}),o!==r.length-1&&Object(Nt.jsx)(Be,{icon:"chevron-right",style:{padding:"0 5px",fontSize:8}})]},c)}))})}},n)}))}):null},Mn=function(){return Object(Nt.jsxs)(Bt.c,{children:[Object(Nt.jsx)(Bt.a,{path:Pe.currentMonth.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.groups.path,e.params),children:"Past Months"})})}}),Object(Nt.jsx)(Bt.a,{path:Pe.currentMonthGroup.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.group.path,e.params),children:"Past Months"})})}}),Object(Nt.jsx)(Bt.a,{path:Pe.currentMonthCategory.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.category.path,e.params),children:"Past Months"})})}}),Object(Nt.jsx)(Bt.a,{path:Pe.groups.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.currentMonth.path,e.params),children:"Current Month"})})}}),Object(Nt.jsx)(Bt.a,{path:Pe.group.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.currentMonthGroup.path,e.params),children:"Current Month"})})}}),Object(Nt.jsx)(Bt.a,{path:Pe.category.path,exact:!0,render:function(t){var e=t.match;return Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(b.b,{to:_e(Pe.currentMonthCategory.path,e.params),children:"Current Month"})})}})]})},In=Et.a.div(Oe||(Oe=Object(Ft.a)(["\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding-left: 0;\n  padding-right: 20px;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n  white-space: pre;\n  user-select: none;\n"]))),An=Et.a.div(ve||(ve=Object(Ft.a)(["\n  flex-grow: 1;\n  overflow-y: auto;\n"]))),Sn=function(t){var e=t.sidebarTrigger,n=t.historyAction,r=t.location,o=t.budget,a=t.title,c=(t.breadcrumbs,t.fixedContent),i=t.content;return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(In,{children:[e,Object(Nt.jsxs)("div",{style:{flexGrow:1},children:[Object(Nt.jsx)(vn,{budget:o}),Object(Nt.jsx)(Rt,{style:{lineHeight:1},children:a})]}),Object(Nt.jsx)(Mn,{})]}),c,Object(Nt.jsx)(mn,{action:n,location:r,children:function(t){var e=t.ref;return Object(Nt.jsx)(An,{ref:e,children:i})}})]})},Cn=n(229),kn=Et.a.div(Me||(Me=Object(Ft.a)(["\n  transition: height 0.15s ease-in-out, opacity 0.15s linear 0.1s;\n  overflow: hidden;\n"]))),wn=Et.a.div(Ie||(Ie=Object(Ft.a)(["\n  opacity: 0;\n  pointer-events: none;\n  height: 0;\n"]))),Tn=function(t){var e=t.open,n=t.children,r=Object(l.useState)(e?"opened":"closed"),o=Object(Ke.a)(r,2),a=o[0],c=o[1],i=Object(l.useState)(e?"auto":0),s=Object(Ke.a)(i,2),u=s[0],d=s[1];Object(l.useEffect)((function(){e&&"closed"===a&&(c("openMeasuring"),setTimeout((function(){c("openMeasured"),setTimeout((function(){c("opening")}),20)}),20)),e||"opened"!==a||(c("closeMeasured"),setTimeout((function(){c("closing")}),20))}),[e,a]);var h="openMeasuring"===a?wn:kn,g={closed:0,openMeasuring:0,openMeasured:0,opening:u,opened:"auto",closeMeasured:u,closing:0};return"closed"===a?null:Object(Nt.jsx)(h,{style:{height:g[a],opacity:{closed:0,openMeasuring:0,openMeasured:0,opening:1,opened:1,closeMeasured:1,closing:0}[a]},onTransitionEnd:function(){c(e?"opened":"closed")},children:Object(Nt.jsx)(Cn.a,{bounds:!0,onResize:function(t){var e;d((null===(e=t.bounds)||void 0===e?void 0:e.height)||0)},children:function(t){var e=t.measureRef;return Object(Nt.jsx)("div",{ref:e,children:n})}})})},Bn=Et.a.div(Ae||(Ae=Object(Ft.a)(["\n  margin: ",";\n  background-color: #fff;\n  background-clip: padding-box;\n  border: "," solid\n    rgba(0, 0, 0, 0.05);\n  border-bottom-width: 1px;\n  border-radius: 2px;\n"])),(function(t){return t.fullWidth?"0":"2px"}),(function(t){return t.fullWidth?"0":"1px"})),_n=Object(Et.a)(Gt)(Se||(Se=Object(Ft.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 15px 20px;\n  user-select: none;\n"]))),Pn=Et.a.div(Ce||(Ce=Object(Ft.a)(["\n  padding: 0 10px;\n  margin-right: -10px;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  margin-left: 5px;\n"]))),Fn=Et.a.div(ke||(ke=Object(Ft.a)(["\n  padding: 0 "," 15px;\n"])),(function(t){return t.fullWidth?"22px":"20px"})),En=function(t){var e=t.actions,n=t.children,r=t.fullWidth,o=t.hasSettings,a=t.noPadding,c=t.title,i=t.onClickSettings,s=Object(l.useState)(!0),u=Object(Ke.a)(s,2),d=u[0],h=u[1];return Object(Nt.jsxs)(Bn,{fullWidth:r,children:[Object(Nt.jsxs)(_n,{children:[Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:function(){h(!d)},children:[c,Object(Nt.jsx)(Be,{icon:"chevron-right",transform:{rotate:d?90:0},style:{marginLeft:10},faded:!0})]}),Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[d&&e,o&&d&&Object(Nt.jsx)(Pn,{onClick:i,children:Object(Nt.jsx)(Be,{icon:"cog",faded:!0})})]})]}),Object(Nt.jsx)(Tn,{open:d,children:Object(Nt.jsx)(Fn,{style:{padding:a&&0},children:n})})]})},Rn=n(243),Ln=n(104),Gn=n.n(Ln),Yn=n(231),Dn=n.n(Yn),Nn=n(35),zn=n.n(Nn),Wn=n(23),Un=n.n(Wn),qn=n(138),Kn=n.n(qn),Hn=n(232),Vn=n.n(Hn),Jn={chart:{height:240,spacing:[0,0,0,0]},credits:{enabled:!1},legend:{enabled:!1},title:{text:""},subtitle:{text:""},tooltip:{enabled:!1},xAxis:{tickLength:0}},$n=function(t){var e=t.options;return Object(Nt.jsx)(Vn.a,{highcharts:Kn.a,options:Object(_.a)(Object(_.a)(Object(_.a)({},Jn),e),{},{chart:Object(_.a)(Object(_.a)({},Jn.chart),e.chart),xAxis:Object(_.a)(Object(_.a)({},Jn.xAxis),e.xAxis)})})},Zn=d.a.createContext(),Qn=function(t){for(var e=(t+="").split("."),n=e[0],r=e.length>1?"."+e[1]:"",o=/(\d+)(\d{3})/;o.test(n);)n=n.replace(o,"$1,$2");return n+r},Xn=function(t){var e=t.amount,n=t.amountAfterDecimal,r=t.expectNegative,o=t.expectPositive,a=t.showCurrencySymbol,c=t.style;return Object(Nt.jsx)(Zn.Consumer,{children:function(t){return Object(Nt.jsxs)("span",{style:Object(_.a)(Object(_.a)({},c),{},{color:0===e?null:e>0?o?null:"#2cbc2f":r?null:Ht}),children:[0===e?null:e>0?o?null:"+":r?null:"-",a&&(v()("symbol")(t)||"$"),Qn(Math.abs(e).toFixed(n))]})}})};Xn.defaultProps={amountAfterDecimal:2};var tr,er,nr,rr,or=Xn,ar=function(t){var e=t.numbers,n=t.alwaysRound,r=t.expectPositive,o=e.some((function(t){var e=t.amount;return Math.abs(e)<100}));return Object(Nt.jsx)("div",{style:{textAlign:"right",lineHeight:"16px",display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse",marginBottom:8},children:e.map((function(t){var e=t.amount,a=t.label,c=t.isMoney,i=void 0===c||c,s=t.decimalsToRound;return Object(Nt.jsxs)("div",{style:{marginLeft:20},children:[Object(Nt.jsx)(Lt,{style:{lineHeight:"16px"},children:Object(Nt.jsx)(or,{amount:e,amountAfterDecimal:Gn()(s)?s:o&&!n?2:0,showCurrencySymbol:i,expectNegative:!r,expectPositive:r})}),Object(Nt.jsx)(Dt,{children:a})]},a)}))})},cr=Et.a.div(tr||(tr=Object(Ft.a)(["\n  border-top: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n"]))),ir=function(t){var e=t.month,n=t.transactionsByDate,r=x()().format("YYYY-MM-DD"),o=0;return zn()(-1,x()(e).daysInMonth()).map((function(t){var a=-1===t?x()(e).add(-1,"days"):"".concat(e,"-").concat(Dn()("0")(2)(t+1));return a>r?null:o+=-Un()("amount")(n[a]||[])}))},sr=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.total,n=t.transactions,r=t.highlightFunction,o=t.currentMonth,a=t.monthsToCompare,c=r?n.filter(r):[],i={type:"areaspline",data:ir({month:o,transactionsByDate:et("date")(c)}),enableMouseTracking:!1,marker:{enabled:!1},animation:!1,color:Kt,lineWidth:0,fillOpacity:.8},s=x()(o).daysInMonth(),u=x()(o).add(-1,"days"),d=x()(o).add(s-1,"days"),h=et("date")(n),g=ir({month:o,transactionsByDate:h}),b=zn()(0,s+1).map((function(t){return t/s*e})),p=parseInt(u.format("d"),10),j=zn()(0,6).map((function(t){return{color:"#f2f2f2",from:7*t-1.5-p,to:7*t+.5-p}})),f=zn()(a,0).map((function(t){return{type:"spline",data:ir({month:x()(o).subtract(t,"months").format("YYYY-MM"),transactionsByDate:h}),enableMouseTracking:!1,color:"#"+qt.a.mix(Kt,"#f2f2f2",30+70*(t-1)/a).toHex(),lineWidth:1,marker:{enabled:!1},animation:!1}})),m=Y()([rt("amount"),Ve()((function(t){return sn(t)===o}))])(n),y=[{amount:m,label:"spent"}];return Gn()(e)&&y.push({amount:-(e+m),label:"available"}),Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(ar,{numbers:y}),Object(Nt.jsx)($n,{options:{chart:{spacing:[0,0,0,0],height:140,animation:!1},xAxis:{labels:{enabled:!1},plotBands:j},yAxis:{visible:!1,endOnTick:!1,startOnTick:!1},series:[{type:"line",color:"#aaa",dashStyle:"Dot",lineWidth:1,data:b,enableMouseTracking:!1,marker:{enabled:!1},animation:!1}].concat(Object(Rn.a)(f),[Object(_.a)({type:"spline",data:g,enableMouseTracking:!1,color:Kt,marker:{enabled:!1},animation:!1},r&&{type:"areaspline",fillOpacity:.2}),i])}},a),Object(Nt.jsxs)(cr,{children:[Object(Nt.jsx)(Dt,{children:u.format("MMM D")}),Object(Nt.jsx)(Dt,{children:d.format("MMM D")})]})]})}}]),n}(l.PureComponent),ur=Et.a.div(er||(er=Object(Ft.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]))),lr=Et.a.div(nr||(nr=Object(Ft.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  opacity: 0;\n  transition: opacity 0.2s ease-in-out;\n"]))),dr=Et.a.div(rr||(rr=Object(Ft.a)(["\n  position: relative;\n  min-width: 200px;\n  padding: 15px 20px;\n  margin-left: 20px;\n  margin-right: 20px;\n  background-color: #fff;\n  border-radius: 2px;\n  transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;\n"]))),hr=function(t){return requestAnimationFrame((function(){requestAnimationFrame(t)}))},gr=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;return Object(Ct.a)(this,n),(t=e.call(this)).handleTransitionEnd=function(){var e=t.state.animationState;"entering"===e?t.setState({animationState:"entered"}):"leaving"===e&&t.setState({animationState:"left"})},t.el=document.createElement("div"),t.state={animationState:"left"},t}return Object(kt.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentDidUpdate",value:function(t){var e=this;!t.open&&this.props.open&&hr((function(){e.setState({animationState:"entering"})})),t.open&&!this.props.open&&hr((function(){e.setState({animationState:"leaving"})}))}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var t=this.props,e=t.open,n=t.children,r=t.title,o=t.onClose,a=t.width,c=this.state.animationState;if(!e&&"left"===c)return null;var i=["entering","entered"].includes(c);return Object(h.createPortal)(Object(Nt.jsxs)(ur,{children:[Object(Nt.jsx)(lr,{onClick:o,style:{opacity:i?1:0},onTransitionEnd:this.handleTransitionEnd}),Object(Nt.jsxs)(dr,{style:{opacity:i?1:0,transform:"translate3d(0, ".concat(i?"0":"20px",", 0)"),width:a},children:[r&&Object(Nt.jsx)(Gt,{style:{marginBottom:10},children:r}),n,Object(Nt.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20},children:Object(Nt.jsx)(Xt,{onClick:o,children:"Done"})})]})]}),this.el)}}]),n}(l.Component),br=function(t){var e=t.open,n=t.monthsToCompare,r=t.onClose,o=t.onDecrementMonths,a=t.onIncrementMonths;return Object(Nt.jsx)(gr,{open:e,title:"Chart Settings",onClose:r,children:Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(Nt.jsxs)("div",{style:{marginRight:10},children:[Object(Nt.jsx)(te,{onClick:o,children:"-"}),Object(Nt.jsx)(te,{onClick:a,children:"+"})]}),Object(Nt.jsxs)(Yt,{children:["Compare with the last ",n," month",1===n?"":"s"]})]})})},pr=function(t){var e=t.actions,n=t.budgetId,r=t.currentMonth,o=t.highlightFunction,a=t.title,c=t.total,i=t.transactions,s=fn(!1),u=Object(Ke.a)(s,3),d=u[0],h=u[1],g=u[2],b=function(t){var e=Object(l.useState)(R("spendingMonthsToCompare",t)),n=Object(Ke.a)(e,2),r=n[0],o=n[1];return{monthsToCompare:r,onDecrementMonths:function(){var e=Math.max(r-1,0);o(e),L("spendingMonthsToCompare",t,e)},onIncrementMonths:function(){var e=Math.min(r+1,12);o(e),L("spendingMonthsToCompare",t,e)}}}(n),p=b.monthsToCompare,j=b.onIncrementMonths,f=b.onDecrementMonths;return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(En,{actions:e,title:a,hasSettings:!0,onClickSettings:g,children:Object(Nt.jsx)(sr,{budgetId:n,currentMonth:r,highlightFunction:o,monthsToCompare:p,total:c,transactions:i})}),Object(Nt.jsx)(br,{open:d,monthsToCompare:p,onClose:h,onDecrementMonths:f,onIncrementMonths:j})]})};pr.defaultProps={title:"Day by Day"};var jr,fr,mr=pr,yr=Et.a.div(jr||(jr=Object(Ft.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n  user-select: none;\n\n  &:first-child {\n    padding-top: ",";\n  }\n"])),(function(t){return!t.isContinuing&&0})),xr=Object(Et.a)(Yt)(fr||(fr=Object(Ft.a)(["\n  text-align: center;\n  margin: 10px;\n  opacity: 0.5;\n"]))),Or=function(){return Object(Nt.jsx)(xr,{children:"No transactions this month"})},vr=function(t){var e=t.label,n=t.minorText,r=t.inLink,o=t.to,a=t.bold;return Object(Nt.jsxs)(Yt,{style:{fontWeight:a&&700,display:"flex",alignItems:"baseline",whiteSpace:"pre",overflow:"hidden",color:r&&"inherit"},children:[o?Object(Nt.jsx)(b.b,{to:o,children:e}):e,n&&Object(Nt.jsxs)(Dt,{style:{fontWeight:a&&700,overflow:"hidden",textOverflow:"ellipsis"},children:["\xa0\u2013 ",n]})]})},Mr=function(t){var e=t.label,n=t.count,r=t.inLink,o=t.selected,a=t.showCount,c=t.to;return Object(Nt.jsx)(vr,{bold:o,label:e,minorText:a&&"".concat(n," transaction").concat(1===n?"":"s"),inLink:r,to:c})};Mr.defaultProps={showCount:!0};var Ir=Mr,Ar=function(t){var e=t.amount,n=t.expectNegative,r=t.expectPositive,o=t.total,a=t.faded,c=t.selected;return Object(Nt.jsxs)(Yt,{style:{display:"flex",alignItems:"baseline",opacity:a?.3:1,fontWeight:c&&700},children:[Object(Nt.jsx)(or,{amount:e,expectNegative:n,expectPositive:r}),Object(Nt.jsx)(Dt,{style:{width:44,textAlign:"right",fontWeight:c&&700},children:o?"".concat((e/o*100).toFixed(1),"%"):"\u2013"})]})},Sr=function(t){var e=t.count,n=t.pluralizedName,r=t.showAll,o=t.onToggle;return Object(Nt.jsx)(Dt,{style:{textAlign:"center",marginTop:5},onClick:o,children:r?"see less":"see all ".concat(e," ").concat(n)})},Cr=tn.a.convert({cap:!1}),kr={category_group_id:"category groups",category_id:"categories",payee_id:"payees"},wr=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={showAll:!1,allMounted:!1},t.handleToggleShowAll=function(){var e=t.state,n=e.allMounted,r=e.showAll;n?t.setState({showAll:!r}):(t.setState({allMounted:!0}),requestAnimationFrame((function(){t.setState({showAll:!0})})))},t}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.emptyName,n=t.entityKey,r=t.entityFunction,o=t.entitiesById,a=t.expectNegative,c=t.expectPositive,i=t.linkFunction,s=t.limitShowing,u=t.numMonths,d=t.reverse,h=t.selectedEntityId,g=t.showAverage,b=t.showAverageToggle,p=t.showTransactionCount,j=t.title,f=t.transactions,m=t.onClickEntity,y=t.onToggleAverage,x=this.state,O=x.allMounted,M=x.showAll,I=0,A=Y()([Z()((function(t){return d?-t.amount:t.amount})),Cr((function(t,e){var n=rt("amount")(t);return I+=n,{entityId:e,transactions:t.length,amount:n}})),r?tt(r):et(n)])(f),S=s&&A.length>6,C=A.slice(0,5),k=A.slice(5);return Object(Nt.jsxs)(En,{title:j,actions:b&&Object(Nt.jsx)(Yt,{onClick:y,children:g?"average":"total"}),children:[0===A.length&&Object(Nt.jsx)(Or,{}),(S?C:A).map((function(t){var n=t.entityId,r=t.transactions,s=t.amount;return Object(Nt.jsx)(Er,{showTransactionCount:p,to:i&&o[n]?i(n):null,transactions:r,name:v()("name")(o[n])||e,amount:g?s/u:s,expectNegative:a,expectPositive:c,selected:n===h,total:g?I/u:I,id:n,onClick:m},n)})),O&&Object(Nt.jsx)(Tn,{open:M,children:Object(Nt.jsx)(l.Fragment,{children:k.map((function(t){var n=t.entityId,r=t.transactions,s=t.amount;return Object(Nt.jsx)(Er,{showTransactionCount:p,to:i&&o[n]?i(n):null,transactions:r,name:v()("name")(o[n])||e,amount:g?s/u:s,expectNegative:a,expectPositive:c,selected:n===h,total:I,id:n,onClick:m,isContinuing:!0},n)}))})}),!!k.length&&S&&Object(Nt.jsx)(Sr,{count:A.length,pluralizedName:kr[n],showAll:M,onToggle:this.handleToggleShowAll})]})}}]),n}(l.Component);wr.defaultProps={emptyName:"(none)"};var Tr,Br,_r,Pr,Fr=function(t){var e=t.to,n=t.children,r=Object(ne.a)(t,["to","children"]);return e?Object(Nt.jsx)(b.b,Object(_.a)(Object(_.a)({},r),{},{to:e,children:n})):Object(Nt.jsx)("span",Object(_.a)(Object(_.a)({},r),{},{children:n}))},Er=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.showTransactionCount,n=t.to,r=t.transactions,o=t.name,a=t.amount,c=t.expectNegative,i=t.expectPositive,s=t.total,u=t.selected,l=t.id,d=t.onClick,h=t.isContinuing;return Object(Nt.jsxs)(yr,{isContinuing:h,onClick:d&&function(){return d(l)},children:[e?Object(Nt.jsx)(Ir,{count:r,label:o,selected:u,to:n}):Object(Nt.jsx)(Fr,{to:n,onClick:n&&function(t){t.stopPropagation()},children:Object(Nt.jsx)(Yt,{style:{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis",color:"inherit",fontWeight:u&&700},children:o})}),Object(Nt.jsx)(Ar,{amount:a,expectNegative:c,expectPositive:i,selected:u,total:s})]})}}]),n}(l.PureComponent),Rr=wr,Lr=Object(Et.a)(yr)(Tr||(Tr=Object(Ft.a)(["\n  border-top: 0;\n  padding-bottom: 0;\n"]))),Gr=function(t){var e=t.category,n=t.payee,r=t.memo,o=t.amount;return Object(Nt.jsxs)(Lr,{isContinuing:!0,children:[Object(Nt.jsx)("div",{style:{overflow:"hidden"},children:Object(Nt.jsx)(vr,{label:v()("name")(n)||"(no payee)",minorText:v()("name")(e)||"(no category)"+(r?" (".concat(r,")"):"")})}),Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(or,{amount:o,expectNegative:!0})})]})},Yr=Et.a.div(Br||(Br=Object(Ft.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: ",";\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"])),(function(t){return t.isCompact?"0":"8px 0"}),yr),Dr=Et.a.div(_r||(_r=Object(Ft.a)(["\n  box-sizing: border-box;\n  padding-left: 3px;\n  width: ","px;\n  font-weight: 400;\n  color: #888;\n  font-size: 10px;\n"])),18),Nr=function(t){var e=t.expanded,n=t.name,r=t.id,o=t.amount,a=t.valueRenderer,c=t.onToggle,i=t.isCompact;return Object(Nt.jsxs)(Yr,{onClick:c,isCompact:i,children:[Object(Nt.jsxs)(Yt,{style:{whiteSpace:"pre",display:"flex",alignItems:"center"},children:[Object(Nt.jsx)(Dr,{children:Object(Nt.jsx)(Be,{icon:"chevron-right",transform:{rotate:e?90:0}})}),"function"===typeof n?n({expanded:e}):n]}),a?a({amount:o,id:r,faded:e}):Object(Nt.jsx)(Yt,{style:{opacity:e?.3:1},children:Object(Nt.jsx)(or,{amount:o,expectNegative:!0})})]})},zr=Object(Et.a)(yr)(Pr||(Pr=Object(Ft.a)(["\n  display: block;\n"]))),Wr=function(t){var e=t.categoriesById,n=t.date,r=t.expanded,o=t.payeesById,a=t.transactions,c=t.onToggleExpanded;return Object(Nt.jsxs)(zr,{children:[Object(Nt.jsx)(Nr,{amount:rt("amount")(a),expanded:r,name:Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[x()(n).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"dddd",sameElse:"DD/MM/YYYY"}),!r&&Object(Nt.jsxs)(Dt,{children:[" ","\u2013 ",a.length," transaction",1===a.length?"":"s"]})]}),onToggle:c,isCompact:!0}),Object(Nt.jsx)(Tn,{open:r,children:Object(Nt.jsx)("div",{style:{paddingLeft:18},children:a.length?a.map((function(t){return Object(Nt.jsx)(Gr,{amount:t.amount,payee:o[t.payee_id],category:e[t.category_id],memo:t.memo},t.id)})):Object(Nt.jsx)(xr,{style:{margin:0},children:"no transactions"})})})]})},Ur=function(t){var e=t.categoriesById,n=t.currentMonth,r=t.payeesById,o=t.transactions,a=et("date")(o),c=zn()(0,5).map((function(t){return x()().subtract(t,"days").format("YYYY-MM-DD")})).filter((function(t){return t.startsWith(n)})),i=Object(l.useState)(c.reduce((function(t,e){return Object(_.a)(Object(_.a)({},t),{},Object(B.a)({},e,!1))}),{})),s=Object(Ke.a)(i,2),u=s[0],d=s[1];return Object(Nt.jsx)(En,{title:"Recent Spending",children:c.map((function(t){return Object(Nt.jsx)(Wr,{categoriesById:e,date:t,expanded:!!u[t],onToggleExpanded:function(){d(Object(_.a)(Object(_.a)({},u),{},Object(B.a)({},t,!u[t])))},payeesById:r,transactions:a[t]||[]},t)}))})},qr=function(t){var e=t.budget,n=t.currentMonth,r=t.historyAction,o=t.investmentAccounts,a=t.location,c=t.sidebarTrigger,i=t.title,s=bn(),u=Object(Ke.a)(s,2),d=u[0],h=u[1],g=e.categoryGroupsById,b=e.categoriesById,p=e.payeesById,j=e.id,f=d&&g[d],m=e.transactions.filter(at([an(e),cn(o),on(e)])),y=Ve()((function(t){return sn(t)===n}))(m);return Object(Nt.jsx)(Sn,{historyAction:r,location:a,sidebarTrigger:c,title:i,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(mr,{budgetId:e.id,currentMonth:n,transactions:m,highlightFunction:d&&function(t){return b[t.category_id].category_group_id===d},title:f?"Day by Day: ".concat(hn(f.name)):"Day by Day"}),Object(Nt.jsx)(Ur,{categoriesById:b,currentMonth:n,payeesById:p,transactions:y}),Object(Nt.jsx)(Rr,{entitiesById:g,entityFunction:function(t){return b[t.category_id].category_group_id},entityKey:"category_group_id",expectNegative:!0,linkFunction:function(t){return _e(Pe.currentMonthGroup.path,{budgetId:j,categoryGroupId:t})},selectedEntityId:d,title:"Category Groups",transactions:y,showTransactionCount:!0,onClickEntity:h})]})})},Kr=n(105),Hr=n.n(Kr),Vr=function(t){var e=t.average,n=t.data,r=t.height,o=t.series,a=t.selectedMonth,c=t.stacked,i=t.onSelectMonth,s=[],u=[],l=n.map((function(t){return x()(t.month).format("MMM")})),d=null;return a&&(d={months:[a],color:Vt}),n.forEach((function(t,e){var n=t.month;"Jan"===x()(n).format("MMM")&&s.push({color:"#ccc",width:1,value:e-.5,zIndex:3})})),d&&d.months.forEach((function(t){var e=Hr()((function(e){return e.month===t}))(n);u.push({color:d.color,from:e-.5,to:e+.5})})),Object(Nt.jsx)($n,{options:{chart:{animation:!1,height:r,type:"column",events:{click:function(t){i&&i(n[Math.round(t.xAxis[0].value)].month)}}},xAxis:{categories:l,plotBands:u,plotLines:s},yAxis:{endOnTick:!1,startOnTick:!1,gridLineColor:"#f0f0f0",labels:{align:"left",x:0,y:-2,style:{color:"#bbb",fontSize:"9px"},zIndex:3},tickPixelInterval:30,title:{text:null},plotLines:e&&[{color:"#aaa",dashStyle:"Dot",width:1,value:-e,zIndex:2}]},plotOptions:{series:{animation:!1,stacking:c?"normal":null}},series:o.map((function(t){return"line"===t.type?{color:t.color,data:n.map(t.valueFunction),enableMouseTracking:!1,type:"line",lineWidth:1,marker:{radius:0},zIndex:3}:{borderWidth:0,color:t.color,data:n.map(t.valueFunction),enableMouseTracking:!1,states:{hover:{brightness:0}}}}))}},n.length)};Vr.defaultProps={height:140,stacked:!0};var Jr,$r,Zr,Qr,Xr=Vr,to=Et.a.div(Jr||(Jr=Object(Ft.a)(["\n  box-sizing: border-box;\n  padding: ","px;\n  display: inline-block;\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  background-color: ",";\n  transition: background-color 0.15s ease-in-out;\n"])),2,32,18,9,(function(t){return t.on?Kt:"#ddd"})),eo=Et.a.div($r||($r=Object(Ft.a)(["\n  box-sizing: border-box;\n  height: ","px;\n  width: ","px;\n  border-radius: 50%;\n  background-color: #fff;\n  transform: translate3d(","px, 0, 0);\n  transition: transform 0.15s ease-in-out;\n"])),14,14,(function(t){return t.on?14:0})),no=function(t){var e=t.on,n=t.onClick;return Object(Nt.jsx)(to,{on:e,onClick:n,children:Object(Nt.jsx)(eo,{on:e})})},ro=Et.a.div(Zr||(Zr=Object(Ft.a)(["\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 10px 0;\n"]))),oo=Et.a.div(Qr||(Qr=Object(Ft.a)([""]))),ao=function(t){var e=t.label,n=t.name,r=t.checked,o=t.onChange;return Object(Nt.jsxs)(ro,{onClick:function(){o({target:{name:n,checked:!r}})},children:[Object(Nt.jsx)(oo,{children:e}),Object(Nt.jsx)(no,{on:r,onClick:function(){o({target:{name:n,checked:!r}})}})]})},co=function(t){var e=t.excludeFirstMonth,n=t.excludeLastMonth,r=t.open,o=t.onClose,a=t.onSetExclusion;return Object(Nt.jsxs)(gr,{open:r,onClose:o,title:"Chart Settings",width:240,children:[Object(Nt.jsx)(ao,{checked:e,label:"Exclude first month",name:"excludeFirstMonth",onChange:function(){a({month:"first",exclude:!e})}}),Object(Nt.jsx)(ao,{checked:n,label:"Exclude last month",name:"excludeLastMonth",onChange:function(){a({month:"last",exclude:!n})}}),Object(Nt.jsx)(Dt,{style:{marginTop:5},children:"Excluding incomplete months may lead to more representative averages"})]})},io=function(t){var e=t.excludeFirstMonth,n=t.excludeLastMonth,r=t.expectPositive,o=t.highlightFunction,a=t.months,c=t.selectedMonth,i=t.title,s=t.transactions,u=t.onSelectMonth,d=t.onSetExclusion,h=Object(l.useState)(!1),g=Object(Ke.a)(h,2),b=g[0],p=g[1],j=0,f=0,m=tt(sn)(s),y=a.map((function(t){var e=tt(o||function(){return!1})(m[t]||[]),n=rt("amount")(e.false||[]),a=rt("amount")(e.true||[]);return j+=o?a:n,t===c&&(f=o?a:n),{month:t,amount:r?n:-n,highlighted:r?a:-a}})),O=c?[{amount:j/a.length,label:"average"},{amount:f,label:x()(c).format("MMM YYYY")}]:[{amount:j/a.length,label:"average"},{amount:j,label:"total"}],v=[{color:o?$t:Jt,valueFunction:function(t){return t.amount}}];return o&&v.push({color:Jt,valueFunction:function(t){return t.highlighted}}),Object(Nt.jsxs)(En,{title:i,hasSettings:!0,onClickSettings:function(){p(!0)},children:[Object(Nt.jsx)(ar,{numbers:O,expectPositive:r}),Object(Nt.jsx)(Xr,{data:y,average:j/a.length,series:v,selectedMonth:c,onSelectMonth:u}),Object(Nt.jsx)(co,{excludeFirstMonth:e,excludeLastMonth:n,open:b,onClose:function(){p(!1)},onSetExclusion:d})]})};io.defaultProps={title:"Month by Month"};var so=io,uo=ot((function(t,e,n,r){var o=ln(t),a=x()().format("YYYY-MM");return t.transactions.filter(at([on(t),cn(e),function(t){return n&&sn(t)===o},function(t){return r&&sn(t)===a}]))})),lo=ot((function(t,e,n,r){return uo(t,e,n,r).filter((function(e){return an(t)(e)}))})),ho=function(t){var e=t.budget,n=t.historyAction,r=t.investmentAccounts,o=t.location,a=t.sidebarTrigger,c=t.title,i=jn(e),s=i.excludeFirstMonth,u=i.excludeLastMonth,d=i.months,h=i.onSetExclusion,g=gn(),b=Object(Ke.a)(g,2),p=b[0],j=b[1],f=bn(),m=Object(Ke.a)(f,2),y=m[0],O=m[1],v=fn(!0),M=Object(Ke.a)(v,4),I=M[0],A=M[3],S=e.payeesById,C=lo(e,r,s,u),k=p&&C.filter((function(t){return sn(t)===p}));return Object(Nt.jsx)(Sn,{historyAction:n,location:o,sidebarTrigger:a,title:c,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:s,excludeLastMonth:u,expectPositive:!0,highlightFunction:y&&function(t){return t.payee_id===y},months:d,selectedMonth:p,title:y?"Month by Month: ".concat(hn(e.payeesById[y].name)):"Month by Month",transactions:C,onSelectMonth:j,onSetExclusion:h}),Object(Nt.jsx)(Rr,{entityKey:"payee_id",entitiesById:S,numMonths:p?1:d.length,reverse:!0,title:p?"Payees: ".concat(x()(p).format("MMMM")):"Payees",transactions:k||C,selectedEntityId:y,showAverageToggle:!p,showAverage:I,onClickEntity:O,onToggleAverage:A},"payee-".concat(p||"all"))]})})},go=function(t){var e=t.category,n=t.payee,r=t.memo,o=t.date,a=t.amount,c=t.isContinuing;return Object(Nt.jsxs)(yr,{isContinuing:c,children:[Object(Nt.jsxs)("div",{style:{overflow:"hidden"},children:[Object(Nt.jsx)(vr,{label:v()("name")(n)||"(no payee)",minorText:(v()("name")(e)||"")+(r?" (".concat(r,")"):"")}),Object(Nt.jsx)(Dt,{children:x()(o).format("dddd, MMM D")})]}),Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(or,{amount:a,expectNegative:!0})})]})},bo=function(t){var e=t.transactions,n=t.title,r=t.categoriesById,o=t.payeesById;return Object(Nt.jsx)(En,{title:n,children:e.length?e.map((function(t){var e=t.id,n=t.category_id,a=t.payee_id,c=t.date,i=t.memo,s=t.amount;return Object(Nt.jsx)(go,{amount:s,category:r[n],date:c,memo:i,payee:o[a]},e)})):Object(Nt.jsx)(Or,{})})};bo.defaultProps={title:"Transactions"};var po=bo,jo=function(t){var e=t.budget,n=t.categoryGroupId,r=t.currentMonth,o=t.historyAction,a=t.location,c=t.sidebarTrigger,i=t.title,s=bn(),u=Object(Ke.a)(s,2),d=u[0],h=u[1],g=e.id,b=e.payeesById,p=e.categories,j=e.categoriesById,f=e.transactions,m=d&&j[d],y=p.filter((function(t){return t.category_group_id===n})),x=y.map((function(t){return t.id})),O=f.filter((function(t){return x.includes(t.category_id)})),v=O.filter((function(t){return sn(t)===r})),M=d&&v.filter((function(t){return t.category_id===d})),I=-rt("activity")(y),A=rt("balance")(y);return Object(Nt.jsx)(Sn,{location:a,historyAction:o,sidebarTrigger:c,budget:e,title:i,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(mr,{budgetId:g,currentMonth:r,highlightFunction:d&&function(t){return t.category_id===d},title:m?"Day by Day: ".concat(hn(m.name)):"Day by Day",transactions:O,total:I+A}),Object(Nt.jsx)(Rr,{entityKey:"category_id",entitiesById:j,expectNegative:!0,linkFunction:function(t){return _e(Pe.currentMonthCategory.path,{budgetId:g,categoryGroupId:n,categoryId:t})},selectedEntityId:d,title:"Categories",transactions:v,showTransactionCount:!0,onClickEntity:h}),Object(Nt.jsx)(po,{categoriesById:j,payeesById:b,transactions:M||v,title:m?"Transactions: ".concat(hn(m.name)):"Transactions"})]})})},fo=function(t){var e=t.budget,n=t.currentMonth,r=t.categoryId,o=t.historyAction,a=t.location,c=t.sidebarTrigger,i=t.title,s=e.id,u=e.payeesById,d=e.categoriesById,h=e.transactions,g=d[r],b=h.filter((function(t){return t.category_id===r})),p=b.filter((function(t){return sn(t)===n})),j=-g.activity,f=g.balance;return Object(Nt.jsx)(Sn,{historyAction:o,location:a,sidebarTrigger:c,budget:e,title:i,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(mr,{budgetId:s,currentMonth:n,title:"Day by Day",transactions:b,total:j+f},g?g.name:"day-by-day"),Object(Nt.jsx)(po,{categoriesById:d,payeesById:u,transactions:p})]})})},mo=function(t){var e=t.budget,n=t.excludeFirstMonth,r=t.excludeLastMonth,o=t.historyAction,a=t.location,c=t.months,i=t.sidebarTrigger,s=t.title,u=t.transactions,d=t.selectedMonth,h=t.selectedGroupId,g=t.onSelectGroup,b=t.onSelectMonth,p=t.onSetExclusion,j=pn(e.id),f=Object(Ke.a)(j,2),m=f[0],y=f[1],O=e.categoryGroupsById,v=e.categoriesById,M=e.id,I=h&&O[h],A=d&&u.filter((function(t){return sn(t)===d}));return Object(Nt.jsx)(Sn,{historyAction:o,location:a,sidebarTrigger:i,title:s,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:n,excludeLastMonth:r,highlightFunction:h&&function(t){return v[t.category_id].category_group_id===h},months:c,selectedMonth:d,title:I?"Month by Month: ".concat(hn(I.name)):"Month by Month",transactions:u,onSelectMonth:b,onSetExclusion:p}),Object(Nt.jsx)(Rr,{entityFunction:function(t){return v[t.category_id].category_group_id},entityKey:"category_group_id",entitiesById:O,expectNegative:!0,linkFunction:function(t){return _e(Pe.group.path,{budgetId:M,categoryGroupId:t})},selectedEntityId:h,title:d?"Category Groups: ".concat(x()(d).format("MMMM")):"Category Groups",transactions:A||u,onClickEntity:g,numMonths:c.length,showAverageToggle:!d,showAverage:m&&!d,onToggleAverage:y},d||"all")]})})},yo=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={allMounted:!1,showAll:!1},t.handleToggleShowAll=function(){var e=t.state,n=e.allMounted,r=e.showAll;n?t.setState({showAll:!r}):(t.setState({allMounted:!0}),requestAnimationFrame((function(){t.setState({showAll:!0})})))},t}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.categoriesById,n=t.payeesById,r=t.selectedCategoryId,o=t.selectedPayeeId,a=t.selectedMonth,c=t.transactions,i=t.limitShowing,s=this.state,u=s.allMounted,d=s.showAll,h=r&&e[r],g=o&&n[o],b=x()(a).format("MMMM"),p=Y()([i?Z()("amount"):function(t){return t.reverse()},function(t){return t.filter((function(t){return sn(t)===a&&(!r||t.category_id===r)&&(!o||t.payee_id===o)}))}])(c),j=i&&p.length>5,f=j?p.slice(0,3):p,m=j?p.slice(3):[];return Object(Nt.jsxs)(En,{title:g?"Transactions: ".concat(b,", ").concat(g.name):h?"Transactions: ".concat(b,", ").concat(h.name):"Transactions: ".concat(b),children:[f.length?f.map((function(t){var r=t.id,o=t.date,a=t.amount,c=t.memo,i=t.payee_id,s=t.category_id;return Object(Nt.jsx)(go,{amount:a,category:e[s],date:o,memo:c,payee:n[i]},r)})):Object(Nt.jsx)(Or,{}),u&&Object(Nt.jsx)(Tn,{open:d,children:Object(Nt.jsx)(l.Fragment,{children:m.map((function(t){var r=t.id,o=t.date,a=t.amount,c=t.payee_id,i=t.category_id;return Object(Nt.jsx)(go,{amount:a,category:e[i],date:o,payee:n[c],isContinuing:!0},r)}))})}),!!m.length&&Object(Nt.jsx)(Sr,{count:p.length,pluralizedName:"transactions",showAll:d,onToggle:this.handleToggleShowAll})]})}}]),n}(l.Component);yo.defaultProps={limitShowing:!0};var xo,Oo=yo,vo=function(t){var e=t.budget,n=t.categoryGroupId,r=t.excludeFirstMonth,o=t.excludeLastMonth,a=t.historyAction,c=t.location,i=t.months,s=t.selectedMonth,u=t.selectedCategoryId,d=t.sidebarTrigger,h=t.title,g=t.transactions,b=t.onSelectMonth,p=t.onSelectCategory,j=t.onSetExclusion,f=pn(e.id),m=Object(Ke.a)(f,2),y=m[0],O=m[1],v=e.categories,M=e.categoriesById,I=e.categoryGroupsById,A=e.payeesById,S=e.id,C=I[n],k=u&&M[u],w=v.filter((function(t){return t.category_group_id===C.id})).map((function(t){return t.id})),T=g.filter((function(t){return w.includes(t.category_id)})),B=s&&Y()([Z()("amount"),function(t){return t.filter((function(t){return sn(t)===s}))}])(T);return Object(Nt.jsx)(Sn,{historyAction:a,location:c,sidebarTrigger:d,budget:e,title:h,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:r,excludeLastMonth:o,months:i,highlightFunction:u&&function(t){return t.category_id===u},selectedMonth:s,title:k?"Month by Month: ".concat(hn(k.name)):"Month by Month",transactions:T,onSelectMonth:b,onSetExclusion:j}),Object(Nt.jsx)(Rr,{entityKey:"category_id",entitiesById:M,expectNegative:!0,linkFunction:function(t){return _e(Pe.category.path,{budgetId:S,categoryGroupId:C.id,categoryId:t})},title:s?"Categories: ".concat(x()(s).format("MMMM")):"Categories",transactions:B||T,selectedEntityId:u,onClickEntity:p,showAverageToggle:!s,showAverage:y&&!s,numMonths:i.length,onToggleAverage:O,limitShowing:!0},"categories-".concat(s||"all")),s&&B.length>0&&Object(Nt.jsx)(Oo,{categoriesById:M,payeesById:A,selectedMonth:s,selectedCategoryId:u,transactions:B},"transactions-".concat(s||"all","-").concat(u||"all"))]})})},Mo={selectedMonth:null,selectedGroupId:null,selectedCategoryId:null,selectedPayeeId:null},Io=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state=Mo,t.cachedStates={},t.handleSelectMonth=function(e){t.setState((function(t){return Object(_.a)(Object(_.a)({},t),{},{selectedMonth:t.selectedMonth===e?null:e})}))},t.handleSelectGroup=function(e){t.setState((function(t){return Object(_.a)(Object(_.a)({},t),{},{selectedGroupId:t.selectedGroupId===e?null:e})}))},t.handleSelectCategory=function(e){t.setState((function(t){return Object(_.a)(Object(_.a)({},t),{},{selectedCategoryId:t.selectedCategoryId===e?null:e})}))},t.handleSelectPayee=function(e){t.setState((function(t){return Object(_.a)(Object(_.a)({},t),{},{selectedPayeeId:t.selectedPayeeId===e?null:e})}))},t}return Object(kt.a)(n,[{key:"getSnapshotBeforeUpdate",value:function(){return this.state}},{key:"componentDidUpdate",value:function(t,e,n){var r=this.props,o=r.location,a=r.action;o!==t.location&&("POP"===a&&(this.cachedStates[t.location]=n,this.setState(this.cachedStates[o])),"PUSH"===a&&(this.cachedStates[t.location]=n,this.setState(Mo)),"REPLACE"===a&&this.setState(Mo))}},{key:"render",value:function(){return this.props.children(Object(_.a)(Object(_.a)({},this.state),{},{onSelectMonth:this.handleSelectMonth,onSelectGroup:this.handleSelectGroup,onSelectCategory:this.handleSelectCategory,onSelectPayee:this.handleSelectPayee,onSetExclusion:this.handleSetExclusion}))}}]),n}(l.Component),Ao=function(t){var e=t.categoryId,n=t.budget,r=t.excludeFirstMonth,o=t.excludeLastMonth,a=t.historyAction,c=t.location,i=t.months,s=t.selectedMonth,u=t.selectedPayeeId,d=t.sidebarTrigger,h=t.title,g=t.transactions,b=t.onSelectMonth,p=t.onSelectPayee,j=t.onSetExclusion,f=n.categoriesById,m=n.payeesById,y=n.id,O=f[e],v=u&&m[u],M=g.filter((function(t){return t.category_id===e})),I=s&&M.filter((function(t){return sn(t)===s}));return Object(Nt.jsx)(Sn,{historyAction:a,location:c,sidebarTrigger:d,budget:n,title:h,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:r,excludeLastMonth:o,months:i,onSetExclusion:j,highlightFunction:u&&function(t){return t.payee_id===u},selectedMonth:s,title:v?"Month by Month: ".concat(hn(v.name)):"Month by Month",transactions:M,onSelectMonth:b}),Object(Nt.jsx)(Rr,{emptyName:"(no payee)",entitiesById:m,entityKey:"payee_id",expectNegative:!0,linkFunction:function(t){return _e(Pe.categoryPayee.path,{budgetId:y,categoryGroupId:O.category_group_id,categoryId:e,payeeId:t})},title:s?"Payees: ".concat(x()(s).format("MMMM")):"Payees",transactions:I||M,selectedEntityId:u,onClickEntity:p,limitShowing:!0},"payees-".concat(s||"all")),s&&I.length>0&&Object(Nt.jsx)(Oo,{categoriesById:f,payeesById:m,transactions:I,selectedMonth:s,selectedPayeeId:u},"transactions-".concat(s||"all","-").concat(u||"all"))]})})},So=function(t){var e=t.budget,n=t.categoryId,r=t.excludeFirstMonth,o=t.excludeLastMonth,a=t.historyAction,c=t.location,i=t.months,s=t.payeeId,u=t.selectedMonth,d=t.sidebarTrigger,h=t.title,g=t.transactions,b=t.onSelectMonth,p=t.onSetExclusion,j=e.categoriesById,f=e.payeesById,m=g.filter((function(t){return t.category_id===n&&t.payee_id===s}));return Object(Nt.jsx)(Sn,{historyAction:a,location:c,sidebarTrigger:d,budget:e,title:h,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:r,excludeLastMonth:o,months:i,selectedMonth:u,transactions:m,onSelectMonth:b,onSetExclusion:p}),u&&Object(Nt.jsx)(Oo,{categoriesById:j,payeesById:f,selectedMonth:u,transactions:m,limitShowing:!1})]})})},Co=n(151),ko=n.n(Co),wo=function(t){var e=t.data,n=t.onSelectMonth,r=t.selectedMonth;return Object(Nt.jsx)(Xr,{data:e,height:180,selectedMonth:r,series:[{color:$t,valueFunction:function(t){return t.income}},{color:Zt,valueFunction:function(t){return t.expenses}},{type:"line",color:Kt,valueFunction:function(t){return t.income+t.expenses}}],onSelectMonth:n})},To=n(68),Bo=n.n(To),_o=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={expanded:!1,childrenMounted:!1},t.handleToggleExpand=function(){var e=t.state,n=e.expanded;e.childrenMounted?t.setState({expanded:!n}):(t.setState({childrenMounted:!0}),requestAnimationFrame((function(){t.setState({expanded:!0})})))},t}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.name,n=t.id,r=t.amount,o=t.nodes,a=t.isTopLevel,c=t.valueRenderer,i=this.state,s=i.expanded,u=i.childrenMounted,l=!!o&&o.length>0;return Object(Nt.jsxs)(Ro,{hasChildNodes:l,isTopLevel:a,children:[l?Object(Nt.jsx)(Nr,{id:n,name:e,amount:r,expanded:s,onToggle:this.handleToggleExpand,valueRenderer:c}):Object(Nt.jsx)(Eo,{id:n,name:e,amount:r,valueRenderer:c}),l&&u&&Object(Nt.jsx)(Tn,{open:s,children:Object(Nt.jsx)(Po,{nodes:o,valueRenderer:c})})]})}}]),n}(l.Component),Po=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"render",value:function(){var t=this.props,e=t.nodes,n=t.valueRenderer;return Object(Nt.jsx)("div",{style:{paddingLeft:18},children:e.map((function(t){return Object(l.createElement)(_o,Object(_.a)(Object(_.a)({},t),{},{key:t.id,isTopLevel:!1,valueRenderer:n}))}))})}}]),n}(l.PureComponent),Fo=Et.a.div(xo||(xo=Object(Ft.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"])),yr),Eo=function(t){var e=t.name,n=t.id,r=t.amount,o=t.valueRenderer;return Object(Nt.jsxs)(Fo,{children:[Object(Nt.jsx)(Yt,{children:e}),o?o({amount:r,id:n}):Object(Nt.jsx)(Yt,{children:Object(Nt.jsx)(or,{amount:r})})]})},Ro=function(t){var e=t.isTopLevel,n=(t.hasChildNodes,t.children);return e?Object(Nt.jsx)(yr,{style:{display:"block",padding:0},children:n}):n},Lo=_o,Go=function(t){var e=t.nodes,n=t.valueRenderer;return e.map((function(t){var e=t.id,r=t.name,o=t.amount,a=t.nodes;return Object(Nt.jsx)(Lo,{id:e,name:r,amount:o,nodes:a,valueRenderer:n,isTopLevel:!0},e)}))};Go.defaultProps={reverse:!1};var Yo=Go,Do=tn.a.convert({cap:!1}),No=function(t){var e=t.categoriesById,n=t.categoryGroupsById,r=t.transactions,o=t.totalIncome,a=t.payeesById,c=t.divideBy,i=Y()([Do((function(t,n){var r=dn({payeesById:a,transactions:t},c);return Object(_.a)(Object(_.a)({},Qe()(["id","name","category_group_id"])(e[n])),{},{nodes:Z()("amount")(r),amount:rt("amount")(r)})})),et("category_id")])(r),s=Y()([Do((function(t,e){var r=Do(H()("category_group_id"))(t);return Object(_.a)(Object(_.a)({},Qe()(["id","name"])(n[e])),{},{nodes:Z()("amount")(r),amount:rt("amount")(r)})})),et("category_group_id")])(i),u=dn({payeesById:a,transactions:r.filter((function(t){return!t.category_id}))},c),l=Y()([function(t){return Bo()(t)([{id:"net",amount:-o-rt("amount")(t),name:"Net Income"}])},Z()("amount"),Bo()(u)])(s);return Object(Nt.jsx)(En,{title:"Expenses Breakdown",children:Object(Nt.jsx)(Yo,{nodes:l,valueRenderer:function(t){return Object(Nt.jsx)(Ar,Object(_.a)(Object(_.a)({},t),{},{expectNegative:!0,total:-o}))}})})};No.defaultProps={divideBy:1};var zo=No,Wo=function(t){var e=t.transactions,n=t.payeesById,r=t.divideBy,o=dn({payeesById:n,transactions:e},r),a=Un()("amount")(o);return Object(Nt.jsx)(En,{title:"Income Breakdown",children:Object(Nt.jsx)(Yo,{nodes:Z()("amount")(o).reverse(),total:a,valueRenderer:function(t){return Object(Nt.jsx)(Ar,Object(_.a)(Object(_.a)({},t),{},{expectPositive:!0,total:a}))}})})};Wo.defaultProps={divideBy:1};var Uo,qo=Wo,Ko=function(t){var e=t.categoriesById,n=t.categoryGroupsById,r=t.payeesById,o=t.expenseTransactions,a=t.incomeTransactions,c=t.divideBy;return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(zo,{categoriesById:e,categoryGroupsById:n,payeesById:r,transactions:o,totalIncome:rt("amount")(a)/c,divideBy:c}),Object(Nt.jsx)(qo,{payeesById:r,transactions:a,divideBy:c})]})},Ho=tn.a.convert({cap:!1}),Vo=ot((function(t,e,n){return Y()([Z()("month"),Ho((function(t,e){var r=tt(an(n))(t);return{month:e,expenseTransactions:r.false||[],incomeTransactions:r.true||[],income:rt("amount")(r.true||[]),expenses:rt("amount")(r.false||[])}})),tt(sn)])(t)})),Jo=function(t){var e=t.budget,n=t.excludeFirstMonth,r=t.excludeLastMonth,o=t.historyAction,a=t.investmentAccounts,c=t.location,i=t.sidebarTrigger,s=t.title,u=t.transactions,d=t.onSetExclusion,h=gn(),g=Object(Ke.a)(h,2),b=g[0],p=g[1],j=Object(l.useState)(!1),f=Object(Ke.a)(j,2),m=f[0],y=f[1],x=Object(l.useState)(!1),O=Object(Ke.a)(x,2),v=O[0],M=O[1],I=e.categoriesById,A=e.categoryGroupsById,S=e.payeesById,C=Vo(u,a,e),k=b?[$e()(q()("month",b))(C)]:C,w=N()((function(t){return t.incomeTransactions}))(ko()(k)),T=N()((function(t){return t.expenseTransactions}))(ko()(k)),B=rt("amount")(T),_=rt("amount")(w),P=v?1:k.length;return Object(Nt.jsx)(Sn,{historyAction:o,location:c,sidebarTrigger:i,title:s,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(En,{title:"Monthly Trend",hasSettings:!0,onClickSettings:function(){y(!0)},actions:Object(Nt.jsx)(Yt,{onClick:function(){M(!v)},children:v?"show average":"show total"}),children:[Object(Nt.jsx)(ar,{expectPositive:!0,numbers:[{label:"net income",amount:(B+_)/P},{label:"expenses",amount:-B/P},{label:"income",amount:_/P}]}),Object(Nt.jsx)(wo,{data:C,selectedMonth:b,onSelectMonth:p}),Object(Nt.jsx)(co,{excludeFirstMonth:n,excludeLastMonth:r,open:m,onClose:function(){y(!1)},onSetExclusion:d})]}),Object(Nt.jsx)(Ko,{categoriesById:I,categoryGroupsById:A,payeesById:S,expenseTransactions:T,incomeTransactions:w,divideBy:v?1:k.length})]})})},$o=n(233),Zo=n.n($o),Qo=n(234),Xo=n.n(Qo),ta=n(27),ea=n.n(ta),na=n(40),ra=n.n(na),oa=n(69),aa=n.n(oa),ca=n(152),ia=n.n(ca),sa=n(235),ua=n.n(sa),la=n(153),da=n.n(la),ha=n(36),ga=n.n(ha),ba=["mortgage","creditCard"],pa=function(t){var e=t.data,n=t.months,r=t.mortgageAccounts,o=t.selectedMonth,a=t.onSelectMonth,c=tt((function(t){return function(t){var e=t.type,n=t.id;return t.mortgageAccounts[n]||ga()(e)(ba)?"liability":"asset"}({type:t.type,id:t.id,mortgageAccounts:r})}))(e),i=n.map((function(t,e){return{month:t,assets:Un()((function(t){return t.data[e]}))(c.asset),liabilities:Un()((function(t){return t.data[e]}))(c.liability)}}));return Object(Nt.jsx)(Xr,{selectedMonth:o,onSelectMonth:a,data:i,height:180,series:[{color:Zt,valueFunction:function(t){return Math.max(-t.liabilities,0)}},{color:$t,valueFunction:function(t){return Math.max(t.assets,0)}},{color:Kt,type:"line",valueFunction:function(t){return t.assets+t.liabilities}}],stacked:!1})},ja=n(236),fa=n.n(ja),ma=n(237),ya=n.n(ma),xa=n(238),Oa=n.n(xa),va=tn.a.convert({cap:!1}),Ma=function(t){var e=t.accountsById,n=t.hiddenAccounts,r=t.nodes,o=t.onToggleAccounts;return Object(Nt.jsx)(Yo,{nodes:r,valueRenderer:function(t){var a=t.id,c=t.amount,i=r.find(ya()("id",a)),s=i?i.accounts:[e[a]];return Object(Nt.jsxs)(Yt,{style:{display:"flex",alignItems:"center"},children:[Object(Nt.jsx)(or,{amount:c}),Object(Nt.jsx)("div",{style:{display:"flex",alignItems:"center",marginLeft:10},children:Object(Nt.jsx)(no,{onClick:function(t){t.stopPropagation(),o({ids:va("id")(s)})},on:!fa()((function(t){return n[t.id]}))(s)})})]})}})},Ia=function(t){var e=t.accounts,n=t.hiddenAccounts,r=t.onToggleAccounts,o=t.investmentAccounts,a=t.mortgageAccounts,c=Pt()("id")(e),i=function(t){var e=t.accounts,n=t.investmentAccounts,r=t.mortgageAccounts,o=ra()((function(t){return n[t.id]?"Investments":r[t.id]?"Mortgages":Oa()(t.type)}))(e);return Y()([function(t){return t.reverse()},Z()("amount"),va((function(t,e){return{name:e,accounts:t,amount:Un()("balance")(t),id:e,nodes:Y()([Z()("balance"),va((function(t){var e=t.id,n=t.name;return{amount:t.balance,id:e,name:n}}))])(t)}}))])(o)}({accounts:e,investmentAccounts:o,mortgageAccounts:a});return Object(Nt.jsx)(En,{title:"Accounts",children:Object(Nt.jsx)(Ma,{accountsById:c,hiddenAccounts:n,nodes:i,onToggleAccounts:r})})},Aa=function(t){var e=t.months,n=t.accountSummaries,r=t.hiddenAccounts,o=e.map((function(t){return{month:t,total:0}}));n.forEach((function(t){var e=t.id,n=t.data;r[e]||n.forEach((function(t,e){o[e].total+=t}))}));var a=o.map((function(t,e){return{year:t.month.slice(0,4),month:t.month,change:0===e?null:t.total-o[e-1].total}})).reverse(),c=ra()("year")(a),i=Object.keys(c).sort().reverse().map((function(t){return{amount:Un()("change")(c[t]),id:t,name:t,nodes:c[t].map((function(t){return{amount:t.change,name:x()(t.month).format("MMMM"),id:t.month}}))}}));return Object(Nt.jsx)(En,{title:"Net Worth Changes",children:Object(Nt.jsx)(Yo,{nodes:i,valueRenderer:function(t){var e=t.faded,n=t.amount;return Object(Nt.jsx)(Yt,{style:{opacity:e?.3:1},children:Object(Nt.jsx)(or,{amount:n,positiveColor:"green",negativeColor:"red"})})}})})},Sa=function(t){return t.reduce((function(t,e){return 0===t.length?[e]:t.concat(nn()(t)+e)}),[])},Ca=ot(Y()([ia()(ra()("account_id")),ra()((function(t){return t.date.slice(0,7)}))])),ka=ot((function(t){return Y()([Z()(aa.a),oe.a,Ca])(t.transactions)})),wa=ot((function(t){var e=Ca(t.transactions),n=ka(t);return tn()((function(t){var r=t.id;return{id:r,data:Y()([Sa,tn()((function(t){return Un()("amount")(e[t][r])}))])(n)}}))(t.accounts)})),Ta=ot((function(t,e){var n=ka(e),r=Hr()(Xo()(t))(n),o=wa(e);return Y()([ia()((function(t){var e=t.data;return r>-1?e[r]:nn()(e)})),Pt()("id")])(o)})),Ba=function(t){var e=t.budget,n=t.historyAction,r=t.investmentAccounts,o=t.location,a=t.mortgageAccounts,c=t.sidebarTrigger,i=t.title,s=gn(),u=Object(Ke.a)(s,2),d=u[0],h=u[1],g=function(t){var e=Object(l.useState)(R("netWorthHiddenAccounts",t.id)),n=Object(Ke.a)(e,2),r=n[0],o=n[1];return{hiddenAccounts:r,onToggleHiddenAccounts:function(e){var n=e.ids,a=n.some((function(t){return!r[t]})),c=n.reduce((function(t,e){return Object(_.a)(Object(_.a)({},t),{},Object(B.a)({},e,a))}),r);o(c),L("netWorthHiddenAccounts",t.id,c)}}}(e),b=g.hiddenAccounts,p=g.onToggleHiddenAccounts,j=ka(e),f=wa(e),m=Ta(d,e),y=ua()((function(t,e){return b[e]})),x=Y()([da.a,ea()((function(t){return t<0})),xn.a,y])(m),O=Y()([da.a,ea()((function(t){return t>0})),xn.a,y])(m);return Object(Nt.jsx)(Sn,{historyAction:n,location:o,sidebarTrigger:c,title:i,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(En,{title:"Monthly Trend",children:[Object(Nt.jsx)(ar,{alwaysRound:!0,expectPositive:!0,numbers:[{amount:O+x,label:"Net Worth"},{amount:O,label:"Assets"},{amount:-x,label:"Liabilities"}]}),Object(Nt.jsx)(pa,{data:tn()((function(t){var n=t.id,r=t.data;return{data:b[n]?r.map(Zo()(0)):r,type:e.accountsById[n].type,id:n}}))(f),months:j,mortgageAccounts:a,selectedMonth:d,onSelectMonth:h})]}),Object(Nt.jsx)(Ia,{accounts:tn()((function(t){return Object(_.a)(Object(_.a)({},t),{},{balance:m[t.id]})}))(e.accounts),hiddenAccounts:b,investmentAccounts:r,mortgageAccounts:a,onToggleAccounts:p}),Object(Nt.jsx)(Aa,{accountSummaries:f,hiddenAccounts:b,months:j})]})})},_a=function(t){return function(e){return!!t[e.account_id]&&!!e.transfer_account_id&&!t[e.transfer_account_id]}},Pa=function(t,e){return function(n){return!!t[n.account_id]&&!n.transfer_account_id&&"Starting Balance"!==v()([n.payee_id,"name"])(e)}},Fa=function(t){var e=t.budget,n=t.historyAction,r=t.investmentAccounts,o=t.location,a=t.sidebarTrigger,c=t.title,i=jn(e),s=i.excludeFirstMonth,u=i.excludeLastMonth,d=i.months,h=i.onSetExclusion,g=gn(),p=Object(Ke.a)(g,2),j=p[0],f=p[1],m=bn(),y=Object(Ke.a)(m,2),x=y[0],O=y[1],v=e.payeesById;if(0===oe()(r).length)return Object(Nt.jsxs)(xr,{children:["You don't have any accounts marked as investment accounts."," ",Object(Nt.jsx)(b.b,{to:_e(Pe.settings.path,{budgetId:e.id}),children:"Go to Settings"})]});var M=e.transactions.filter(function(t,e){return function(n){return _a(t)(n)||Pa(t,e)(n)}}(r,v)),I=j&&M.filter((function(t){return sn(t)===j}));return Object(Nt.jsx)(Sn,{historyAction:n,location:o,sidebarTrigger:a,title:c,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(so,{excludeFirstMonth:s,excludeLastMonth:u,expectPositive:!0,highlightFunction:x&&function(t){return"contribution"===x?_a(r)(t):Pa(r,v)(t)},months:d,selectedMonth:j,transactions:M,onSelectMonth:f,onSetExclusion:h}),Object(Nt.jsx)(Rr,{transactions:I||M,entitiesById:{contribution:{name:"Contributions"},capitalGain:{name:"Capital Gains/Losses"}},expectPositive:!0,title:"Growth Breakdown",onClickEntity:O,selectedEntityId:x,entityFunction:function(t){return _a(r)(t)?"contribution":"capitalGain"},positiveIsRed:!0})]})})},Ea=n(154),Ra=n.n(Ea),La=n(70),Ga=n.n(La),Ya=n(239),Da=n.n(Ya),Na=n(240),za=n.n(Na),Wa=n(72),Ua=n.n(Wa),qa=n(241),Ka=n.n(qa),Ha=n(47),Va=n.n(Ha),Ja=n(242),$a=n.n(Ja),Za=function(t){var e=t.investmentsProjection,n=t.mortgageProjection,r=t.amountNeededToRetire,o=t.yearsUntilRetirement;return Object(Nt.jsx)($n,{options:{chart:{type:"column"},xAxis:{type:"category",plotBands:[{color:Vt,from:Math.floor(o)-.5,to:Math.floor(o)+.5}]},yAxis:{title:{text:null},endOnTick:!1,plotLines:[{value:r,color:"#ccc",width:1}]},legend:{enabled:!1},series:[{data:e,color:Kt,borderWidth:0},{data:n,color:Ht,borderWidth:0}]}})},Qa=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},Xa=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).parent=null,t.handleBodyClick=function(e){t.props.onClickOff&&!Qa(t.parent,e.target)&&t.props.onClickOff()},t}return Object(kt.a)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.handleBodyClick)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleBodyClick)}},{key:"render",value:function(){var t=this;return this.props.children({ref:function(e){t.parent=e}})}}]),n}(l.Component),tc=document.getElementsByTagName("body")[0],ec=Et.a.div(Uo||(Uo=Object(Ft.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #fff;\n"]))),nc=function(t){var e=t.name,n=t.formatter,r=t.label,o=t.value,a=t.onBlur,c=t.onChange,i=t.onReset,s=t.rangeOptions;return Object(h.createPortal)(Object(Nt.jsx)(Xa,{onClickOff:e&&a,children:function(t){var a=t.ref;return Object(Nt.jsx)(ec,{ref:a,children:Object(Nt.jsx)(Tn,{open:!!e,children:Object(Nt.jsxs)("div",{style:{borderTop:"1px solid #bbb",padding:"15px 20px"},children:[Object(Nt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:[r,": ",n(o||0),Object(Nt.jsx)(te,{onClick:function(){i(e)},children:"reset"})]}),Object(Nt.jsx)(sc,Object(_.a)(Object(_.a)({},s),{},{name:e,value:o||0,onChange:c}))]})})})}}),tc)};nc.defaultProps={formatter:function(t){return t}};var rc,oc,ac,cc,ic,sc=function(t){var e=t.name,n=(t.onReset,Object(ne.a)(t,["name","onReset"]));return Object(Nt.jsx)("input",Object(_.a)(Object(_.a)({},n),{},{name:e,type:"range",style:{display:"block",width:"100%"}}))},uc=nc,lc=[{label:"Average monthly contribution",name:"averageContribution",formatter:function(t){return"$".concat(Math.round(t))}},{label:"Average return on investments",name:"returnOnInvestments",formatter:function(t){return"".concat((100*t).toFixed(1),"%")}},{label:"Average expenses without mortgage",name:"averageExpenses",formatter:function(t){return"$".concat(Math.round(t))}},{label:"Return on investment after retirement",name:"retirementReturns",formatter:function(t){return"".concat((100*t).toFixed(1),"%")}},{label:"Average tax rate after retirement",name:"retirementTaxRate",formatter:function(t){return"".concat((100*t).toFixed(1),"%")}}],dc=nt("name")(lc),hc=ot((function(t,e,n){var r=function(t,e){var n=t.accounts,r=t.transactions,o=$e()((function(t){return e[t.id]}))(n);if(!o)return null;var a=Y()([Z()("date"),ea()(I()({account_id:o.id}))])(r),c=Y()([function(t){return t.date.slice(0,7)},nn.a])(a),i=$a()((function(t){return t.date.slice(0,7)===c}))(a),s=-Y()([Un()("amount"),Ve()((function(t){return t.date.slice(0,7)!==c}))])(a),u=s-Un()("amount")(i),l=Y()([Ua()("amount"),$e()(Ua()("transfer_account_id"))])(i),d=(u+l)/s-1,h=-Math.log(1-d*s/l)/Math.log(1+d),g=12*d,b=h-1,p=tn()((function(t){return Math.pow(1+d,t)*s-(Math.pow(1+d,t)-1)/d*l}))(zn()(1,h));return{rate:g,mortgagePayment:l,paymentsLeft:b,principalProjection:p}}(t,n)||{},o=r.paymentsLeft,a=r.mortgagePayment,c=r.principalProjection,i=function(t,e){var n=t.accounts,r=(t.payees,t.transactions),o=Y()([ea()((function(t){return e[t]})),tn()("id")])(n),a=Y()([ra()((function(t){return t.date.slice(0,7)})),Va()((function(t){return ga()(t.transfer_account_id)(o)})),ea()((function(t){return ga()(t.account_id)(o)}))])(r),c=0,i=[],s=Y()([Z()(aa.a),oe.a])(a);tn()((function(t){return a[t]}))(s).forEach((function(t){var e=Y()([Un()("amount"),ea()(Ua()("transfer_account_id"))])(t),n=Va()(Ua()("transfer_account_id"))(t),r=Un()("amount")(n);c&&n.length&&i.push(r/(c+.5*e)),c+=r+e}));var u=Y()([Ka()(za.a,1),tn()(Da()(1))])(i),l=i.length;return Math.pow(u,12/l)-1}(t,e),s=function(t,e){var n=t.accounts,r=t.transactions,o=Y()([ea()((function(t){return e[t]})),tn()("id")])(n),a=Y()([ea()((function(t){var e=t.transfer_account_id;return e&&!ga()(e)(o)})),ea()((function(t){var e=t.account_id;return ga()(e)(o)}))])(r),c=Y()([Z()(aa.a),X.a,tn()((function(t){return t.slice(0,7)})),tn()("date")])(a);return Un()("amount")(a)/(x()(nn()(c)).diff(x()(Ga()(c)),"months")+1)}(t,e),u=function(t,e){var n=t.accounts,r=t.transactions,o=Y()([ea()((function(t){return e[t]})),tn()("id")])(n);return Y()([Un()("amount"),ea()((function(t){var e=t.account_id;return ga()(e)(o)}))])(r)}(t,e),l=function(t,e,n){var r=t.transactions,o=t.accounts,a=t.payees,c=t.categoriesById,i=t.categoryGroupsById,s=Y()([Ua()("id"),$e()(I()({name:"Starting Balance"}))])(a),u=Y()([Z()(aa.a),X.a,tn()(sn)])(r),l=Y()([ea()((function(t){return n[t]})),tn()("id")])(o),d=Y()([ea()((function(t){return e[t]})),tn()("id")])(o);return-Y()([Un()("amount"),Va()((function(t){return t.amount>0&&!t.transfer_account_id&&(!t.category_id||!i[c[t.category_id].category_group_id])})),Va()((function(t){return ga()(t.transfer_account_id)(Bo()(l,d))})),Va()((function(t){return ga()(t.account_id)(Bo()(l,d))})),Va()((function(t){return ga()(sn(t))([Ga()(u),nn()(u)])})),Va()(I()({payee_id:s}))])(r)/(u.length-2)}(t,e,n);return{mortgagePayment:a,remainingMortgagePayments:o,mortgageProjection:c,returnOnInvestments:i,averageContribution:s,currentInvestments:u,averageExpenses:l,retirementReturns:.04,retirementTaxRate:.15,maxAverageExpenses:1e3*Math.ceil(2*l/1e3),maxAverageContribution:1e3*Math.ceil(2*s/1e3)}})),gc=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(t){var r;return Object(Ct.a)(this,n),(r=e.call(this,t)).handleChange=function(t){r.setState(Object(B.a)({},t.target.name,parseFloat(t.target.value)))},r.handleSelectAdjusting=function(t){r.setState((function(e){return{adjustingName:e.adjustingName===t?null:t}}))},r.handleClearSelection=function(){r.setState({adjustingName:null})},r.handleResetCalculation=function(t){var e=r.props,n=e.budget,o=e.investmentAccounts,a=e.mortgageAccounts;r.setState(Qe()(t)(hc(n,o,a)))},r.state=Object(_.a)(Object(_.a)({},hc(t.budget,t.investmentAccounts,t.mortgageAccounts)),{},{adjustingName:null}),r}return Object(kt.a)(n,[{key:"render",value:function(){for(var t=this,e=this.props,n=e.historyAction,r=e.location,o=e.sidebarTrigger,a=e.title,c=this.state,i=c.mortgagePayment,s=c.remainingMortgagePayments,u=c.mortgageProjection,d=c.returnOnInvestments,h=c.averageContribution,g=c.currentInvestments,b=c.averageExpenses,p=c.retirementReturns,j=c.retirementTaxRate,f=c.maxAverageExpenses,m=c.maxAverageContribution,y=c.adjustingName,x=function(t){var e=t.numMonths,n=t.returnOnInvestments,r=t.averageContribution,o=t.currentInvestments,a=Math.pow(1+n,1/12)-1,c=o,i=[];do{i.push(c),c+=r+(c+.5*r)*a}while(i.length<e);return i}({numMonths:600,returnOnInvestments:d,averageContribution:h,currentInvestments:g}),O=Math.pow(1+p,1/12)-1,M=b/(O*(1-j)),I=0;I<x.length;){if(I<s){var A=zn()(0,s-I).reduce((function(t,e){return t+i/Math.pow(1+O*(1-j),e)}),0);if((x[I]-A)*O*(1-j)>b)break}else if(x[I]*O*(1-j)>b)break;I+=1}var S=function(t){var e=t.numMonths,n=t.returnOnInvestments,r=t.averageContribution,o=t.currentInvestments,a=t.monthsBeforeRetirement,c=t.monthlyExpenses,i=t.retirementReturns,s=t.retirementTaxRate,u=t.remainingMortgagePayments,l=t.mortgagePayment,d=Math.pow(1+n,1/12)-1,h=Math.pow(1+i,1/12)-1,g=o,b=[];do{b.push(g),b.length<a?g+=r+(g+.5*r)*d:(g+=g*h*(1-s)-c,b.length<u&&(g-=l))}while(b.length<e);return b}({numMonths:600,returnOnInvestments:d,averageContribution:h,currentInvestments:g,monthsBeforeRetirement:I,monthlyExpenses:b,retirementReturns:p,retirementTaxRate:j,remainingMortgagePayments:s,mortgagePayment:i}),C=!!i,k=I/12,w=Y()([tn()(Ga.a),Ra()(12)])(S),T=Y()([tn()(Ga.a),Ra()(12)])(u),B={averageContribution:{min:0,max:m,step:50},returnOnInvestments:{min:0,max:.2,step:.001},averageExpenses:{min:0,max:f,step:50},retirementReturns:{min:0,max:.2,step:.001},retirementTaxRate:{min:0,max:.5,step:.001}};return Object(Nt.jsx)(Sn,{historyAction:n,location:r,sidebarTrigger:o,title:a,content:Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(En,{title:"Projection",children:[Object(Nt.jsx)(ar,{numbers:[{amount:-M,label:"needed for retirement",decimalsToRound:0},{amount:-k,label:"years to retirement",isMoney:!1,decimalsToRound:1}]}),Object(Nt.jsx)(Za,{investmentsProjection:w,mortgageProjection:T,amountNeededToRetire:M,yearsUntilRetirement:k})]}),Object(Nt.jsxs)(En,{title:"Assumptions",children:[lc.map((function(e){var n=e.label,r=e.name,o=e.formatter;return Object(Nt.jsx)(bc,{label:n,name:r,value:t.state[r],formatter:o,isAdjusting:y===r,onSelect:t.handleSelectAdjusting,onReset:t.handleResetCalculation,onChange:t.handleChange},r)})),C&&Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsx)(pc,{label:"Mortgage payment",value:i,formatter:function(t){return"$".concat(t.toFixed(2))}}),Object(Nt.jsx)(pc,{label:"Time remaining on mortgage",value:s,formatter:function(t){return"".concat((t/12).toFixed(1)," years")}})]})]}),Object(Nt.jsx)(uc,{name:y,label:v()([y,"label"])(dc),onReset:this.handleResetCalculation,onChange:this.handleChange,onBlur:this.handleClearSelection,formatter:v()([y,"formatter"])(dc),value:this.state[y],rangeOptions:B[y]})]})})}}]),n}(l.PureComponent),bc=function(t){var e=t.label,n=t.value,r=t.formatter,o=t.name,a=t.onSelect,c=t.isAdjusting;return Object(Nt.jsx)(pc,{label:e,value:n,formatter:r,onClick:function(){a(o)},highlightValue:c,isAdjustable:!0})},pc=function(t){var e=t.label,n=t.value,r=t.onClick,o=t.highlightValue,a=t.isAdjustable,c=t.formatter,i=void 0===c?function(t){return t}:c;return Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px 0"},children:[e,":",Object(Nt.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:r,children:[Object(Nt.jsx)("strong",{style:{backgroundColor:o?Vt:null,padding:a&&"0 4px",borderRadius:2},children:i(n)}),a&&Object(Nt.jsx)(Be,{icon:"pencil",faded:!0,style:{marginLeft:4}})]})]})},jc=gc,fc=Et.a.div(rc||(rc=Object(Ft.a)(["\n  margin: ",";\n  padding: ",";\n  background-color: #fff;\n  border: 1px solid #e5e5e5;\n  border-width: ",";\n  border-radius: 2px;\n"])),(function(t){return t.top?"0":"3px"}),(function(t){return t.noPadding?"0":t.top?"15px 23px":"15px 20px"}),(function(t){return t.top?"0 0 1px":"1px"})),mc=function(t){var e=t.accounts,n=t.value,r=t.onChange;return e.map((function(t){var e=t.id,o=t.name;return Object(Nt.jsx)(ao,{checked:!!n[e],name:e,onChange:function(t){var e=t.target,o=e.name,a=e.checked;r(a?Object(_.a)(Object(_.a)({},n),{},Object(B.a)({},o,!0)):H()(o)(n))},label:o},e)}))},yc=Et.a.div(oc||(oc=Object(Ft.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),xc=function(t){var e=t.budget,n=t.investmentAccounts,r=t.onUpdateAccounts,o=fn(!1),a=Object(Ke.a)(o,3),c=a[0],i=a[1],s=a[2],u=e.accounts.filter((function(t){return"otherAsset"===t.type&&!t.on_budget})),d=e.accounts.filter((function(t){var e=t.id;return n[e]}));return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(yc,{children:[Object(Nt.jsx)(Gt,{children:"Investment Accounts"}),Object(Nt.jsx)("span",{onClick:s,children:Object(Nt.jsx)(Be,{icon:"pencil"})})]}),d.length?d.map((function(t){var e=t.id,n=t.name;return Object(Nt.jsx)(Yt,{children:n},e)})):Object(Nt.jsx)(xr,{children:"No accounts marked as investment"}),Object(Nt.jsx)(Dt,{style:{marginTop:10},children:"Transfers to investment accounts are not counted as spending since it's assumed it's for retirement or some other savings goal."}),Object(Nt.jsx)(gr,{open:c,onClose:i,title:"Investment Accounts",children:Object(Nt.jsx)(mc,{accounts:u,value:n,onChange:function(t){r({type:"investment",value:t})}})})]})},Oc=Et.a.div(ac||(ac=Object(Ft.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),vc=function(t){var e=t.budget,n=t.mortgageAccounts,r=t.onUpdateAccounts,o=fn(!1),a=Object(Ke.a)(o,3),c=a[0],i=a[1],s=a[2],u=e.accounts.filter((function(t){return"otherLiability"===t.type&&!t.on_budget})),d=e.accounts.filter((function(t){var e=t.id;return n[e]}));return Object(Nt.jsxs)(l.Fragment,{children:[Object(Nt.jsxs)(Oc,{children:[Object(Nt.jsx)(Gt,{children:"Mortgage Accounts"}),Object(Nt.jsx)("span",{onClick:s,children:Object(Nt.jsx)(Be,{icon:"pencil"})})]}),d.length?d.map((function(t){var e=t.id,n=t.name;return Object(Nt.jsx)(Yt,{children:n},e)})):Object(Nt.jsx)(xr,{children:"No accounts marked as mortgage"}),Object(Nt.jsx)(Dt,{style:{marginTop:10},children:"Mortgage accounts are used in the retirement calculator since it's a significant expense you won't have in your retirement presumably."}),Object(Nt.jsx)(gr,{open:c,onClose:i,title:"Mortgage Account",children:Object(Nt.jsx)(mc,{accounts:u,value:n,onChange:function(t){r({type:"mortgage",value:t})}})})]})},Mc=Et.a.div(cc||(cc=Object(Ft.a)(["\n  height: 20px;\n"]))),Ic=function(t){var e=t.budget,n=t.historyAction,r=t.investmentAccounts,o=t.location,a=t.mortgageAccounts,c=t.sidebarTrigger,i=t.title,s=t.onUpdateAccounts;return Object(Nt.jsx)(Sn,{historyAction:n,location:o,sidebarTrigger:c,title:i,content:Object(Nt.jsx)(l.Fragment,{children:Object(Nt.jsxs)(fc,{children:[Object(Nt.jsx)(xc,{budget:e,investmentAccounts:r,onUpdateAccounts:s}),Object(Nt.jsx)(Mc,{}),Object(Nt.jsx)(vc,{budget:e,mortgageAccounts:a,onUpdateAccounts:s})]})})})},Ac=ot((function(t,e,n,r){var o=ln(t),a=x()().format("YYYY-MM");return t.transactions.filter(at([on(t),cn(e),function(t){return n&&sn(t)===o},function(t){return r&&sn(t)===a}]))})),Sc=ot((function(t,e,n,r){return Ac(t,e,n,r).filter((function(e){return!an(t)(e)}))})),Cc=function(t){var e=t.budget,n=t.currentMonth,r=t.historyAction,o=t.investmentAccounts,a=t.location,c=t.mortgageAccounts,i=t.sidebarTrigger,s=t.onUpdateAccounts,u=jn(e),l=u.excludeFirstMonth,d=u.excludeLastMonth,h=u.months,g=u.onSetExclusion;return e?Object(Nt.jsxs)(Bt.c,{children:[Object(Nt.jsx)(Bt.a,{path:Pe.currentMonth.path,exact:!0,render:function(){return Object(Nt.jsx)(qr,{budget:e,currentMonth:n,investmentAccounts:o,historyAction:r,location:a,sidebarTrigger:i,title:Pe.currentMonth.title})}}),Object(Nt.jsx)(Bt.a,{path:Pe.currentMonthGroup.path,exact:!0,render:function(t){var o=t.match;return Object(Nt.jsx)(jo,{budget:e,categoryGroupId:o.params.categoryGroupId,currentMonth:n,historyAction:r,location:a,sidebarTrigger:i,title:Pe.currentMonthGroup.title(o.params,e)})}}),Object(Nt.jsx)(Bt.a,{path:Pe.currentMonthCategory.path,exact:!0,render:function(t){var o=t.match;return Object(Nt.jsx)(fo,{categoryId:o.params.categoryId,budget:e,currentMonth:n,categoryGroupId:o.params.categoryGroupId,historyAction:r,location:a,sidebarTrigger:i,title:Pe.currentMonthCategory.title(o.params,e)})}}),Object(Nt.jsx)(Bt.a,{path:Pe.income.path,exact:!0,render:function(){return Object(Nt.jsx)(ho,{investmentAccounts:o,budget:e,historyAction:r,location:a,sidebarTrigger:i,title:Pe.income.title})}}),Object(Nt.jsx)(Bt.a,{path:Pe.incomeVsExpenses.path,exact:!0,render:function(){var n=Ac(t.budget,t.investmentAccounts,l,d);return Object(Nt.jsx)(Jo,{budget:e,excludeFirstMonth:l,excludeLastMonth:d,investmentAccounts:o,historyAction:r,location:a,sidebarTrigger:i,title:Pe.incomeVsExpenses.title,transactions:n,onSetExclusion:g})}}),Object(Nt.jsx)(Bt.a,{path:Pe.netWorth.path,exact:!0,render:function(){return Object(Nt.jsx)(Ba,{budget:e,historyAction:r,investmentAccounts:o,location:a,mortgageAccounts:c,sidebarTrigger:i,title:Pe.netWorth.title})}}),Object(Nt.jsx)(Bt.a,{path:Pe.investments.path,exact:!0,render:function(){return Object(Nt.jsx)(Fa,{budget:e,investmentAccounts:o,title:Pe.investments.title,historyAction:r,location:a,sidebarTrigger:i})}}),Object(Nt.jsx)(Bt.a,{path:Pe.projections.path,exact:!0,render:function(){return Object(Nt.jsx)(jc,{budget:e,investmentAccounts:o,mortgageAccounts:c,title:Pe.projections.title,historyAction:r,location:a,sidebarTrigger:i})}}),Object(Nt.jsx)(Bt.a,{path:Pe.settings.path,exact:!0,render:function(){return Object(Nt.jsx)(Ic,{budget:e,historyAction:r,investmentAccounts:o,location:a,mortgageAccounts:c,sidebarTrigger:i,title:Pe.settings.title,onUpdateAccounts:s})}}),Object(Nt.jsx)(Bt.a,{path:Pe.groups.path,render:function(){var t=Sc(e,o,l,d);return Object(Nt.jsx)(Io,{action:r,location:a,children:function(n){var o=n.selectedMonth,c=n.selectedGroupId,s=n.selectedCategoryId,u=n.selectedPayeeId,b=n.onSelectMonth,p=n.onSelectGroup,j=n.onSelectCategory,f=n.onSelectPayee;return Object(Nt.jsxs)(Bt.c,{children:[Object(Nt.jsx)(Bt.a,{path:Pe.groups.path,exact:!0,render:function(){return Object(Nt.jsx)(mo,{budget:e,excludeFirstMonth:l,excludeLastMonth:d,historyAction:r,location:a,months:h,selectedGroupId:c,selectedMonth:o,sidebarTrigger:i,title:Pe.groups.title,transactions:t,onSelectGroup:p,onSetExclusion:g,onSelectMonth:b})}}),Object(Nt.jsx)(Bt.a,{path:Pe.group.path,exact:!0,render:function(n){var c=n.match;return Object(Nt.jsx)(vo,{budget:e,categoryGroupId:c.params.categoryGroupId,excludeFirstMonth:l,excludeLastMonth:d,historyAction:r,location:a,months:h,selectedMonth:o,selectedCategoryId:s,sidebarTrigger:i,title:Pe.group.title(c.params,e),transactions:t,onSelectCategory:j,onSelectMonth:b,onSetExclusion:g})}}),Object(Nt.jsx)(Bt.a,{path:Pe.category.path,exact:!0,render:function(n){var c=n.match;return Object(Nt.jsx)(Ao,{budget:e,categoryId:c.params.categoryId,excludeFirstMonth:l,excludeLastMonth:d,historyAction:r,location:a,months:h,selectedMonth:o,selectedPayeeId:u,sidebarTrigger:i,title:Pe.category.title(c.params,e),transactions:t,onSetExclusion:g,onSelectMonth:b,onSelectPayee:f})}}),Object(Nt.jsx)(Bt.a,{path:Pe.categoryPayee.path,exact:!0,render:function(n){var c=n.match;return Object(Nt.jsx)(So,{budget:e,categoryId:c.params.categoryId,excludeFirstMonth:l,excludeLastMonth:d,historyAction:r,location:a,months:h,payeeId:c.params.payeeId,selectedMonth:o,sidebarTrigger:i,title:Pe.categoryPayee.title(c.params,e),transactions:t,onSetExclusion:g,onSelectMonth:b})}})]})}})}}),Object(Nt.jsx)(Bt.a,{render:function(){return Object(Nt.jsx)("div",{style:{padding:20},children:Object(Nt.jsxs)(b.b,{to:_e(Pe.currentMonth.path,{budgetId:e.id}),children:["Return to ",Pe.currentMonth.title]})})}})]}):null},kc=function(t,e){return["budget","currentMonth","historyAction","investmentAccounts","location","mortgageAccounts"].every((function(n){return t[n]===e[n]}))},wc=Object(l.memo)(Cc,kc),Tc=function(t){var e=t.onAuthorize;return Object(Nt.jsxs)(fc,{children:[Object(Nt.jsx)(Rt,{children:"Budget Reports"}),Object(Nt.jsx)("div",{style:{marginBottom:10},children:"Get various insights from your YNAB account."}),Object(Nt.jsx)(Xt,{onClick:e,children:"Authorize YNAB"}),Object(Nt.jsx)(Gt,{style:{marginTop:30},children:"Privacy Policy"}),Object(Nt.jsx)(Yt,{children:"This website does not store any information from you or your YNAB account on it's server. All data retrieved from the YNAB API is stored only in your browser's local storage and is never transmitted to any other location or third-party."})]})},Bc=Et.a.div(ic||(ic=Object(Ft.a)(["\n  padding: 10px 20px;\n"]))),_c=function(t){var e=t.message;return Object(Nt.jsxs)(Bc,{children:[Object(Nt.jsx)("h3",{children:e}),Object(Nt.jsx)("div",{children:Object(Nt.jsx)(b.b,{to:"/",children:"Home"})})]})},Pc=function(){return Object(Nt.jsx)(_c,{message:"Page not found"})},Fc=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={hasError:!1},t}return Object(kt.a)(n,[{key:"componentDidCatch",value:function(t){Rollbar.error(t),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(Nt.jsx)(_c,{message:this.props.message}):this.props.children}}]),n}(l.Component);Fc.defaultProps={message:"Something went wrong"};var Ec,Rc=Fc,Lc=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){return Object(Ct.a)(this,n),e.apply(this,arguments)}return Object(kt.a)(n,[{key:"componentDidMount",value:function(){this.props.budgetsLoaded||this.props.onRequestBudgets()}},{key:"render",value:function(){var t=this.props,e=t.budgets;return t.budgetsLoaded?Object(Nt.jsxs)(fc,{children:[Object(Nt.jsx)(Gt,{children:"Select a budget:"}),e.map((function(t){var e=t.id,n=t.name;return Object(Nt.jsx)("div",{children:Object(Nt.jsx)(b.b,{to:_e(Pe.currentMonth.path,{budgetId:e}),children:n})},e)}))]}):Object(Nt.jsx)(zt,{})}}]),n}(l.Component),Gc=function(t){Object(wt.a)(n,t);var e=Object(Tt.a)(n);function n(){var t;Object(Ct.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={authorized:!0,budgetsLoaded:!1,budgetIds:[],budgets:{},budgetDetails:{},currentMonth:x()().format("YYYY-MM")},t.handleRequestBudgets=function(e){Mt().then((function(n){var r=n.budgets;t.setState({budgetsLoaded:!0,budgetIds:r.map((function(t){return t.id})),budgets:Pt()("id")(r)},e)}))},t.handleRequestBudget=function(e){At(e).then((function(n){var r=n.budget,o=n.authorized;t.setState((function(t){return Object(_.a)(Object(_.a)({},t),{},{authorized:o,budgetDetails:Object(_.a)(Object(_.a)({},t.budgetDetails),{},Object(B.a)({},e,r))})}))}))},t.handleAuthorize=function(){St(),window.location.replace(Ot)},t}return Object(kt.a)(n,[{key:"render",value:function(){var t=this,e=this.props.hasToken,n=this.state,r=n.authorized,o=n.budgetsLoaded,a=n.budgetIds,c=n.budgets,i=n.budgetDetails,s=n.currentMonth;return e?Object(Nt.jsx)(Rc,{children:Object(Nt.jsxs)(Bt.c,{children:[Object(Nt.jsx)(Bt.a,{path:"/",exact:!0,render:function(){return Object(Nt.jsx)(Lc,{budgets:a.map((function(t){return c[t]})),budgetsLoaded:o,onRequestBudgets:t.handleRequestBudgets})}}),Object(Nt.jsx)(Bt.a,{path:"/budgets/:budgetId",render:function(e){var n=e.match,o=e.history,c=e.location,u=n.params.budgetId,l=i[u];return Object(Nt.jsx)(qe,{authorized:r,budgetId:u,budgetLoaded:!!l,hasMultipleBudgets:a.length>1,location:c.pathname,onAuthorize:t.handleAuthorize,onRequestBudget:t.handleRequestBudget,children:function(e){var n=e.sidebarTrigger;return Object(Nt.jsx)(Zn.Provider,{value:v()("currencyFormat")(l),children:Object(Nt.jsx)(wc,{sidebarTrigger:n,historyAction:o.action,location:c.pathname,budget:l,currentMonth:s,investmentAccounts:R("investmentAccounts",u),mortgageAccounts:R("mortgageAccounts",u),onUpdateAccounts:function(e){var n=e.type,r=e.value;"investment"===n&&L("investmentAccounts",u,r),"mortgage"===n&&L("mortgageAccounts",u,r),t.forceUpdate()}})})}})}}),Object(Nt.jsx)(Bt.a,{component:Pc})]})}):Object(Nt.jsx)(Tc,{onAuthorize:this.handleAuthorize})}}]),n}(l.Component),Yc=function(){if("/"===window.location.hash[1])return localStorage.getItem(mt);var t=window.location.hash.substring(1).replace(/&/g,'","').replace(/=/g,'":"');if(!t)return localStorage.getItem(mt);var e=v()("access_token")(JSON.parse('{"'+t+'"}',(function(t,e){return""===t?e:decodeURIComponent(e)})));return localStorage.setItem(mt,e),window.location.hash=localStorage.getItem(xt)||"",localStorage.removeItem(xt),e}();Yc&&(Ec=Yc,vt=new m.a(Ec)),g.a.render(Object(Nt.jsx)(b.a,{children:Object(Nt.jsx)(Gc,{hasToken:!!Yc})}),document.getElementById("root"))}},[[443,1,2]]]);
//# sourceMappingURL=main.d480c515.chunk.js.map