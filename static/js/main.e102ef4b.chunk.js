(this["webpackJsonpbudget-reports"]=this["webpackJsonpbudget-reports"]||[]).push([[0],{436:function(e,t,n){"use strict";n.r(t);var a,r,o,c,i,u,l,s=n(0),d=n.n(s),m=n(60),g=n.n(m),h=n(18),p=n(104),f=n(6),y=n.n(f),b=n(17),v=n.n(b),E=n(41),x=n.n(E),M={},j=function(e){if(M[e])return M[e];var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);return M[e]=n,n}return null},O=function(e,t){delete M[e];try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}},I=n(21),A=n(1),S=n(100),C=n.n(S),k={excludeFirstMonth:{localStorageKey:"budget-reports-exclude-first-month",default:!1},excludeLastMonth:{localStorageKey:"budget-reports-exclude-last-month",default:!1},investmentAccounts:{localStorageKey:"budget-reports-investment-accounts",default:{}},lastUpdated:{localStorageKey:"budget-reports-last-updated",default:null},mortgageAccounts:{localStorageKey:"budget-reports-mortgage-accounts",default:{}},netWorthHiddenAccounts:{localStorageKey:"budget-reports-networth-hidden-accounts",default:{}},spendingMonthsToCompare:{localStorageKey:"budget-reports-spending-months-to-compare",default:3},trendsShowAverage:{localStorageKey:"budget-reports-trends-show-average",default:!0}},T=function(e,t){var n=k[e];if(!n)throw new Error("not a valid settings key");return C()(j(n.localStorageKey),t,n.default)},w=function(e,t,n){var a=k[e];if(!a)throw new Error("not a valid settings key");var r=j(a.localStorageKey);O(a.localStorageKey,Object(A.a)(Object(A.a)({},r),{},Object(I.a)({},t,n)))},B=n(5),_=n.n(B),P=n(81),F=n.n(P),R=n(218),L=n.n(R),G=n(79),Y=n.n(G),D=n(51),N=n.n(D),z=n(219),W=n.n(z),U=n(19),q=n.n(U),K=n(82),H=n.n(K),V=function(e){return function(t){var n={};return t.forEach((function(t){var a=e(t);n[a]||(n[a]=[]),n[a].push(t)})),n}},J=function(e){return function(t){var n={};return t.forEach((function(t){n[t[e]]||(n[t[e]]=[]),n[t[e]].push(t)})),n}},$=function(e){return function(t){return t.reduce((function(t,n){return Object(A.a)(Object(A.a)({},t),{},Object(I.a)({},n[e],n))}),{})}},Z=function(e){return function(t){return t.reduce((function(t,n){return t+n[e]}),0)}},Q=function(e){var t=null,n=null;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return null!==t&&t.length===r.length&&r.every((function(e,n){return e===t[n]}))?n:(t=r,n=e.apply(void 0,r))}},X=function(e){return function(t){return e.every((function(e){return!e(t)}))}},ee=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t},r=!1,o=e.map((function(e){return e[t]===n[t]?(r=!0,a(e,n)):e}));return r?o:o.concat(n)},te=p.b.convertMilliUnitsToCurrencyAmount,ne=["Internal Master Category","Credit Card Payments"],ae=function(e){var t=H()(e.subtransactions.map((function(e){return e.transaction_id}))),n=e.category_groups.filter((function(e){return!ne.includes(e.name)})),a=e.categories.filter((function(e){return!e.deleted})).map((function(e){return Object(A.a)(Object(A.a)({},e),{},{activity:te(e.activity),balance:te(e.balance),budgeted:te(e.budgeted)})})),r=$("id")(a),o=y()().subtract(239,"months").format("YYYY-MM-01"),c={symbol:e.currency_format.currency_symbol};return Object(A.a)(Object(A.a)({},N()(["category_groups","currency_format"])(e)),{},{accountsById:$("id")(e.accounts),categoryGroups:n,categoryGroupsById:$("id")(n),categories:a,categoriesById:r,currencyFormat:c,payeesById:$("id")(e.payees),months:q()("month")(e.months),transactions:_()([function(e){return e.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{amount:te(e.amount)})}))},function(e){return e.filter((function(e){return!e.category_id||!!r[e.category_id]}))},F()((function(n){return t.includes(n.id)?_()([function(e){return e.map((function(e){return N()("transaction_id")(Object(A.a)(Object(A.a)(Object(A.a)({},n),e),{},{payee_id:e.payee_id||n.payee_id}))}))},function(e){return e.filter(Y()("transaction_id",n.id))}])(e.subtransactions):n})),W.a,L()((function(e){return e.date<o})),q()("date"),function(e){return e.filter((function(e){return 0!==e.amount&&!e.deleted}))}])(e.transactions)})},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3?arguments[3]:void 0;return t.reduce((function(e,t){return ee(e,n,t,a)}),e)},oe=["accounts","categories","category_groups","payee_locations","payees","scheduled_subtransactions","scheduled_transactions","subtransactions","transactions"],ce="ynab_budget_details",ie=null,ue=function(){return ie||(ie=j(ce))},le=function(e){var t=e.id,n=e.budget,a=e.server_knowledge,r=ue(),o=Object(A.a)(Object(A.a)({},r),{},Object(I.a)({},t,{budget:n,server_knowledge:a}));O(ce,o),ie=o},se="ynab_access_token",de="ynab_budgets",me="budget-reports-last-location",ge="https://api.youneedabudget.com/oauth/authorize?client_id=a956b3eb0134b7ba4a854eae1ef58fdaefa3b44109af6643d86e5e1479e5c608&redirect_uri=https://tomcheng.github.io/budget-reports/&response_type=token&scope=read-only",he=null,pe=function(){return he.budgets.getBudgets().then((function(e){var t=e.data;return O(de,t),t})).catch((function(e){if(x()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return localStorage.removeItem(se),j(de)||{budgets:[]};throw e}))},fe=function(e){return he.budgets.getBudgetById(e).then((function(t){var n=t.data,a=n.budget,r=n.server_knowledge;return le({id:e,budget:a,server_knowledge:r}),w("lastUpdated",e,y()().valueOf()),{budget:ae(a),authorized:!0}})).catch((function(e){if(x()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return localStorage.removeItem(se),{budget:{categories:[],transactions:[],payees:[]},authorized:!1};throw e}))},ye=function(e){var t=function(e){return v()(e)(ue())}(e);return t?y()().valueOf()-T("lastUpdated",e)<8e3?fe(e):he.budgets.getBudgetById(e,t.server_knowledge).then((function(n){var a=n.data;try{var r=function(e,t){return Object(A.a)(Object(A.a)(Object(A.a)(Object(A.a)({},e),t),oe.reduce((function(n,a){return Object(A.a)(Object(A.a)({},n),{},Object(I.a)({},a,re(e[a],t[a])))}),{})),{},{months:re(e.months,t.months,"month",(function(e,t){return Object(A.a)(Object(A.a)(Object(A.a)({},e),t),{},{categories:re(e.categories,t.categories)})}))})}(t.budget,a.budget);return le({id:e,budget:r,server_knowledge:a.server_knowledge}),w("lastUpdated",e,y()().valueOf()),{budget:ae(r),authorized:!0}}catch(o){return fe(e)}})).catch((function(e){if(x()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return{budget:ae(t.budget),authorized:!1};throw e})):fe(e)},be=function(){localStorage.setItem(me,window.location.hash)},ve=n(12),Ee=n(13),xe=n(15),Me=n(14),je=n(10),Oe=n(61),Ie=n.n(Oe),Ae=n(3),Se=n(4),Ce=Se.a.div(a||(a=Object(Ae.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]))),ke=Se.a.div(r||(r=Object(Ae.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]))),Te=Se.a.div(o||(o=Object(Ae.a)(["\n  font-size: 14px;\n  line-height: 22px;\n  font-weight: 500;\n  color: #222;\n"]))),we=Se.a.div(c||(c=Object(Ae.a)(["\n  font-size: 13px;\n  line-height: 21px;\n  font-weight: 400;\n  color: #666;\n"]))),Be=Se.a.div(i||(i=Object(Ae.a)(["\n  font-size: 11px;\n  line-height: 16px;\n  font-weight: 400;\n  color: #999;\n"]))),_e=function(){return d.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},d.a.createElement(Te,null,"Loading\u2026"),d.a.createElement(we,null,"beep, beep, boop"))},Pe=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.budgetId,n=e.budgetLoaded,a=e.onRequestBudget;n||a(t)}},{key:"render",value:function(){return this.props.budgetLoaded?this.props.children:d.a.createElement(_e,null)}}]),n}(s.Component),Fe=n(53),Re=n.n(Fe),Le="#4399ff",Ge="red",Ye=Re()(Le).lighten(32).desaturate().toHexString(),De=Re()(Le).lighten(5).desaturate().toHexString(),Ne=Re()(Le).lighten(25).desaturate().toHexString(),ze=Re()(Ge).lighten(30).desaturate(60).toHexString(),We=Object(Se.a)(we)(u||(u=Object(Ae.a)(["\n  display: inline-block;\n  user-select: none;\n  border: 1px solid #ccc;\n  padding: 4px 12px;\n  border-radius: 2px;\n\n  & + & {\n    margin-left: 5px;\n  }\n"]))),Ue=Object(Se.a)(We)(l||(l=Object(Ae.a)(["\n  background-color: ",";\n  border-color: ",";\n  color: #fff;\n"])),Le,Le),qe=We,Ke=n(223),He=n(63),Ve=n(50),Je=n.n(Ve),$e=n(54),Ze=n(136),Qe=n(137),Xe=n(138),et=n(139),tt=n(140),nt=n(141),at=n(142),rt=n(143),ot=n(144),ct=n(145),it=n(225);$e.b.add(Ze.faArrowLeft,Qe.faBars,Xe.faCaretDown,et.faChevronRight,tt.faCog,nt.faEllipsisV,at.faEye,rt.faEyeSlash,ot.faPencilAlt,ct.faTimes);var ut,lt,st,dt,mt,gt,ht,pt,ft,yt,bt={"arrow-left":Ze.faArrowLeft,bars:Qe.faBars,"caret-down":Xe.faCaretDown,"chevron-right":et.faChevronRight,cog:tt.faCog,pencil:ot.faPencilAlt,"ellipsis-v":nt.faEllipsisV,eye:at.faEye,"eye-slash":rt.faEyeSlash,times:ct.faTimes},vt={faded:{fontWeight:400,color:"#aaa",fontSize:10}},Et=function(e){var t=e.icon,n=e.style,a=e.faded,r=Object(He.a)(e,["icon","style","faded"]);return d.a.createElement(it.a,Object.assign({},r,{icon:bt[t],style:Object(A.a)(Object(A.a)({},n),a&&vt.faded)}))},xt=function(e,t){return e.replace(/:([a-zA-Z]*)/g,(function(e,n){return t[n]}))},Mt={currentMonth:{path:"/budgets/:budgetId/current",title:"Current Month Spending",props:["budget","currentMonth","investmentAccounts"]},currentMonthGroup:{path:"/budgets/:budgetId/current/:categoryGroupId",title:function(e,t){return t.categoryGroupsById[e.categoryGroupId].name},props:["budget","currentMonth"],paramProps:["categoryGroupId"],breadcrumbs:["currentMonth"]},currentMonthCategory:{path:"/budgets/:budgetId/current/:categoryGroupId/:categoryId",title:function(e,t){return t.categoriesById[e.categoryId].name},props:["budget","currentMonth"],paramProps:["categoryId","categoryGroupId"],breadcrumbs:["currentMonth","currentMonthGroup"]},groups:{path:"/budgets/:budgetId/groups",title:"Spending Trends",props:["budget"]},group:{path:"/budgets/:budgetId/groups/:categoryGroupId",title:function(e,t){return t.categoryGroupsById[e.categoryGroupId].name},props:["budget"],paramProps:["categoryGroupId"],breadcrumbs:["groups"]},category:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId",title:function(e,t){return t.categoriesById[e.categoryId].name},props:["budget"],paramProps:["categoryId"],breadcrumbs:["groups","group"]},categoryPayee:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId/payees/:payeeId",title:function(e,t){return v()(["payeesById",e.payeeId,"name"],t)||"Payee Not Found"},props:["budget"],paramProps:["categoryId","payeeId"],breadcrumbs:["groups","group","category"]},income:{path:"/budgets/:budgetId/income",title:"Income Trends",props:["budget"]},incomeVsExpenses:{path:"/budgets/:budgetId/income-vs-expenses",title:"Income vs Expenses",props:["budget","investmentAccounts"]},netWorth:{path:"/budgets/:budgetId/net-worth",title:"Net Worth",props:["budget","investmentAccounts","mortgageAccounts"]},investments:{path:"/budgets/:budgetId/investments",title:"Investments",props:["budget","investmentAccounts"]},projections:{path:"/budgets/:budgetId/projections",title:"Retirement Calculator",props:["budget","investmentAccounts","mortgageAccounts"]},settings:{path:"/budgets/:budgetId/settings",title:"Budget Settings",props:["budget","investmentAccounts","mortgageAccounts","onUpdateAccounts"]}},jt=Se.a.div(ut||(ut=Object(Ae.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  height: 60px;\n"]))),Ot=Se.a.div(lt||(lt=Object(Ae.a)(["\n  width: ","px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),60),It=Object(Se.a)(h.c)(st||(st=Object(Ae.a)(["\n  color: inherit;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding: 0 20px;\n  background-color: ",";\n"])),(function(e){return e.active&&Ye})),At=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.budgetId,n=e.hasMultipleBudgets,a=e.location,r=e.onCloseSidebar;return d.a.createElement(s.Fragment,null,d.a.createElement(St,{onCloseSidebar:r,budgetId:t}),["currentMonth","groups","income","incomeVsExpenses","netWorth","investments","projections"].map((function(e){var n=Mt[e],o=n.path,c=n.title;return d.a.createElement(Ct,{key:o,to:xt(o,{budgetId:t}),active:Object(je.e)(a,{path:o}),onClick:r},c)})),n&&d.a.createElement(Ct,{to:"/"},"Switch Budgets"))}}]),n}(s.PureComponent),St=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onCloseSidebar,n=e.budgetId;return d.a.createElement(jt,null,d.a.createElement(Ot,{onClick:t},d.a.createElement(Et,{icon:"times"})),d.a.createElement(h.b,{to:xt(Mt.settings.path,{budgetId:n}),style:{display:"flex",color:"inherit"},onClick:t},d.a.createElement(Ot,null,d.a.createElement(Et,{icon:"cog"}))))}}]),n}(s.PureComponent),Ct=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){return d.a.createElement(It,this.props)}}]),n}(s.PureComponent),kt=At,Tt=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleSetOpen=function(t){e.setState({open:t})},e.handleTriggerClick=function(){e.setState({open:!0})},e.handleCloseSidebar=function(){e.setState({open:!1})},e}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.budgetId,n=e.children,a=e.hasMultipleBudgets,r=e.location,o=this.state.open;return d.a.createElement(Ke.a,{sidebar:d.a.createElement(kt,{budgetId:t,hasMultipleBudgets:a,location:r,onCloseSidebar:this.handleCloseSidebar}),open:o,onSetOpen:this.handleSetOpen,styles:{sidebar:{backgroundColor:"#fff",width:280,pointerEvents:!o&&"none"}}},n({sidebarTrigger:d.a.createElement(wt,{onClick:this.handleTriggerClick})}))}}]),n}(s.Component),wt=function(e){var t=e.onClick;return d.a.createElement("div",{onClick:t,style:{alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"center",width:60}},d.a.createElement(Et,{icon:"bars"}))},Bt=Tt,_t=Se.a.div(dt||(dt=Object(Ae.a)(["\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),Pt=function(e){var t=e.authorized,n=e.budgetId,a=e.budgetLoaded,r=e.children,o=e.hasMultipleBudgets,c=e.location,i=e.onAuthorize,u=e.onRequestBudget;return d.a.createElement(Pe,{budgetId:n,budgetLoaded:a,onRequestBudget:u},d.a.createElement(Bt,{budgetId:n,location:c,hasMultipleBudgets:o},(function(e){var n=e.sidebarTrigger;return d.a.createElement(_t,null,r({sidebarTrigger:n}),!t&&d.a.createElement("div",{style:{padding:"15px 20px",backgroundColor:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,borderTop:"1px solid #ccc"}},"Your authorization expired.",d.a.createElement(Ue,{onClick:i},"Reauthorize")))})))},Ft=n(9),Rt=n(62),Lt=n.n(Rt),Gt=n(52),Yt=n.n(Gt),Dt=n(16),Nt=n.n(Dt),zt=n(39),Wt=n.n(zt),Ut=Nt.a.convert({cap:!1}),qt=Q((function(e){var t=v()("id")(e.payees.find((function(e){return"Starting Balance"===e.name}))),n=v()("id")(e.payees.find((function(e){return"Reconciliation Balance Adjustment"===e.name})));return function(e){return e.payee_id===t||e.payee_id===n}})),Kt=Q((function(e){var t=v()("id")(e.categories.find((function(e){return"Inflow: To be Budgeted"===e.name})));return function(e){return e.category_id===t}})),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return!t.category_id||!!e[t.transfer_account_id]}},Vt=function(e){return e.date.slice(0,7)},Jt=Q((function(e){return e.filter((function(e){return!!e.category_id}))})),$t=function(e){var t=Jt(e.transactions);return t.length?Vt(Wt()(t)):void 0},Zt=function(e){var t=e.payeesById,n=e.transactions,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _()([Ut((function(e,n){return Object(A.a)(Object(A.a)({},t[n]?Yt()(["id","name"])(t[n]):{id:"no-payee",name:"(no payee)"}),{},{amount:Z("amount")(e)/a})})),J("payee_id")])(n)},Qt=function(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").trim()},Xt=function(){var e=Object(s.useState)(null),t=Object(Ft.a)(e,2),n=t[0],a=t[1],r=Object(s.useRef)(n);r.current=n;return[n,function(e){a(e===r.current?null:e)}]},en=function(){var e=Object(s.useState)(null),t=Object(Ft.a)(e,2),n=t[0],a=t[1];return[n,function(e){a(e===n?null:e)}]},tn=function(e){var t=Object(s.useState)(T("trendsShowAverage",e)),n=Object(Ft.a)(t,2),a=n[0],r=n[1];return[a,function(){r(!a),w("trendsShowAverage",e,!a)}]},nn=function(e){var t=Object(s.useState)(T("excludeFirstMonth",e.id)),n=Object(Ft.a)(t,2),a=n[0],r=n[1],o=Object(s.useState)(T("excludeLastMonth",e.id)),c=Object(Ft.a)(o,2),i=c[0],u=c[1],l=$t(e);return{excludeFirstMonth:a,excludeLastMonth:i,months:function(e,t){for(var n=[e],a=e;a!==t;)a=y()(a).add(1,"months").format("YYYY-MM"),n.push(a);return n}(a?y()(l).add(1,"months").format("YYYY-MM"):l,i?y()().subtract(1,"months").format("YYYY-MM"):y()().format("YYYY-MM")),onSetExclusion:function(t){var n=t.month,a=t.exclude;"first"===n?(r(a),w("excludeFirstMonth",e.id,a)):(u(a),w("excludeLastMonth",e.id,a))}}},an=function(e){var t=Object(s.useState)(e),n=Object(Ft.a)(t,2),a=n[0],r=n[1];return[a,function(){r(!1)},function(){r(!0)},function(){r(!a)}]},rn=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).toBeScrolled=null,e.raf=null,e.scrollPositions={},e}return Object(Ee.a)(n,[{key:"getSnapshotBeforeUpdate",value:function(){return{scrollTop:this.toBeScrolled.scrollTop}}},{key:"componentDidUpdate",value:function(e,t,n){var a=this,r=this.props,o=r.action,c=r.location;c!==e.location&&("POP"===o&&(this.scrollPositions[e.location]=n.scrollTop,this.raf=requestAnimationFrame((function(){a.toBeScrolled.scrollTop=a.scrollPositions[c]||0}))),"PUSH"===o&&(this.scrollPositions[e.location]=n.scrollTop,this.raf=requestAnimationFrame((function(){a.toBeScrolled.scrollTop=0}))),"REPLACE"===o&&(this.raf=requestAnimationFrame((function(){a.toBeScrolled.scrollTop=0}))))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){var e=this;return this.props.children({ref:function(t){e.toBeScrolled=t}})}}]),n}(s.Component),on=n(85),cn=n.n(on),un=cn()(Mt).filter((function(e){return!!e.breadcrumbs})).map((function(e){return{path:e.path,breadcrumbs:e.breadcrumbs.map((function(e){return{title:Mt[e].title,path:Mt[e].path}}))}})),ln=function(e){var t=e.budget;return t?d.a.createElement(je.c,null,un.map((function(e){var n=e.path,a=e.breadcrumbs;return d.a.createElement(je.a,{key:n,path:n,exact:!0,render:function(e){return d.a.createElement(Be,{style:{lineHeight:1,whiteSpace:"normal"}},a.map((function(n,r){var o=n.title,c=n.path;return d.a.createElement(s.Fragment,{key:c},d.a.createElement(h.b,{to:xt(c,e.match.params),style:{paddingBottom:8,display:"inline-block"}},"function"===typeof o?o(e.match.params,t):o),r!==a.length-1&&d.a.createElement(Et,{icon:"chevron-right",style:{padding:"0 5px",fontSize:8}}))})))}})}))):null},sn=function(){return d.a.createElement(je.c,null,d.a.createElement(je.a,{path:Mt.currentMonth.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.groups.path,t.params)},"Past Months"))}}),d.a.createElement(je.a,{path:Mt.currentMonthGroup.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.group.path,t.params)},"Past Months"))}}),d.a.createElement(je.a,{path:Mt.currentMonthCategory.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.category.path,t.params)},"Past Months"))}}),d.a.createElement(je.a,{path:Mt.groups.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.currentMonth.path,t.params)},"Current Month"))}}),d.a.createElement(je.a,{path:Mt.group.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.currentMonthGroup.path,t.params)},"Current Month"))}}),d.a.createElement(je.a,{path:Mt.category.path,exact:!0,render:function(e){var t=e.match;return d.a.createElement(we,null,d.a.createElement(h.b,{to:xt(Mt.currentMonthCategory.path,t.params)},"Current Month"))}}))},dn=Se.a.div(mt||(mt=Object(Ae.a)(["\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding-left: 0;\n  padding-right: 20px;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n  white-space: pre;\n  user-select: none;\n"]))),mn=Se.a.div(gt||(gt=Object(Ae.a)(["\n  flex-grow: 1;\n  overflow-y: auto;\n"]))),gn=function(e){var t=e.sidebarTrigger,n=e.historyAction,a=e.location,r=e.budget,o=e.title,c=(e.breadcrumbs,e.fixedContent),i=e.content;return d.a.createElement(s.Fragment,null,d.a.createElement(dn,null,t,d.a.createElement("div",{style:{flexGrow:1}},d.a.createElement(ln,{budget:r}),d.a.createElement(Ce,{style:{lineHeight:1}},o)),d.a.createElement(sn,null)),c,d.a.createElement(rn,{action:n,location:a},(function(e){var t=e.ref;return d.a.createElement(mn,{ref:t},i)})))},hn=n(31),pn=Se.a.div(ht||(ht=Object(Ae.a)(["\n  margin: ",";\n  background-color: #fff;\n  background-clip: padding-box;\n  border: "," solid rgba(0, 0, 0, 0.05);\n  border-bottom-width: 1px;\n  border-radius: 2px;\n"])),(function(e){return e.fullWidth?"0":"2px"}),(function(e){return e.fullWidth?"0":"1px"})),fn=Object(Se.a)(Te)(pt||(pt=Object(Ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 15px 20px;\n  user-select: none;\n"]))),yn=Se.a.div(ft||(ft=Object(Ae.a)(["\n  padding: 0 10px;\n  margin-right: -10px;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  margin-left: 5px;\n"]))),bn=Se.a.div(yt||(yt=Object(Ae.a)(["\n  padding: 0 "," 15px;\n"])),(function(e){return e.fullWidth?"22px":"20px"})),vn=function(e){var t=e.actions,n=e.children,a=e.fullWidth,r=e.hasSettings,o=e.noPadding,c=e.title,i=e.onClickSettings,u=Object(s.useState)(!0),l=Object(Ft.a)(u,2),m=l[0],g=l[1];return d.a.createElement(pn,{fullWidth:a},d.a.createElement(fn,null,d.a.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){g(!m)}},c,d.a.createElement(Et,{icon:"chevron-right",transform:{rotate:m?90:0},style:{marginLeft:10},faded:!0})),d.a.createElement("div",{style:{display:"flex",alignItems:"center"}},m&&t,r&&m&&d.a.createElement(yn,{onClick:i},d.a.createElement(Et,{icon:"cog",faded:!0})))),d.a.createElement(hn.a,{isExpanded:m},d.a.createElement(bn,{style:{padding:o&&0}},n)))},En=n(238),xn=n(102),Mn=n.n(xn),jn=n(226),On=n.n(jn),In=n(34),An=n.n(In),Sn=n(22),Cn=n.n(Sn),kn=n(135),Tn=n.n(kn),wn=n(227),Bn=n.n(wn),_n={chart:{height:240,spacing:[0,0,0,0]},credits:{enabled:!1},legend:{enabled:!1},title:{text:""},subtitle:{text:""},tooltip:{enabled:!1},xAxis:{tickLength:0}},Pn=function(e){var t=e.options;return d.a.createElement(Bn.a,{highcharts:Tn.a,options:Object(A.a)(Object(A.a)(Object(A.a)({},_n),t),{},{chart:Object(A.a)(Object(A.a)({},_n.chart),t.chart),xAxis:Object(A.a)(Object(A.a)({},_n.xAxis),t.xAxis)})})},Fn=d.a.createContext(),Rn=function(e){var t=e.amount,n=e.amountAfterDecimal,a=e.expectNegative,r=e.expectPositive,o=e.showCurrencySymbol,c=e.style;return d.a.createElement(Fn.Consumer,null,(function(e){return d.a.createElement("span",{style:Object(A.a)(Object(A.a)({},c),{},{color:0===t?null:t>0?r?null:"#2cbc2f":a?null:Ge})},0===t?null:t>0?r?null:"+":a?null:"-",o&&(v()("symbol")(e)||"$"),function(e){for(var t=(e+="").split("."),n=t[0],a=t.length>1?"."+t[1]:"",r=/(\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1,$2");return n+a}(Math.abs(t).toFixed(n)))}))};Rn.defaultProps={amountAfterDecimal:2};var Ln,Gn,Yn,Dn,Nn=Rn,zn=function(e){var t=e.numbers,n=e.alwaysRound,a=e.expectPositive,r=t.some((function(e){var t=e.amount;return Math.abs(t)<100}));return d.a.createElement("div",{style:{textAlign:"right",lineHeight:"16px",display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse",marginBottom:8}},t.map((function(e){var t=e.amount,o=e.label,c=e.isMoney,i=void 0===c||c,u=e.decimalsToRound;return d.a.createElement("div",{key:o,style:{marginLeft:20}},d.a.createElement(ke,{style:{lineHeight:"16px"}},d.a.createElement(Nn,{amount:t,amountAfterDecimal:Mn()(u)?u:r&&!n?2:0,showCurrencySymbol:i,expectNegative:!a,expectPositive:a})),d.a.createElement(Be,null,o))})))},Wn=Se.a.div(Ln||(Ln=Object(Ae.a)(["\n  border-top: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n"]))),Un=function(e){var t=e.month,n=e.transactionsByDate,a=y()().format("YYYY-MM-DD"),r=0;return An()(-1,y()(t).daysInMonth()).map((function(e){var o=-1===e?y()(t).add(-1,"days"):"".concat(t,"-").concat(On()("0")(2)(e+1));return o>a?null:r+=-Cn()("amount")(n[o]||[])}))},qn=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.transactions,a=e.highlightFunction,r=e.currentMonth,o=e.monthsToCompare,c=a?n.filter(a):[],i={type:"areaspline",data:Un({month:r,transactionsByDate:J("date")(c)}),enableMouseTracking:!1,marker:{enabled:!1},animation:!1,color:Le,lineWidth:0,fillOpacity:.8},u=y()(r).daysInMonth(),l=y()(r).add(-1,"days"),m=y()(r).add(u-1,"days"),g=J("date")(n),h=Un({month:r,transactionsByDate:g}),p=An()(0,u+1).map((function(e){return e/u*t})),f=parseInt(l.format("d"),10),b=An()(0,6).map((function(e){return{color:"#f2f2f2",from:7*e-1.5-f,to:7*e+.5-f}})),v=An()(o,0).map((function(e){return{type:"spline",data:Un({month:y()(r).subtract(e,"months").format("YYYY-MM"),transactionsByDate:g}),enableMouseTracking:!1,color:"#"+Re.a.mix(Le,"#f2f2f2",30+70*(e-1)/o).toHex(),lineWidth:1,marker:{enabled:!1},animation:!1}})),E=_()([Z("amount"),Lt()((function(e){return Vt(e)===r}))])(n),x=[{amount:E,label:"spent"}];return Mn()(t)&&x.push({amount:-(t+E),label:"available"}),d.a.createElement(s.Fragment,null,d.a.createElement(zn,{numbers:x}),d.a.createElement(Pn,{key:o,options:{chart:{spacing:[0,0,0,0],height:140,animation:!1},xAxis:{labels:{enabled:!1},plotBands:b},yAxis:{visible:!1,endOnTick:!1,startOnTick:!1},series:[{type:"line",color:"#aaa",dashStyle:"Dot",lineWidth:1,data:p,enableMouseTracking:!1,marker:{enabled:!1},animation:!1}].concat(Object(En.a)(v),[Object(A.a)({type:"spline",data:h,enableMouseTracking:!1,color:Le,marker:{enabled:!1},animation:!1},a&&{type:"areaspline",fillOpacity:.2}),i])}}),d.a.createElement(Wn,null,d.a.createElement(Be,null,l.format("MMM D")),d.a.createElement(Be,null,m.format("MMM D"))))}}]),n}(s.PureComponent),Kn=Se.a.div(Gn||(Gn=Object(Ae.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]))),Hn=Se.a.div(Yn||(Yn=Object(Ae.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  opacity: 0;\n  transition: opacity 0.2s ease-in-out;\n"]))),Vn=Se.a.div(Dn||(Dn=Object(Ae.a)(["\n  position: relative;\n  min-width: 200px;\n  padding: 15px 20px;\n  margin-left: 20px;\n  margin-right: 20px;\n  background-color: #fff;\n  border-radius: 2px;\n  transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;\n"]))),Jn=function(e){return requestAnimationFrame((function(){requestAnimationFrame(e)}))},$n=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;return Object(ve.a)(this,n),(e=t.call(this)).handleTransitionEnd=function(){var t=e.state.animationState;"entering"===t?e.setState({animationState:"entered"}):"leaving"===t&&e.setState({animationState:"left"})},e.el=document.createElement("div"),e.state={animationState:"left"},e}return Object(Ee.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentDidUpdate",value:function(e){var t=this;!e.open&&this.props.open&&Jn((function(){t.setState({animationState:"entering"})})),e.open&&!this.props.open&&Jn((function(){t.setState({animationState:"leaving"})}))}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.children,a=e.title,r=e.onClose,o=e.width,c=this.state.animationState;if(!t&&"left"===c)return null;var i=["entering","entered"].includes(c);return Object(m.createPortal)(d.a.createElement(Kn,null,d.a.createElement(Hn,{onClick:r,style:{opacity:i?1:0},onTransitionEnd:this.handleTransitionEnd}),d.a.createElement(Vn,{style:{opacity:i?1:0,transform:"translate3d(0, ".concat(i?"0":"20px",", 0)"),width:o}},a&&d.a.createElement(Te,{style:{marginBottom:10}},a),n,d.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20}},d.a.createElement(Ue,{onClick:r},"Done")))),this.el)}}]),n}(s.Component),Zn=function(e){var t=e.open,n=e.monthsToCompare,a=e.onClose,r=e.onDecrementMonths,o=e.onIncrementMonths;return d.a.createElement($n,{open:t,title:"Chart Settings",onClose:a},d.a.createElement("div",{style:{display:"flex",alignItems:"center"}},d.a.createElement("div",{style:{marginRight:10}},d.a.createElement(qe,{onClick:r},"-"),d.a.createElement(qe,{onClick:o},"+")),d.a.createElement(we,null,"Compare with the last ",n," month",1===n?"":"s")))},Qn=function(e){var t=e.actions,n=e.budgetId,a=e.currentMonth,r=e.highlightFunction,o=e.title,c=e.total,i=e.transactions,u=an(!1),l=Object(Ft.a)(u,3),m=l[0],g=l[1],h=l[2],p=function(e){var t=Object(s.useState)(T("spendingMonthsToCompare",e)),n=Object(Ft.a)(t,2),a=n[0],r=n[1];return{monthsToCompare:a,onDecrementMonths:function(){var t=Math.max(a-1,0);r(t),w("spendingMonthsToCompare",e,t)},onIncrementMonths:function(){var t=Math.min(a+1,12);r(t),w("spendingMonthsToCompare",e,t)}}}(n),f=p.monthsToCompare,y=p.onIncrementMonths,b=p.onDecrementMonths;return d.a.createElement(s.Fragment,null,d.a.createElement(vn,{actions:t,title:o,hasSettings:!0,onClickSettings:h},d.a.createElement(qn,{budgetId:n,currentMonth:a,highlightFunction:r,monthsToCompare:f,total:c,transactions:i})),d.a.createElement(Zn,{open:m,monthsToCompare:f,onClose:g,onDecrementMonths:b,onIncrementMonths:y}))};Qn.defaultProps={title:"Day by Day"};var Xn,ea,ta=Qn,na=Se.a.div(Xn||(Xn=Object(Ae.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n  user-select: none;\n\n  &:first-child {\n    padding-top: ",";\n  }\n"])),(function(e){return!e.isContinuing&&0})),aa=Object(Se.a)(we)(ea||(ea=Object(Ae.a)(["\n  text-align: center;\n  margin: 10px;\n  opacity: 0.5;\n"]))),ra=function(){return d.a.createElement(aa,null,"No transactions this month")},oa=function(e){var t=e.label,n=e.minorText,a=e.inLink,r=e.to,o=e.bold;return d.a.createElement(we,{style:{fontWeight:o&&700,display:"flex",alignItems:"baseline",whiteSpace:"pre",overflow:"hidden",color:a&&"inherit"}},r?d.a.createElement(h.b,{to:r},t):t,n&&d.a.createElement(Be,{style:{fontWeight:o&&700,overflow:"hidden",textOverflow:"ellipsis"}},"\xa0\u2013 ",n))},ca=function(e){var t=e.label,n=e.count,a=e.inLink,r=e.selected,o=e.showCount,c=e.to;return d.a.createElement(oa,{bold:r,label:t,minorText:o&&"".concat(n," transaction").concat(1===n?"":"s"),inLink:a,to:c})};ca.defaultProps={showCount:!0};var ia=ca,ua=function(e){var t=e.amount,n=e.expectNegative,a=e.expectPositive,r=e.total,o=e.faded,c=e.selected;return d.a.createElement(we,{style:{display:"flex",alignItems:"baseline",opacity:o?.3:1,fontWeight:c&&700}},d.a.createElement(Nn,{amount:t,expectNegative:n,expectPositive:a}),d.a.createElement(Be,{style:{width:44,textAlign:"right",fontWeight:c&&700}},r?"".concat((t/r*100).toFixed(1),"%"):"\u2013"))},la=function(e){var t=e.count,n=e.pluralizedName,a=e.showAll,r=e.onToggle;return d.a.createElement(Be,{style:{textAlign:"center",marginTop:5},onClick:r},a?"see less":"see all ".concat(t," ").concat(n))},sa=Nt.a.convert({cap:!1}),da={category_group_id:"category groups",category_id:"categories",payee_id:"payees"},ma=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showAll:!1,allMounted:!1},e.handleToggleShowAll=function(){var t=e.state,n=t.allMounted,a=t.showAll;n?e.setState({showAll:!a}):(e.setState({allMounted:!0}),requestAnimationFrame((function(){e.setState({showAll:!0})})))},e}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.emptyName,n=e.entityKey,a=e.entityFunction,r=e.entitiesById,o=e.expectNegative,c=e.expectPositive,i=e.linkFunction,u=e.limitShowing,l=e.numMonths,m=e.reverse,g=e.selectedEntityId,h=e.showAverage,p=e.showAverageToggle,f=e.showTransactionCount,y=e.title,b=e.transactions,E=e.onClickEntity,x=e.onToggleAverage,M=this.state,j=M.allMounted,O=M.showAll,I=0,A=_()([q()((function(e){return m?-e.amount:e.amount})),sa((function(e,t){var n=Z("amount")(e);return I+=n,{entityId:t,transactions:e.length,amount:n}})),a?V(a):J(n)])(b),S=u&&A.length>6,C=A.slice(0,5),k=A.slice(5);return d.a.createElement(vn,{title:y,actions:p&&d.a.createElement(we,{onClick:x},h?"average":"total")},0===A.length&&d.a.createElement(ra,null),(S?C:A).map((function(e){var n=e.entityId,a=e.transactions,u=e.amount;return d.a.createElement(ba,{key:n,showTransactionCount:f,to:i&&r[n]?i(n):null,transactions:a,name:v()("name")(r[n])||t,amount:h?u/l:u,expectNegative:o,expectPositive:c,selected:n===g,total:h?I/l:I,id:n,onClick:E})})),j&&d.a.createElement(hn.a,{isExpanded:O},d.a.createElement(s.Fragment,null,k.map((function(e){var n=e.entityId,a=e.transactions,u=e.amount;return d.a.createElement(ba,{key:n,showTransactionCount:f,to:i&&r[n]?i(n):null,transactions:a,name:v()("name")(r[n])||t,amount:h?u/l:u,expectNegative:o,expectPositive:c,selected:n===g,total:I,id:n,onClick:E,isContinuing:!0})})))),!!k.length&&S&&d.a.createElement(la,{count:A.length,pluralizedName:da[n],showAll:O,onToggle:this.handleToggleShowAll}))}}]),n}(s.Component);ma.defaultProps={emptyName:"(none)"};var ga,ha,pa,fa,ya=function(e){var t=e.to,n=e.children,a=Object(He.a)(e,["to","children"]);return t?d.a.createElement(h.b,Object.assign({},a,{to:t}),n):d.a.createElement("span",a,n)},ba=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.showTransactionCount,n=e.to,a=e.transactions,r=e.name,o=e.amount,c=e.expectNegative,i=e.expectPositive,u=e.total,l=e.selected,s=e.id,m=e.onClick,g=e.isContinuing;return d.a.createElement(na,{isContinuing:g,onClick:m&&function(){return m(s)}},t?d.a.createElement(ia,{count:a,label:r,selected:l,to:n}):d.a.createElement(ya,{to:n,onClick:n&&function(e){e.stopPropagation()}},d.a.createElement(we,{style:{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis",color:"inherit",fontWeight:l&&700}},r)),d.a.createElement(ua,{amount:o,expectNegative:c,expectPositive:i,selected:l,total:u}))}}]),n}(s.PureComponent),va=ma,Ea=Object(Se.a)(na)(ga||(ga=Object(Ae.a)(["\n  border-top: 0;\n  padding-bottom: 0;\n"]))),xa=function(e){var t=e.category,n=e.payee,a=e.memo,r=e.amount;return d.a.createElement(Ea,{isContinuing:!0},d.a.createElement("div",{style:{overflow:"hidden"}},d.a.createElement(oa,{label:v()("name")(n)||"(no payee)",minorText:v()("name")(t)||"(no category)"+(a?" (".concat(a,")"):"")})),d.a.createElement(we,null,d.a.createElement(Nn,{amount:r,expectNegative:!0})))},Ma=Se.a.div(ha||(ha=Object(Ae.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: ",";\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"])),(function(e){return e.isCompact?"0":"8px 0"}),na),ja=Se.a.div(pa||(pa=Object(Ae.a)(["\n  box-sizing: border-box;\n  padding-left: 3px;\n  width: ","px;\n  font-weight: 400;\n  color: #888;\n  font-size: 10px;\n"])),18),Oa=function(e){var t=e.expanded,n=e.name,a=e.id,r=e.amount,o=e.valueRenderer,c=e.onToggle,i=e.isCompact;return d.a.createElement(Ma,{onClick:c,isCompact:i},d.a.createElement(we,{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},d.a.createElement(ja,null,d.a.createElement(Et,{icon:"chevron-right",transform:{rotate:t?90:0}})),"function"===typeof n?n({expanded:t}):n),o?o({amount:r,id:a,faded:t}):d.a.createElement(we,{style:{opacity:t?.3:1}},d.a.createElement(Nn,{amount:r,expectNegative:!0})))},Ia=Object(Se.a)(na)(fa||(fa=Object(Ae.a)(["\n  display: block;\n"]))),Aa=function(e){var t=e.categoriesById,n=e.date,a=e.expanded,r=e.payeesById,o=e.transactions,c=e.onToggleExpanded;return d.a.createElement(Ia,null,d.a.createElement(Oa,{amount:Z("amount")(o),expanded:a,name:d.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},y()(n).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"dddd",sameElse:"DD/MM/YYYY"}),!a&&d.a.createElement(Be,null," ","\u2013 ",o.length," transaction",1===o.length?"":"s")),onToggle:c,isCompact:!0}),d.a.createElement(hn.a,{isExpanded:a},d.a.createElement("div",{style:{paddingLeft:18}},o.length?o.map((function(e){return d.a.createElement(xa,{key:e.id,amount:e.amount,payee:r[e.payee_id],category:t[e.category_id],memo:e.memo})})):d.a.createElement(aa,{style:{margin:0}},"no transactions"))))},Sa=function(e){var t=e.categoriesById,n=e.currentMonth,a=e.payeesById,r=e.transactions,o=J("date")(r),c=An()(0,5).map((function(e){return y()().subtract(e,"days").format("YYYY-MM-DD")})).filter((function(e){return e.startsWith(n)})),i=Object(s.useState)(c.reduce((function(e,t){return Object(A.a)(Object(A.a)({},e),{},Object(I.a)({},t,!1))}),{})),u=Object(Ft.a)(i,2),l=u[0],m=u[1];return d.a.createElement(vn,{title:"Recent Spending"},c.map((function(e){return d.a.createElement(Aa,{key:e,categoriesById:t,date:e,expanded:!!l[e],onToggleExpanded:function(){m(Object(A.a)(Object(A.a)({},l),{},Object(I.a)({},e,!l[e])))},payeesById:a,transactions:o[e]||[]})})))},Ca=function(e){var t=e.budget,n=e.currentMonth,a=e.historyAction,r=e.investmentAccounts,o=e.location,c=e.sidebarTrigger,i=e.title,u=en(),l=Object(Ft.a)(u,2),m=l[0],g=l[1],h=t.categoryGroupsById,p=t.categoriesById,f=t.payeesById,y=t.id,b=m&&h[m],v=t.transactions.filter(X([Kt(t),Ht(r),qt(t)])),E=Lt()((function(e){return Vt(e)===n}))(v);return d.a.createElement(gn,{historyAction:a,location:o,sidebarTrigger:c,title:i,content:d.a.createElement(s.Fragment,null,d.a.createElement(ta,{budgetId:t.id,currentMonth:n,transactions:v,highlightFunction:m&&function(e){return p[e.category_id].category_group_id===m},title:b?"Day by Day: ".concat(Qt(b.name)):"Day by Day"}),d.a.createElement(Sa,{categoriesById:p,currentMonth:n,payeesById:f,transactions:E}),d.a.createElement(va,{entitiesById:h,entityFunction:function(e){return p[e.category_id].category_group_id},entityKey:"category_group_id",expectNegative:!0,linkFunction:function(e){return xt(Mt.currentMonthGroup.path,{budgetId:y,categoryGroupId:e})},selectedEntityId:m,title:"Category Groups",transactions:E,showTransactionCount:!0,onClickEntity:g}))})},ka=n(103),Ta=n.n(ka),wa=function(e){var t=e.average,n=e.data,a=e.height,r=e.series,o=e.selectedMonth,c=e.stacked,i=e.onSelectMonth,u=[],l=[],s=n.map((function(e){return y()(e.month).format("MMM")})),m=null;return o&&(m={months:[o],color:Ye}),n.forEach((function(e,t){var n=e.month;"Jan"===y()(n).format("MMM")&&u.push({color:"#ccc",width:1,value:t-.5,zIndex:3})})),m&&m.months.forEach((function(e){var t=Ta()((function(t){return t.month===e}))(n);l.push({color:m.color,from:t-.5,to:t+.5})})),d.a.createElement(Pn,{key:n.length,options:{chart:{animation:!1,height:a,type:"column",events:{click:function(e){i&&i(n[Math.round(e.xAxis[0].value)].month)}}},xAxis:{categories:s,plotBands:l,plotLines:u},yAxis:{endOnTick:!1,startOnTick:!1,gridLineColor:"#f0f0f0",labels:{align:"left",x:0,y:-2,style:{color:"#bbb",fontSize:"9px"},zIndex:3},tickPixelInterval:30,title:{text:null},plotLines:t&&[{color:"#aaa",dashStyle:"Dot",width:1,value:-t,zIndex:2}]},plotOptions:{series:{animation:!1,stacking:c?"normal":null}},series:r.map((function(e){return"line"===e.type?{color:e.color,data:n.map(e.valueFunction),enableMouseTracking:!1,type:"line",lineWidth:1,marker:{radius:0},zIndex:3}:{borderWidth:0,color:e.color,data:n.map(e.valueFunction),enableMouseTracking:!1,states:{hover:{brightness:0}}}}))}})};wa.defaultProps={height:140,stacked:!0};var Ba,_a,Pa,Fa,Ra=wa,La=Se.a.div(Ba||(Ba=Object(Ae.a)(["\n  box-sizing: border-box;\n  padding: ","px;\n  display: inline-block;\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  background-color: ",";\n  transition: background-color 0.15s ease-in-out;\n"])),2,32,18,9,(function(e){return e.on?Le:"#ddd"})),Ga=Se.a.div(_a||(_a=Object(Ae.a)(["\n  box-sizing: border-box;\n  height: ","px;\n  width: ","px;\n  border-radius: 50%;\n  background-color: #fff;\n  transform: translate3d(","px, 0, 0);\n  transition: transform 0.15s ease-in-out;\n"])),14,14,(function(e){return e.on?14:0})),Ya=function(e){var t=e.on,n=e.onClick;return d.a.createElement(La,{on:t,onClick:n},d.a.createElement(Ga,{on:t}))},Da=Se.a.div(Pa||(Pa=Object(Ae.a)(["\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 10px 0;\n"]))),Na=Se.a.div(Fa||(Fa=Object(Ae.a)([""]))),za=function(e){var t=e.label,n=e.name,a=e.checked,r=e.onChange;return d.a.createElement(Da,{onClick:function(){r({target:{name:n,checked:!a}})}},d.a.createElement(Na,null,t),d.a.createElement(Ya,{on:a,onClick:function(){r({target:{name:n,checked:!a}})}}))},Wa=function(e){var t=e.excludeFirstMonth,n=e.excludeLastMonth,a=e.open,r=e.onClose,o=e.onSetExclusion;return d.a.createElement($n,{open:a,onClose:r,title:"Chart Settings",width:240},d.a.createElement(za,{checked:t,label:"Exclude first month",name:"excludeFirstMonth",onChange:function(){o({month:"first",exclude:!t})}}),d.a.createElement(za,{checked:n,label:"Exclude last month",name:"excludeLastMonth",onChange:function(){o({month:"last",exclude:!n})}}),d.a.createElement(Be,{style:{marginTop:5}},"Excluding incomplete months may lead to more representative averages"))},Ua=function(e){var t=e.excludeFirstMonth,n=e.excludeLastMonth,a=e.expectPositive,r=e.highlightFunction,o=e.months,c=e.selectedMonth,i=e.title,u=e.transactions,l=e.onSelectMonth,m=e.onSetExclusion,g=Object(s.useState)(!1),h=Object(Ft.a)(g,2),p=h[0],f=h[1],b=0,v=0,E=V(Vt)(u),x=o.map((function(e){var t=V(r||function(){return!1})(E[e]||[]),n=Z("amount")(t.false||[]),o=Z("amount")(t.true||[]);return b+=r?o:n,e===c&&(v=r?o:n),{month:e,amount:a?n:-n,highlighted:a?o:-o}})),M=c?[{amount:b/o.length,label:"average"},{amount:v,label:y()(c).format("MMM YYYY")}]:[{amount:b/o.length,label:"average"},{amount:b,label:"total"}],j=[{color:r?Ne:De,valueFunction:function(e){return e.amount}}];return r&&j.push({color:De,valueFunction:function(e){return e.highlighted}}),d.a.createElement(vn,{title:i,hasSettings:!0,onClickSettings:function(){f(!0)}},d.a.createElement(zn,{numbers:M,expectPositive:a}),d.a.createElement(Ra,{data:x,average:b/o.length,series:j,selectedMonth:c,onSelectMonth:l}),d.a.createElement(Wa,{excludeFirstMonth:t,excludeLastMonth:n,open:p,onClose:function(){f(!1)},onSetExclusion:m}))};Ua.defaultProps={title:"Month by Month"};var qa=Ua,Ka=Q((function(e,t,n,a){var r=$t(e),o=y()().format("YYYY-MM");return e.transactions.filter(X([qt(e),Ht(t),function(e){return n&&Vt(e)===r},function(e){return a&&Vt(e)===o}]))})),Ha=Q((function(e,t,n,a){return Ka(e,t,n,a).filter((function(t){return Kt(e)(t)}))})),Va=function(e){var t=e.budget,n=e.historyAction,a=e.investmentAccounts,r=e.location,o=e.sidebarTrigger,c=e.title,i=nn(t),u=i.excludeFirstMonth,l=i.excludeLastMonth,m=i.months,g=i.onSetExclusion,h=Xt(),p=Object(Ft.a)(h,2),f=p[0],b=p[1],v=en(),E=Object(Ft.a)(v,2),x=E[0],M=E[1],j=an(!0),O=Object(Ft.a)(j,4),I=O[0],A=O[3],S=t.payeesById,C=Ha(t,a,u,l),k=f&&C.filter((function(e){return Vt(e)===f}));return d.a.createElement(gn,{historyAction:n,location:r,sidebarTrigger:o,title:c,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:u,excludeLastMonth:l,expectPositive:!0,highlightFunction:x&&function(e){return e.payee_id===x},months:m,selectedMonth:f,title:x?"Month by Month: ".concat(Qt(t.payeesById[x].name)):"Month by Month",transactions:C,onSelectMonth:b,onSetExclusion:g}),d.a.createElement(va,{key:"payee-".concat(f||"all"),entityKey:"payee_id",entitiesById:S,numMonths:f?1:m.length,reverse:!0,title:f?"Payees: ".concat(y()(f).format("MMMM")):"Payees",transactions:k||C,selectedEntityId:x,showAverageToggle:!f,showAverage:I,onClickEntity:M,onToggleAverage:A}))})},Ja=function(e){var t=e.category,n=e.payee,a=e.memo,r=e.date,o=e.amount,c=e.isContinuing;return d.a.createElement(na,{isContinuing:c},d.a.createElement("div",{style:{overflow:"hidden"}},d.a.createElement(oa,{label:v()("name")(n)||"(no payee)",minorText:(v()("name")(t)||"")+(a?" (".concat(a,")"):"")}),d.a.createElement(Be,null,y()(r).format("dddd, MMM D"))),d.a.createElement(we,null,d.a.createElement(Nn,{amount:o,expectNegative:!0})))},$a=function(e){var t=e.transactions,n=e.title,a=e.categoriesById,r=e.payeesById;return d.a.createElement(vn,{title:n},t.length?t.map((function(e){var t=e.id,n=e.category_id,o=e.payee_id,c=e.date,i=e.memo,u=e.amount;return d.a.createElement(Ja,{key:t,amount:u,category:a[n],date:c,memo:i,payee:r[o]})})):d.a.createElement(ra,null))};$a.defaultProps={title:"Transactions"};var Za=$a,Qa=function(e){var t=e.budget,n=e.categoryGroupId,a=e.currentMonth,r=e.historyAction,o=e.location,c=e.sidebarTrigger,i=e.title,u=en(),l=Object(Ft.a)(u,2),m=l[0],g=l[1],h=t.id,p=t.payeesById,f=t.categories,y=t.categoriesById,b=t.transactions,v=m&&y[m],E=f.filter((function(e){return e.category_group_id===n})),x=E.map((function(e){return e.id})),M=b.filter((function(e){return x.includes(e.category_id)})),j=M.filter((function(e){return Vt(e)===a})),O=m&&j.filter((function(e){return e.category_id===m})),I=-Z("activity")(E),A=Z("balance")(E);return d.a.createElement(gn,{location:o,historyAction:r,sidebarTrigger:c,budget:t,title:i,content:d.a.createElement(s.Fragment,null,d.a.createElement(ta,{budgetId:h,currentMonth:a,highlightFunction:m&&function(e){return e.category_id===m},title:v?"Day by Day: ".concat(Qt(v.name)):"Day by Day",transactions:M,total:I+A}),d.a.createElement(va,{entityKey:"category_id",entitiesById:y,expectNegative:!0,linkFunction:function(e){return xt(Mt.currentMonthCategory.path,{budgetId:h,categoryGroupId:n,categoryId:e})},selectedEntityId:m,title:"Categories",transactions:j,showTransactionCount:!0,onClickEntity:g}),d.a.createElement(Za,{categoriesById:y,payeesById:p,transactions:O||j,title:v?"Transactions: ".concat(Qt(v.name)):"Transactions"}))})},Xa=function(e){var t=e.budget,n=e.currentMonth,a=e.categoryId,r=e.historyAction,o=e.location,c=e.sidebarTrigger,i=e.title,u=t.id,l=t.payeesById,m=t.categoriesById,g=t.transactions,h=m[a],p=g.filter((function(e){return e.category_id===a})),f=p.filter((function(e){return Vt(e)===n})),y=-h.activity,b=h.balance;return d.a.createElement(gn,{historyAction:r,location:o,sidebarTrigger:c,budget:t,title:i,content:d.a.createElement(s.Fragment,null,d.a.createElement(ta,{key:h?h.name:"day-by-day",budgetId:u,currentMonth:n,title:"Day by Day",transactions:p,total:y+b}),d.a.createElement(Za,{categoriesById:m,payeesById:l,transactions:f}))})},er=function(e){var t=e.budget,n=e.excludeFirstMonth,a=e.excludeLastMonth,r=e.historyAction,o=e.location,c=e.months,i=e.sidebarTrigger,u=e.title,l=e.transactions,m=e.selectedMonth,g=e.selectedGroupId,h=e.onSelectGroup,p=e.onSelectMonth,f=e.onSetExclusion,b=tn(t.id),v=Object(Ft.a)(b,2),E=v[0],x=v[1],M=t.categoryGroupsById,j=t.categoriesById,O=t.id,I=g&&M[g],A=m&&l.filter((function(e){return Vt(e)===m}));return d.a.createElement(gn,{historyAction:r,location:o,sidebarTrigger:i,title:u,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:n,excludeLastMonth:a,highlightFunction:g&&function(e){return j[e.category_id].category_group_id===g},months:c,selectedMonth:m,title:I?"Month by Month: ".concat(Qt(I.name)):"Month by Month",transactions:l,onSelectMonth:p,onSetExclusion:f}),d.a.createElement(va,{key:m||"all",entityFunction:function(e){return j[e.category_id].category_group_id},entityKey:"category_group_id",entitiesById:M,expectNegative:!0,linkFunction:function(e){return xt(Mt.group.path,{budgetId:O,categoryGroupId:e})},selectedEntityId:g,title:m?"Category Groups: ".concat(y()(m).format("MMMM")):"Category Groups",transactions:A||l,onClickEntity:h,numMonths:c.length,showAverageToggle:!m,showAverage:E&&!m,onToggleAverage:x}))})},tr=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={allMounted:!1,showAll:!1},e.handleToggleShowAll=function(){var t=e.state,n=t.allMounted,a=t.showAll;n?e.setState({showAll:!a}):(e.setState({allMounted:!0}),requestAnimationFrame((function(){e.setState({showAll:!0})})))},e}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.categoriesById,n=e.payeesById,a=e.selectedCategoryId,r=e.selectedPayeeId,o=e.selectedMonth,c=e.transactions,i=e.limitShowing,u=this.state,l=u.allMounted,m=u.showAll,g=a&&t[a],h=r&&n[r],p=y()(o).format("MMMM"),f=_()([i?q()("amount"):function(e){return e.reverse()},function(e){return e.filter((function(e){return Vt(e)===o&&(!a||e.category_id===a)&&(!r||e.payee_id===r)}))}])(c),b=i&&f.length>5,v=b?f.slice(0,3):f,E=b?f.slice(3):[];return d.a.createElement(vn,{title:h?"Transactions: ".concat(p,", ").concat(h.name):g?"Transactions: ".concat(p,", ").concat(g.name):"Transactions: ".concat(p)},v.length?v.map((function(e){var a=e.id,r=e.date,o=e.amount,c=e.memo,i=e.payee_id,u=e.category_id;return d.a.createElement(Ja,{key:a,amount:o,category:t[u],date:r,memo:c,payee:n[i]})})):d.a.createElement(ra,null),l&&d.a.createElement(hn.a,{isExpanded:m},d.a.createElement(s.Fragment,null,E.map((function(e){var a=e.id,r=e.date,o=e.amount,c=e.payee_id,i=e.category_id;return d.a.createElement(Ja,{key:a,amount:o,category:t[i],date:r,payee:n[c],isContinuing:!0})})))),!!E.length&&d.a.createElement(la,{count:f.length,pluralizedName:"transactions",showAll:m,onToggle:this.handleToggleShowAll}))}}]),n}(s.Component);tr.defaultProps={limitShowing:!0};var nr,ar=tr,rr=function(e){var t=e.budget,n=e.categoryGroupId,a=e.excludeFirstMonth,r=e.excludeLastMonth,o=e.historyAction,c=e.location,i=e.months,u=e.selectedMonth,l=e.selectedCategoryId,m=e.sidebarTrigger,g=e.title,h=e.transactions,p=e.onSelectMonth,f=e.onSelectCategory,b=e.onSetExclusion,v=tn(t.id),E=Object(Ft.a)(v,2),x=E[0],M=E[1],j=t.categories,O=t.categoriesById,I=t.categoryGroupsById,A=t.payeesById,S=t.id,C=I[n],k=l&&O[l],T=j.filter((function(e){return e.category_group_id===C.id})).map((function(e){return e.id})),w=h.filter((function(e){return T.includes(e.category_id)})),B=u&&_()([q()("amount"),function(e){return e.filter((function(e){return Vt(e)===u}))}])(w);return d.a.createElement(gn,{historyAction:o,location:c,sidebarTrigger:m,budget:t,title:g,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:a,excludeLastMonth:r,months:i,highlightFunction:l&&function(e){return e.category_id===l},selectedMonth:u,title:k?"Month by Month: ".concat(Qt(k.name)):"Month by Month",transactions:w,onSelectMonth:p,onSetExclusion:b}),d.a.createElement(va,{key:"categories-".concat(u||"all"),entityKey:"category_id",entitiesById:O,expectNegative:!0,linkFunction:function(e){return xt(Mt.category.path,{budgetId:S,categoryGroupId:C.id,categoryId:e})},title:u?"Categories: ".concat(y()(u).format("MMMM")):"Categories",transactions:B||w,selectedEntityId:l,onClickEntity:f,showAverageToggle:!u,showAverage:x&&!u,numMonths:i.length,onToggleAverage:M,limitShowing:!0}),u&&B.length>0&&d.a.createElement(ar,{key:"transactions-".concat(u||"all","-").concat(l||"all"),categoriesById:O,payeesById:A,selectedMonth:u,selectedCategoryId:l,transactions:B}))})},or={selectedMonth:null,selectedGroupId:null,selectedCategoryId:null,selectedPayeeId:null},cr=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=or,e.cachedStates={},e.handleSelectMonth=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{selectedMonth:e.selectedMonth===t?null:t})}))},e.handleSelectGroup=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{selectedGroupId:e.selectedGroupId===t?null:t})}))},e.handleSelectCategory=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{selectedCategoryId:e.selectedCategoryId===t?null:t})}))},e.handleSelectPayee=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{selectedPayeeId:e.selectedPayeeId===t?null:t})}))},e}return Object(Ee.a)(n,[{key:"getSnapshotBeforeUpdate",value:function(){return this.state}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.location,o=a.action;r!==e.location&&("POP"===o&&(this.cachedStates[e.location]=n,this.setState(this.cachedStates[r])),"PUSH"===o&&(this.cachedStates[e.location]=n,this.setState(or)),"REPLACE"===o&&this.setState(or))}},{key:"render",value:function(){return this.props.children(Object(A.a)(Object(A.a)({},this.state),{},{onSelectMonth:this.handleSelectMonth,onSelectGroup:this.handleSelectGroup,onSelectCategory:this.handleSelectCategory,onSelectPayee:this.handleSelectPayee,onSetExclusion:this.handleSetExclusion}))}}]),n}(s.Component),ir=function(e){var t=e.categoryId,n=e.budget,a=e.excludeFirstMonth,r=e.excludeLastMonth,o=e.historyAction,c=e.location,i=e.months,u=e.selectedMonth,l=e.selectedPayeeId,m=e.sidebarTrigger,g=e.title,h=e.transactions,p=e.onSelectMonth,f=e.onSelectPayee,b=e.onSetExclusion,v=n.categoriesById,E=n.payeesById,x=n.id,M=v[t],j=l&&E[l],O=h.filter((function(e){return e.category_id===t})),I=u&&O.filter((function(e){return Vt(e)===u}));return d.a.createElement(gn,{historyAction:o,location:c,sidebarTrigger:m,budget:n,title:g,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:a,excludeLastMonth:r,months:i,onSetExclusion:b,highlightFunction:l&&function(e){return e.payee_id===l},selectedMonth:u,title:j?"Month by Month: ".concat(Qt(j.name)):"Month by Month",transactions:O,onSelectMonth:p}),d.a.createElement(va,{key:"payees-".concat(u||"all"),emptyName:"(no payee)",entitiesById:E,entityKey:"payee_id",expectNegative:!0,linkFunction:function(e){return xt(Mt.categoryPayee.path,{budgetId:x,categoryGroupId:M.category_group_id,categoryId:t,payeeId:e})},title:u?"Payees: ".concat(y()(u).format("MMMM")):"Payees",transactions:I||O,selectedEntityId:l,onClickEntity:f,limitShowing:!0}),u&&I.length>0&&d.a.createElement(ar,{key:"transactions-".concat(u||"all","-").concat(l||"all"),categoriesById:v,payeesById:E,transactions:I,selectedMonth:u,selectedPayeeId:l}))})},ur=function(e){var t=e.budget,n=e.categoryId,a=e.excludeFirstMonth,r=e.excludeLastMonth,o=e.historyAction,c=e.location,i=e.months,u=e.payeeId,l=e.selectedMonth,m=e.sidebarTrigger,g=e.title,h=e.transactions,p=e.onSelectMonth,f=e.onSetExclusion,y=t.categoriesById,b=t.payeesById,v=h.filter((function(e){return e.category_id===n&&e.payee_id===u}));return d.a.createElement(gn,{historyAction:o,location:c,sidebarTrigger:m,budget:t,title:g,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:a,excludeLastMonth:r,months:i,selectedMonth:l,transactions:v,onSelectMonth:p,onSetExclusion:f}),l&&d.a.createElement(ar,{categoriesById:y,payeesById:b,selectedMonth:l,transactions:v,limitShowing:!1}))})},lr=n(148),sr=n.n(lr),dr=n(64),mr=n.n(dr),gr=function(e){var t=e.data,n=e.onSelectMonth,a=e.selectedMonth;return d.a.createElement(Ra,{data:t,height:180,selectedMonth:a,series:[{color:Ne,valueFunction:function(e){return e.income}},{color:ze,valueFunction:function(e){return e.expenses}},{type:"line",color:Le,valueFunction:function(e){return e.income+e.expenses}}],onSelectMonth:n})},hr=n(65),pr=n.n(hr),fr=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1,childrenMounted:!1},e.handleToggleExpand=function(){var t=e.state,n=t.expanded;t.childrenMounted?e.setState({expanded:!n}):(e.setState({childrenMounted:!0}),requestAnimationFrame((function(){e.setState({expanded:!0})})))},e}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.amount,r=e.nodes,o=e.isTopLevel,c=e.valueRenderer,i=this.state,u=i.expanded,l=i.childrenMounted,s=!!r&&r.length>0;return d.a.createElement(Er,{hasChildNodes:s,isTopLevel:o},s?d.a.createElement(Oa,{id:n,name:t,amount:a,expanded:u,onToggle:this.handleToggleExpand,valueRenderer:c}):d.a.createElement(vr,{id:n,name:t,amount:a,valueRenderer:c}),s&&l&&d.a.createElement(hn.a,{isExpanded:u},d.a.createElement(yr,{nodes:r,valueRenderer:c})))}}]),n}(s.Component),yr=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.valueRenderer;return d.a.createElement("div",{style:{paddingLeft:18}},t.map((function(e){return d.a.createElement(fr,Object.assign({},e,{key:e.id,isTopLevel:!1,valueRenderer:n}))})))}}]),n}(s.PureComponent),br=Se.a.div(nr||(nr=Object(Ae.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"])),na),vr=function(e){var t=e.name,n=e.id,a=e.amount,r=e.valueRenderer;return d.a.createElement(br,null,d.a.createElement(we,null,t),r?r({amount:a,id:n}):d.a.createElement(we,null,d.a.createElement(Nn,{amount:a})))},Er=function(e){var t=e.isTopLevel,n=(e.hasChildNodes,e.children);return t?d.a.createElement(na,{style:{display:"block",padding:0}},n):n},xr=fr,Mr=function(e){var t=e.nodes,n=e.valueRenderer;return t.map((function(e){var t=e.id,a=e.name,r=e.amount,o=e.nodes;return d.a.createElement(xr,{key:t,id:t,name:a,amount:r,nodes:o,valueRenderer:n,isTopLevel:!0})}))};Mr.defaultProps={reverse:!1};var jr=Mr,Or=Nt.a.convert({cap:!1}),Ir=function(e){var t=e.categoriesById,n=e.categoryGroupsById,a=e.transactions,r=e.totalIncome,o=e.payeesById,c=e.divideBy,i=_()([Or((function(e,n){var a=Zt({payeesById:o,transactions:e},c);return Object(A.a)(Object(A.a)({},Yt()(["id","name","category_group_id"])(t[n])),{},{nodes:q()("amount")(a),amount:Z("amount")(a)})})),J("category_id")])(a),u=_()([Or((function(e,t){var a=Or(N()("category_group_id"))(e);return Object(A.a)(Object(A.a)({},Yt()(["id","name"])(n[t])),{},{nodes:q()("amount")(a),amount:Z("amount")(a)})})),J("category_group_id")])(i),l=Zt({payeesById:o,transactions:a.filter((function(e){return!e.category_id}))},c),s=_()([function(e){return pr()(e)([{id:"net",amount:-r-Z("amount")(e),name:"Net Income"}])},q()("amount"),pr()(l)])(u);return d.a.createElement(vn,{title:"Expenses Breakdown"},d.a.createElement(jr,{nodes:s,valueRenderer:function(e){return d.a.createElement(ua,Object.assign({},e,{expectNegative:!0,total:-r}))}}))};Ir.defaultProps={divideBy:1};var Ar=Ir,Sr=function(e){var t=e.transactions,n=e.payeesById,a=e.divideBy,r=Zt({payeesById:n,transactions:t},a),o=Cn()("amount")(r);return d.a.createElement(vn,{title:"Income Breakdown"},d.a.createElement(jr,{nodes:q()("amount")(r).reverse(),total:o,valueRenderer:function(e){return d.a.createElement(ua,Object.assign({},e,{expectPositive:!0,total:o}))}}))};Sr.defaultProps={divideBy:1};var Cr,kr=Sr,Tr=function(e){var t=e.categoriesById,n=e.categoryGroupsById,a=e.payeesById,r=e.expenseTransactions,o=e.incomeTransactions,c=e.divideBy;return d.a.createElement(s.Fragment,null,d.a.createElement(Ar,{categoriesById:t,categoryGroupsById:n,payeesById:a,transactions:r,totalIncome:Z("amount")(o)/c,divideBy:c}),d.a.createElement(kr,{payeesById:a,transactions:o,divideBy:c}))},wr=Nt.a.convert({cap:!1}),Br=Q((function(e,t,n){return _()([q()("month"),wr((function(e,t){var a=V(Kt(n))(e);return{month:t,expenseTransactions:a.false||[],incomeTransactions:a.true||[],income:Z("amount")(a.true||[]),expenses:Z("amount")(a.false||[])}})),V(Vt)])(e)})),_r=function(e){var t=e.budget,n=e.excludeFirstMonth,a=e.excludeLastMonth,r=e.historyAction,o=e.investmentAccounts,c=e.location,i=e.sidebarTrigger,u=e.title,l=e.transactions,m=e.onSetExclusion,g=Xt(),h=Object(Ft.a)(g,2),p=h[0],f=h[1],y=Object(s.useState)(!1),b=Object(Ft.a)(y,2),v=b[0],E=b[1],x=Object(s.useState)(!1),M=Object(Ft.a)(x,2),j=M[0],O=M[1],I=t.categoriesById,A=t.categoryGroupsById,S=t.payeesById,C=Br(l,o,t),k=p?[mr()(Y()("month",p))(C)]:C,T=F()((function(e){return e.incomeTransactions}))(sr()(k)),w=F()((function(e){return e.expenseTransactions}))(sr()(k)),B=Z("amount")(w),_=Z("amount")(T),P=j?1:k.length;return d.a.createElement(gn,{historyAction:r,location:c,sidebarTrigger:i,title:u,content:d.a.createElement(s.Fragment,null,d.a.createElement(vn,{title:"Monthly Trend",hasSettings:!0,onClickSettings:function(){E(!0)},actions:d.a.createElement(we,{onClick:function(){O(!j)}},j?"show average":"show total")},d.a.createElement(zn,{expectPositive:!0,numbers:[{label:"net income",amount:(B+_)/P},{label:"expenses",amount:-B/P},{label:"income",amount:_/P}]}),d.a.createElement(gr,{data:C,selectedMonth:p,onSelectMonth:f}),d.a.createElement(Wa,{excludeFirstMonth:n,excludeLastMonth:a,open:v,onClose:function(){E(!1)},onSetExclusion:m})),d.a.createElement(Tr,{categoriesById:I,categoryGroupsById:A,payeesById:S,expenseTransactions:w,incomeTransactions:T,divideBy:j?1:k.length}))})},Pr=n(228),Fr=n.n(Pr),Rr=n(229),Lr=n.n(Rr),Gr=n(25),Yr=n.n(Gr),Dr=n(38),Nr=n.n(Dr),zr=n(66),Wr=n.n(zr),Ur=n(149),qr=n.n(Ur),Kr=n(230),Hr=n.n(Kr),Vr=n(150),Jr=n.n(Vr),$r=n(35),Zr=n.n($r),Qr=["mortgage","creditCard"],Xr=function(e){var t=e.data,n=e.months,a=e.mortgageAccounts,r=e.selectedMonth,o=e.onSelectMonth,c=V((function(e){return function(e){var t=e.type,n=e.id;return e.mortgageAccounts[n]||Zr()(t)(Qr)?"liability":"asset"}({type:e.type,id:e.id,mortgageAccounts:a})}))(t),i=n.map((function(e,t){return{month:e,assets:Cn()((function(e){return e.data[t]}))(c.asset),liabilities:Cn()((function(e){return e.data[t]}))(c.liability)}}));return d.a.createElement(Ra,{selectedMonth:r,onSelectMonth:o,data:i,height:180,series:[{color:ze,valueFunction:function(e){return Math.max(-e.liabilities,0)}},{color:Ne,valueFunction:function(e){return Math.max(e.assets,0)}},{color:Le,type:"line",valueFunction:function(e){return e.assets+e.liabilities}}],stacked:!1})},eo=n(231),to=n.n(eo),no=n(232),ao=n.n(no),ro=n(233),oo=n.n(ro),co=Nt.a.convert({cap:!1}),io=function(e){var t=e.accountsById,n=e.hiddenAccounts,a=e.nodes,r=e.onToggleAccounts;return d.a.createElement(jr,{nodes:a,valueRenderer:function(e){var o=e.id,c=e.amount,i=a.find(ao()("id",o)),u=i?i.accounts:[t[o]];return d.a.createElement(we,{style:{display:"flex",alignItems:"center"}},d.a.createElement(Nn,{amount:c}),d.a.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:10}},d.a.createElement(Ya,{onClick:function(e){e.stopPropagation(),r({ids:co("id")(u)})},on:!to()((function(e){return n[e.id]}))(u)})))}})},uo=function(e){var t=e.accounts,n=e.hiddenAccounts,a=e.onToggleAccounts,r=e.investmentAccounts,o=e.mortgageAccounts,c=Ie()("id")(t),i=function(e){var t=e.accounts,n=e.investmentAccounts,a=e.mortgageAccounts,r=Nr()((function(e){return n[e.id]?"Investments":a[e.id]?"Mortgages":oo()(e.type)}))(t);return _()([function(e){return e.reverse()},q()("amount"),co((function(e,t){return{name:t,accounts:e,amount:Cn()("balance")(e),id:t,nodes:_()([q()("balance"),co((function(e){var t=e.id,n=e.name;return{amount:e.balance,id:t,name:n}}))])(e)}}))])(r)}({accounts:t,investmentAccounts:r,mortgageAccounts:o});return d.a.createElement(vn,{title:"Accounts"},d.a.createElement(io,{accountsById:c,hiddenAccounts:n,nodes:i,onToggleAccounts:a}))},lo=function(e){var t=e.months,n=e.accountSummaries,a=e.hiddenAccounts,r=t.map((function(e){return{month:e,total:0}}));n.forEach((function(e){var t=e.id,n=e.data;a[t]||n.forEach((function(e,t){r[t].total+=e}))}));var o=r.map((function(e,t){return{year:e.month.slice(0,4),month:e.month,change:0===t?null:e.total-r[t-1].total}})).reverse(),c=Nr()("year")(o),i=Object.keys(c).sort().reverse().map((function(e){return{amount:Cn()("change")(c[e]),id:e,name:e,nodes:c[e].map((function(e){return{amount:e.change,name:y()(e.month).format("MMMM"),id:e.month}}))}}));return d.a.createElement(vn,{title:"Net Worth Changes"},d.a.createElement(jr,{nodes:i,valueRenderer:function(e){var t=e.faded,n=e.amount;return d.a.createElement(we,{style:{opacity:t?.3:1}},d.a.createElement(Nn,{amount:n,positiveColor:"green",negativeColor:"red"}))}}))},so=function(e){return e.reduce((function(e,t){return 0===e.length?[t]:e.concat(Wt()(e)+t)}),[])},mo=Q(_()([qr()(Nr()("account_id")),Nr()((function(e){return e.date.slice(0,7)}))])),go=Q((function(e){return _()([q()(Wr.a),Je.a,mo])(e.transactions)})),ho=Q((function(e){var t=mo(e.transactions),n=go(e);return Nt()((function(e){var a=e.id;return{id:a,data:_()([so,Nt()((function(e){return Cn()("amount")(t[e][a])}))])(n)}}))(e.accounts)})),po=Q((function(e,t){var n=go(t),a=Ta()(Lr()(e))(n),r=ho(t);return _()([qr()((function(e){var t=e.data;return a>-1?t[a]:Wt()(t)})),Ie()("id")])(r)})),fo=function(e){var t=e.budget,n=e.historyAction,a=e.investmentAccounts,r=e.location,o=e.mortgageAccounts,c=e.sidebarTrigger,i=e.title,u=Xt(),l=Object(Ft.a)(u,2),m=l[0],g=l[1],h=function(e){var t=Object(s.useState)(T("netWorthHiddenAccounts",e.id)),n=Object(Ft.a)(t,2),a=n[0],r=n[1];return{hiddenAccounts:a,onToggleHiddenAccounts:function(t){var n=t.ids,o=n.some((function(e){return!a[e]})),c=n.reduce((function(e,t){return Object(A.a)(Object(A.a)({},e),{},Object(I.a)({},t,o))}),a);r(c),w("netWorthHiddenAccounts",e.id,c)}}}(t),p=h.hiddenAccounts,f=h.onToggleHiddenAccounts,y=go(t),b=ho(t),v=po(m,t),E=Hr()((function(e,t){return p[t]})),x=_()([Jr.a,Yr()((function(e){return e<0})),cn.a,E])(v),M=_()([Jr.a,Yr()((function(e){return e>0})),cn.a,E])(v);return d.a.createElement(gn,{historyAction:n,location:r,sidebarTrigger:c,title:i,content:d.a.createElement(s.Fragment,null,d.a.createElement(vn,{title:"Monthly Trend"},d.a.createElement(zn,{alwaysRound:!0,expectPositive:!0,numbers:[{amount:M+x,label:"Net Worth"},{amount:M,label:"Assets"},{amount:-x,label:"Liabilities"}]}),d.a.createElement(Xr,{data:Nt()((function(e){var n=e.id,a=e.data;return{data:p[n]?a.map(Fr()(0)):a,type:t.accountsById[n].type,id:n}}))(b),months:y,mortgageAccounts:o,selectedMonth:m,onSelectMonth:g})),d.a.createElement(uo,{accounts:Nt()((function(e){return Object(A.a)(Object(A.a)({},e),{},{balance:v[e.id]})}))(t.accounts),hiddenAccounts:p,investmentAccounts:a,mortgageAccounts:o,onToggleAccounts:f}),d.a.createElement(lo,{accountSummaries:b,hiddenAccounts:p,months:y}))})},yo=function(e){return function(t){return!!e[t.account_id]&&!!t.transfer_account_id&&!e[t.transfer_account_id]}},bo=function(e,t){return function(n){return!!e[n.account_id]&&!n.transfer_account_id&&"Starting Balance"!==v()([n.payee_id,"name"])(t)}},vo=function(e){var t=e.budget,n=e.historyAction,a=e.investmentAccounts,r=e.location,o=e.sidebarTrigger,c=e.title,i=nn(t),u=i.excludeFirstMonth,l=i.excludeLastMonth,m=i.months,g=i.onSetExclusion,p=Xt(),f=Object(Ft.a)(p,2),y=f[0],b=f[1],v=en(),E=Object(Ft.a)(v,2),x=E[0],M=E[1],j=t.payeesById;if(0===Je()(a).length)return d.a.createElement(aa,null,"You don't have any accounts marked as investment accounts."," ",d.a.createElement(h.b,{to:xt(Mt.settings.path,{budgetId:t.id})},"Go to Settings"));var O=t.transactions.filter(function(e,t){return function(n){return yo(e)(n)||bo(e,t)(n)}}(a,j)),I=y&&O.filter((function(e){return Vt(e)===y}));return d.a.createElement(gn,{historyAction:n,location:r,sidebarTrigger:o,title:c,content:d.a.createElement(s.Fragment,null,d.a.createElement(qa,{excludeFirstMonth:u,excludeLastMonth:l,expectPositive:!0,highlightFunction:x&&function(e){return"contribution"===x?yo(a)(e):bo(a,j)(e)},months:m,selectedMonth:y,transactions:O,onSelectMonth:b,onSetExclusion:g}),d.a.createElement(va,{transactions:I||O,entitiesById:{contribution:{name:"Contributions"},capitalGain:{name:"Capital Gains/Losses"}},expectPositive:!0,title:"Growth Breakdown",onClickEntity:M,selectedEntityId:x,entityFunction:function(e){return yo(a)(e)?"contribution":"capitalGain"},positiveIsRed:!0}))})},Eo=n(151),xo=n.n(Eo),Mo=n(67),jo=n.n(Mo),Oo=n(234),Io=n.n(Oo),Ao=n(235),So=n.n(Ao),Co=n(69),ko=n.n(Co),To=n(236),wo=n.n(To),Bo=n(42),_o=n.n(Bo),Po=n(237),Fo=n.n(Po),Ro=function(e){var t=e.investmentsProjection,n=e.mortgageProjection,a=e.amountNeededToRetire,r=e.yearsUntilRetirement;return d.a.createElement(Pn,{options:{chart:{type:"column"},xAxis:{type:"category",plotBands:[{color:Ye,from:Math.floor(r)-.5,to:Math.floor(r)+.5}]},yAxis:{title:{text:null},endOnTick:!1,plotLines:[{value:a,color:"#ccc",width:1}]},legend:{enabled:!1},series:[{data:t,color:Le,borderWidth:0},{data:n,color:Ge,borderWidth:0}]}})},Lo=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},Go=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).parent=null,e.handleBodyClick=function(t){e.props.onClickOff&&!Lo(e.parent,t.target)&&e.props.onClickOff()},e}return Object(Ee.a)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.handleBodyClick)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleBodyClick)}},{key:"render",value:function(){var e=this;return this.props.children({ref:function(t){e.parent=t}})}}]),n}(s.Component),Yo=document.getElementsByTagName("body")[0],Do=Se.a.div(Cr||(Cr=Object(Ae.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #fff;\n"]))),No=function(e){var t=e.name,n=e.formatter,a=e.label,r=e.value,o=e.onBlur,c=e.onChange,i=e.onReset,u=e.rangeOptions;return Object(m.createPortal)(d.a.createElement(Go,{onClickOff:t&&o},(function(e){var o=e.ref;return d.a.createElement(Do,{ref:o},d.a.createElement(hn.a,{isExpanded:!!t},d.a.createElement("div",{style:{borderTop:"1px solid #bbb",padding:"15px 20px"}},d.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15}},a,": ",n(r||0),d.a.createElement(qe,{onClick:function(){i(t)}},"reset")),d.a.createElement(Ho,Object.assign({},u,{name:t,value:r||0,onChange:c})))))})),Yo)};No.defaultProps={formatter:function(e){return e}};var zo,Wo,Uo,qo,Ko,Ho=function(e){var t=e.name,n=(e.onReset,Object(He.a)(e,["name","onReset"]));return d.a.createElement("input",Object.assign({},n,{name:t,type:"range",style:{display:"block",width:"100%"}}))},Vo=No,Jo=[{label:"Average monthly contribution",name:"averageContribution",formatter:function(e){return"$".concat(Math.round(e))}},{label:"Average return on investments",name:"returnOnInvestments",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}},{label:"Average expenses without mortgage",name:"averageExpenses",formatter:function(e){return"$".concat(Math.round(e))}},{label:"Return on investment after retirement",name:"retirementReturns",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}},{label:"Average tax rate after retirement",name:"retirementTaxRate",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}}],$o=$("name")(Jo),Zo=Q((function(e,t,n){var a=function(e,t){var n=e.accounts,a=e.transactions,r=mr()((function(e){return t[e.id]}))(n);if(!r)return null;var o=_()([q()("date"),Yr()(x()({account_id:r.id}))])(a),c=_()([function(e){return e.date.slice(0,7)},Wt.a])(o),i=Fo()((function(e){return e.date.slice(0,7)===c}))(o),u=-_()([Cn()("amount"),Lt()((function(e){return e.date.slice(0,7)!==c}))])(o),l=u-Cn()("amount")(i),s=_()([ko()("amount"),mr()(ko()("transfer_account_id"))])(i),d=(l+s)/u-1,m=-Math.log(1-d*u/s)/Math.log(1+d),g=12*d,h=m-1,p=Nt()((function(e){return Math.pow(1+d,e)*u-(Math.pow(1+d,e)-1)/d*s}))(An()(1,m));return{rate:g,mortgagePayment:s,paymentsLeft:h,principalProjection:p}}(e,n)||{},r=a.paymentsLeft,o=a.mortgagePayment,c=a.principalProjection,i=function(e,t){var n=e.accounts,a=(e.payees,e.transactions),r=_()([Yr()((function(e){return t[e]})),Nt()("id")])(n),o=_()([Nr()((function(e){return e.date.slice(0,7)})),_o()((function(e){return Zr()(e.transfer_account_id)(r)})),Yr()((function(e){return Zr()(e.account_id)(r)}))])(a),c=0,i=[],u=_()([q()(Wr.a),Je.a])(o);Nt()((function(e){return o[e]}))(u).forEach((function(e){var t=_()([Cn()("amount"),Yr()(ko()("transfer_account_id"))])(e),n=_o()(ko()("transfer_account_id"))(e),a=Cn()("amount")(n);c&&n.length&&i.push(a/(c+.5*t)),c+=a+t}));var l=_()([wo()(So.a,1),Nt()(Io()(1))])(i),s=i.length;return Math.pow(l,12/s)-1}(e,t),u=function(e,t){var n=e.accounts,a=e.transactions,r=_()([Yr()((function(e){return t[e]})),Nt()("id")])(n),o=_()([Yr()((function(e){var t=e.transfer_account_id;return t&&!Zr()(t)(r)})),Yr()((function(e){var t=e.account_id;return Zr()(t)(r)}))])(a),c=_()([q()(Wr.a),H.a,Nt()((function(e){return e.slice(0,7)})),Nt()("date")])(o);return Cn()("amount")(o)/(y()(Wt()(c)).diff(y()(jo()(c)),"months")+1)}(e,t),l=function(e,t){var n=e.accounts,a=e.transactions,r=_()([Yr()((function(e){return t[e]})),Nt()("id")])(n);return _()([Cn()("amount"),Yr()((function(e){var t=e.account_id;return Zr()(t)(r)}))])(a)}(e,t),s=function(e,t,n){var a=e.transactions,r=e.accounts,o=e.payees,c=e.categoriesById,i=e.categoryGroupsById,u=_()([ko()("id"),mr()(x()({name:"Starting Balance"}))])(o),l=_()([q()(Wr.a),H.a,Nt()(Vt)])(a),s=_()([Yr()((function(e){return n[e]})),Nt()("id")])(r),d=_()([Yr()((function(e){return t[e]})),Nt()("id")])(r);return-_()([Cn()("amount"),_o()((function(e){return e.amount>0&&!e.transfer_account_id&&(!e.category_id||!i[c[e.category_id].category_group_id])})),_o()((function(e){return Zr()(e.transfer_account_id)(pr()(s,d))})),_o()((function(e){return Zr()(e.account_id)(pr()(s,d))})),_o()((function(e){return Zr()(Vt(e))([jo()(l),Wt()(l)])})),_o()(x()({payee_id:u}))])(a)/(l.length-2)}(e,t,n);return{mortgagePayment:o,remainingMortgagePayments:r,mortgageProjection:c,returnOnInvestments:i,averageContribution:u,currentInvestments:l,averageExpenses:s,retirementReturns:.04,retirementTaxRate:.15,maxAverageExpenses:1e3*Math.ceil(2*s/1e3),maxAverageContribution:1e3*Math.ceil(2*u/1e3)}})),Qo=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(ve.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(I.a)({},e.target.name,parseFloat(e.target.value)))},a.handleSelectAdjusting=function(e){a.setState((function(t){return{adjustingName:t.adjustingName===e?null:e}}))},a.handleClearSelection=function(){a.setState({adjustingName:null})},a.handleResetCalculation=function(e){var t=a.props,n=t.budget,r=t.investmentAccounts,o=t.mortgageAccounts;a.setState(Yt()(e)(Zo(n,r,o)))},a.state=Object(A.a)(Object(A.a)({},Zo(e.budget,e.investmentAccounts,e.mortgageAccounts)),{},{adjustingName:null}),a}return Object(Ee.a)(n,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.historyAction,a=t.location,r=t.sidebarTrigger,o=t.title,c=this.state,i=c.mortgagePayment,u=c.remainingMortgagePayments,l=c.mortgageProjection,m=c.returnOnInvestments,g=c.averageContribution,h=c.currentInvestments,p=c.averageExpenses,f=c.retirementReturns,y=c.retirementTaxRate,b=c.maxAverageExpenses,E=c.maxAverageContribution,x=c.adjustingName,M=function(e){var t=e.numMonths,n=e.returnOnInvestments,a=e.averageContribution,r=e.currentInvestments,o=Math.pow(1+n,1/12)-1,c=r,i=[];do{i.push(c),c+=a+(c+.5*a)*o}while(i.length<t);return i}({numMonths:600,returnOnInvestments:m,averageContribution:g,currentInvestments:h}),j=Math.pow(1+f,1/12)-1,O=p/(j*(1-y)),I=0;I<M.length;){if(I<u){var A=An()(0,u-I).reduce((function(e,t){return e+i/Math.pow(1+j*(1-y),t)}),0);if((M[I]-A)*j*(1-y)>p)break}else if(M[I]*j*(1-y)>p)break;I+=1}var S=function(e){var t=e.numMonths,n=e.returnOnInvestments,a=e.averageContribution,r=e.currentInvestments,o=e.monthsBeforeRetirement,c=e.monthlyExpenses,i=e.retirementReturns,u=e.retirementTaxRate,l=e.remainingMortgagePayments,s=e.mortgagePayment,d=Math.pow(1+n,1/12)-1,m=Math.pow(1+i,1/12)-1,g=r,h=[];do{h.push(g),h.length<o?g+=a+(g+.5*a)*d:(g+=g*m*(1-u)-c,h.length<l&&(g-=s))}while(h.length<t);return h}({numMonths:600,returnOnInvestments:m,averageContribution:g,currentInvestments:h,monthsBeforeRetirement:I,monthlyExpenses:p,retirementReturns:f,retirementTaxRate:y,remainingMortgagePayments:u,mortgagePayment:i}),C=!!i,k=I/12,T=_()([Nt()(jo.a),xo()(12)])(S),w=_()([Nt()(jo.a),xo()(12)])(l),B={averageContribution:{min:0,max:E,step:50},returnOnInvestments:{min:0,max:.2,step:.001},averageExpenses:{min:0,max:b,step:50},retirementReturns:{min:0,max:.2,step:.001},retirementTaxRate:{min:0,max:.5,step:.001}};return d.a.createElement(gn,{historyAction:n,location:a,sidebarTrigger:r,title:o,content:d.a.createElement(s.Fragment,null,d.a.createElement(vn,{title:"Projection"},d.a.createElement(zn,{numbers:[{amount:-O,label:"needed for retirement",decimalsToRound:0},{amount:-k,label:"years to retirement",isMoney:!1,decimalsToRound:1}]}),d.a.createElement(Ro,{investmentsProjection:T,mortgageProjection:w,amountNeededToRetire:O,yearsUntilRetirement:k})),d.a.createElement(vn,{title:"Assumptions"},Jo.map((function(t){var n=t.label,a=t.name,r=t.formatter;return d.a.createElement(Xo,{key:a,label:n,name:a,value:e.state[a],formatter:r,isAdjusting:x===a,onSelect:e.handleSelectAdjusting,onReset:e.handleResetCalculation,onChange:e.handleChange})})),C&&d.a.createElement(s.Fragment,null,d.a.createElement(ec,{label:"Mortgage payment",value:i,formatter:function(e){return"$".concat(e.toFixed(2))}}),d.a.createElement(ec,{label:"Time remaining on mortgage",value:u,formatter:function(e){return"".concat((e/12).toFixed(1)," years")}}))),d.a.createElement(Vo,{name:x,label:v()([x,"label"])($o),onReset:this.handleResetCalculation,onChange:this.handleChange,onBlur:this.handleClearSelection,formatter:v()([x,"formatter"])($o),value:this.state[x],rangeOptions:B[x]}))})}}]),n}(s.PureComponent),Xo=function(e){var t=e.label,n=e.value,a=e.formatter,r=e.name,o=e.onSelect,c=e.isAdjusting;return d.a.createElement(ec,{label:t,value:n,formatter:a,onClick:function(){o(r)},highlightValue:c,isAdjustable:!0})},ec=function(e){var t=e.label,n=e.value,a=e.onClick,r=e.highlightValue,o=e.isAdjustable,c=e.formatter,i=void 0===c?function(e){return e}:c;return d.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px 0"}},t,":",d.a.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:a},d.a.createElement("strong",{style:{backgroundColor:r?Ye:null,padding:o&&"0 4px",borderRadius:2}},i(n)),o&&d.a.createElement(Et,{icon:"pencil",faded:!0,style:{marginLeft:4}})))},tc=Qo,nc=Se.a.div(zo||(zo=Object(Ae.a)(["\n  margin: ",";\n  padding: ",";\n  background-color: #fff;\n  border: 1px solid #e5e5e5;\n  border-width: ",";\n  border-radius: 2px;\n"])),(function(e){return e.top?"0":"3px"}),(function(e){return e.noPadding?"0":e.top?"15px 23px":"15px 20px"}),(function(e){return e.top?"0 0 1px":"1px"})),ac=function(e){var t=e.accounts,n=e.value,a=e.onChange;return t.map((function(e){var t=e.id,r=e.name;return d.a.createElement(za,{key:t,checked:!!n[t],name:t,onChange:function(e){var t=e.target,r=t.name,o=t.checked;a(o?Object(A.a)(Object(A.a)({},n),{},Object(I.a)({},r,!0)):N()(r)(n))},label:r})}))},rc=Se.a.div(Wo||(Wo=Object(Ae.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),oc=function(e){var t=e.budget,n=e.investmentAccounts,a=e.onUpdateAccounts,r=an(!1),o=Object(Ft.a)(r,3),c=o[0],i=o[1],u=o[2],l=t.accounts.filter((function(e){return"otherAsset"===e.type&&!e.on_budget})),m=t.accounts.filter((function(e){var t=e.id;return n[t]}));return d.a.createElement(s.Fragment,null,d.a.createElement(rc,null,d.a.createElement(Te,null,"Investment Accounts"),d.a.createElement("span",{onClick:u},d.a.createElement(Et,{icon:"pencil"}))),m.length?m.map((function(e){var t=e.id,n=e.name;return d.a.createElement(we,{key:t},n)})):d.a.createElement(aa,null,"No accounts marked as investment"),d.a.createElement(Be,{style:{marginTop:10}},"Transfers to investment accounts are not counted as spending since it's assumed it's for retirement or some other savings goal."),d.a.createElement($n,{open:c,onClose:i,title:"Investment Accounts"},d.a.createElement(ac,{accounts:l,value:n,onChange:function(e){a({type:"investment",value:e})}})))},cc=Se.a.div(Uo||(Uo=Object(Ae.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),ic=function(e){var t=e.budget,n=e.mortgageAccounts,a=e.onUpdateAccounts,r=an(!1),o=Object(Ft.a)(r,3),c=o[0],i=o[1],u=o[2],l=t.accounts.filter((function(e){return"otherLiability"===e.type&&!e.on_budget})),m=t.accounts.filter((function(e){var t=e.id;return n[t]}));return d.a.createElement(s.Fragment,null,d.a.createElement(cc,null,d.a.createElement(Te,null,"Mortgage Accounts"),d.a.createElement("span",{onClick:u},d.a.createElement(Et,{icon:"pencil"}))),m.length?m.map((function(e){var t=e.id,n=e.name;return d.a.createElement(we,{key:t},n)})):d.a.createElement(aa,null,"No accounts marked as mortgage"),d.a.createElement(Be,{style:{marginTop:10}},"Mortgage accounts are used in the retirement calculator since it's a significant expense you won't have in your retirement presumably."),d.a.createElement($n,{open:c,onClose:i,title:"Mortgage Account"},d.a.createElement(ac,{accounts:l,value:n,onChange:function(e){a({type:"mortgage",value:e})}})))},uc=Se.a.div(qo||(qo=Object(Ae.a)(["\n  height: 20px;\n"]))),lc=function(e){var t=e.budget,n=e.historyAction,a=e.investmentAccounts,r=e.location,o=e.mortgageAccounts,c=e.sidebarTrigger,i=e.title,u=e.onUpdateAccounts;return d.a.createElement(gn,{historyAction:n,location:r,sidebarTrigger:c,title:i,content:d.a.createElement(s.Fragment,null,d.a.createElement(nc,null,d.a.createElement(oc,{budget:t,investmentAccounts:a,onUpdateAccounts:u}),d.a.createElement(uc,null),d.a.createElement(ic,{budget:t,mortgageAccounts:o,onUpdateAccounts:u})))})},sc=Q((function(e,t,n,a){var r=$t(e),o=y()().format("YYYY-MM");return e.transactions.filter(X([qt(e),Ht(t),function(e){return n&&Vt(e)===r},function(e){return a&&Vt(e)===o}]))})),dc=Q((function(e,t,n,a){return sc(e,t,n,a).filter((function(t){return!Kt(e)(t)}))})),mc=function(e){var t=e.budget,n=e.currentMonth,a=e.historyAction,r=e.investmentAccounts,o=e.location,c=e.mortgageAccounts,i=e.sidebarTrigger,u=e.onUpdateAccounts,l=nn(t),s=l.excludeFirstMonth,m=l.excludeLastMonth,g=l.months,p=l.onSetExclusion;return t?d.a.createElement(je.c,null,d.a.createElement(je.a,{path:Mt.currentMonth.path,exact:!0,render:function(){return d.a.createElement(Ca,{budget:t,currentMonth:n,investmentAccounts:r,historyAction:a,location:o,sidebarTrigger:i,title:Mt.currentMonth.title})}}),d.a.createElement(je.a,{path:Mt.currentMonthGroup.path,exact:!0,render:function(e){var r=e.match;return d.a.createElement(Qa,{budget:t,categoryGroupId:r.params.categoryGroupId,currentMonth:n,historyAction:a,location:o,sidebarTrigger:i,title:Mt.currentMonthGroup.title(r.params,t)})}}),d.a.createElement(je.a,{path:Mt.currentMonthCategory.path,exact:!0,render:function(e){var r=e.match;return d.a.createElement(Xa,{categoryId:r.params.categoryId,budget:t,currentMonth:n,categoryGroupId:r.params.categoryGroupId,historyAction:a,location:o,sidebarTrigger:i,title:Mt.currentMonthCategory.title(r.params,t)})}}),d.a.createElement(je.a,{path:Mt.income.path,exact:!0,render:function(){return d.a.createElement(Va,{investmentAccounts:r,budget:t,historyAction:a,location:o,sidebarTrigger:i,title:Mt.income.title})}}),d.a.createElement(je.a,{path:Mt.incomeVsExpenses.path,exact:!0,render:function(){var n=sc(e.budget,e.investmentAccounts,s,m);return d.a.createElement(_r,{budget:t,excludeFirstMonth:s,excludeLastMonth:m,investmentAccounts:r,historyAction:a,location:o,sidebarTrigger:i,title:Mt.incomeVsExpenses.title,transactions:n,onSetExclusion:p})}}),d.a.createElement(je.a,{path:Mt.netWorth.path,exact:!0,render:function(){return d.a.createElement(fo,{budget:t,historyAction:a,investmentAccounts:r,location:o,mortgageAccounts:c,sidebarTrigger:i,title:Mt.netWorth.title})}}),d.a.createElement(je.a,{path:Mt.investments.path,exact:!0,render:function(){return d.a.createElement(vo,{budget:t,investmentAccounts:r,title:Mt.investments.title,historyAction:a,location:o,sidebarTrigger:i})}}),d.a.createElement(je.a,{path:Mt.projections.path,exact:!0,render:function(){return d.a.createElement(tc,{budget:t,investmentAccounts:r,mortgageAccounts:c,title:Mt.projections.title,historyAction:a,location:o,sidebarTrigger:i})}}),d.a.createElement(je.a,{path:Mt.settings.path,exact:!0,render:function(){return d.a.createElement(lc,{budget:t,historyAction:a,investmentAccounts:r,location:o,mortgageAccounts:c,sidebarTrigger:i,title:Mt.settings.title,onUpdateAccounts:u})}}),d.a.createElement(je.a,{path:Mt.groups.path,render:function(){var e=dc(t,r,s,m);return d.a.createElement(cr,{action:a,location:o},(function(n){var r=n.selectedMonth,c=n.selectedGroupId,u=n.selectedCategoryId,l=n.selectedPayeeId,h=n.onSelectMonth,f=n.onSelectGroup,y=n.onSelectCategory,b=n.onSelectPayee;return d.a.createElement(je.c,null,d.a.createElement(je.a,{path:Mt.groups.path,exact:!0,render:function(){return d.a.createElement(er,{budget:t,excludeFirstMonth:s,excludeLastMonth:m,historyAction:a,location:o,months:g,selectedGroupId:c,selectedMonth:r,sidebarTrigger:i,title:Mt.groups.title,transactions:e,onSelectGroup:f,onSetExclusion:p,onSelectMonth:h})}}),d.a.createElement(je.a,{path:Mt.group.path,exact:!0,render:function(n){var c=n.match;return d.a.createElement(rr,{budget:t,categoryGroupId:c.params.categoryGroupId,excludeFirstMonth:s,excludeLastMonth:m,historyAction:a,location:o,months:g,selectedMonth:r,selectedCategoryId:u,sidebarTrigger:i,title:Mt.group.title(c.params,t),transactions:e,onSelectCategory:y,onSelectMonth:h,onSetExclusion:p})}}),d.a.createElement(je.a,{path:Mt.category.path,exact:!0,render:function(n){var c=n.match;return d.a.createElement(ir,{budget:t,categoryId:c.params.categoryId,excludeFirstMonth:s,excludeLastMonth:m,historyAction:a,location:o,months:g,selectedMonth:r,selectedPayeeId:l,sidebarTrigger:i,title:Mt.category.title(c.params,t),transactions:e,onSetExclusion:p,onSelectMonth:h,onSelectPayee:b})}}),d.a.createElement(je.a,{path:Mt.categoryPayee.path,exact:!0,render:function(n){var c=n.match;return d.a.createElement(ur,{budget:t,categoryId:c.params.categoryId,excludeFirstMonth:s,excludeLastMonth:m,historyAction:a,location:o,months:g,payeeId:c.params.payeeId,selectedMonth:r,sidebarTrigger:i,title:Mt.categoryPayee.title(c.params,t),transactions:e,onSetExclusion:p,onSelectMonth:h})}}))}))}}),d.a.createElement(je.a,{render:function(){return d.a.createElement("div",{style:{padding:20}},d.a.createElement(h.b,{to:xt(Mt.currentMonth.path,{budgetId:t.id})},"Return to ",Mt.currentMonth.title))}})):null},gc=function(e,t){return["budget","currentMonth","historyAction","investmentAccounts","location","mortgageAccounts"].every((function(n){return e[n]===t[n]}))},hc=Object(s.memo)(mc,gc),pc=function(e){var t=e.onAuthorize;return d.a.createElement(nc,null,d.a.createElement(Ce,null,"Budget Reports"),d.a.createElement("div",{style:{marginBottom:10}},"Get various insights from your YNAB account."),d.a.createElement(Ue,{onClick:t},"Authorize YNAB"),d.a.createElement(Te,{style:{marginTop:30}},"Privacy Policy"),d.a.createElement(we,null,"This website does not store any information from you or your YNAB account on it's server. All data retrieved from the YNAB API is stored only in your browser's local storage and is never transmitted to any other location or third-party."))},fc=Se.a.div(Ko||(Ko=Object(Ae.a)(["\n  padding: 10px 20px;\n"]))),yc=function(e){var t=e.message;return d.a.createElement(fc,null,d.a.createElement("h3",null,t),d.a.createElement("div",null,d.a.createElement(h.b,{to:"/"},"Home")))},bc=function(){return d.a.createElement(yc,{message:"Page not found"})},vc=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(Ee.a)(n,[{key:"componentDidCatch",value:function(e){Rollbar.error(e),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?d.a.createElement(yc,{message:this.props.message}):this.props.children}}]),n}(s.Component);vc.defaultProps={message:"Something went wrong"};var Ec,xc=vc,Mc=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(ve.a)(this,n),t.apply(this,arguments)}return Object(Ee.a)(n,[{key:"componentDidMount",value:function(){this.props.budgetsLoaded||this.props.onRequestBudgets()}},{key:"render",value:function(){var e=this.props,t=e.budgets;return e.budgetsLoaded?d.a.createElement(nc,null,d.a.createElement(Te,null,"Select a budget:"),t.map((function(e){var t=e.id,n=e.name;return d.a.createElement("div",{key:t},d.a.createElement(h.b,{to:xt(Mt.currentMonth.path,{budgetId:t})},n))}))):d.a.createElement(_e,null)}}]),n}(s.Component),jc=function(e){Object(xe.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(ve.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={authorized:!0,budgetsLoaded:!1,budgetIds:[],budgets:{},budgetDetails:{},currentMonth:y()().format("YYYY-MM")},e.handleRequestBudgets=function(t){pe().then((function(n){var a=n.budgets;e.setState({budgetsLoaded:!0,budgetIds:a.map((function(e){return e.id})),budgets:Ie()("id")(a)},t)}))},e.handleRequestBudget=function(t){ye(t).then((function(n){var a=n.budget,r=n.authorized;e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{authorized:r,budgetDetails:Object(A.a)(Object(A.a)({},e.budgetDetails),{},Object(I.a)({},t,a))})}))}))},e.handleAuthorize=function(){be(),window.location.replace(ge)},e}return Object(Ee.a)(n,[{key:"render",value:function(){var e=this,t=this.props.hasToken,n=this.state,a=n.authorized,r=n.budgetsLoaded,o=n.budgetIds,c=n.budgets,i=n.budgetDetails,u=n.currentMonth;return t?d.a.createElement(xc,null,d.a.createElement(je.c,null,d.a.createElement(je.a,{path:"/",exact:!0,render:function(){return d.a.createElement(Mc,{budgets:o.map((function(e){return c[e]})),budgetsLoaded:r,onRequestBudgets:e.handleRequestBudgets})}}),d.a.createElement(je.a,{path:"/budgets/:budgetId",render:function(t){var n=t.match,r=t.history,c=t.location,l=n.params.budgetId,s=i[l];return d.a.createElement(Pt,{authorized:a,budgetId:l,budgetLoaded:!!s,hasMultipleBudgets:o.length>1,location:c.pathname,onAuthorize:e.handleAuthorize,onRequestBudget:e.handleRequestBudget},(function(t){var n=t.sidebarTrigger;return d.a.createElement(Fn.Provider,{value:v()("currencyFormat")(s)},d.a.createElement(hc,{sidebarTrigger:n,historyAction:r.action,location:c.pathname,budget:s,currentMonth:u,investmentAccounts:T("investmentAccounts",l),mortgageAccounts:T("mortgageAccounts",l),onUpdateAccounts:function(t){var n=t.type,a=t.value;"investment"===n&&w("investmentAccounts",l,a),"mortgage"===n&&w("mortgageAccounts",l,a),e.forceUpdate()}}))}))}}),d.a.createElement(je.a,{component:bc}))):d.a.createElement(pc,{onAuthorize:this.handleAuthorize})}}]),n}(s.Component),Oc=function(){if("/"===window.location.hash[1])return localStorage.getItem(se);var e=window.location.hash.substring(1).replace(/&/g,'","').replace(/=/g,'":"');if(!e)return localStorage.getItem(se);var t=v()("access_token")(JSON.parse('{"'+e+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)})));return localStorage.setItem(se,t),window.location.hash=localStorage.getItem(me)||"",localStorage.removeItem(me),t}();Oc&&(Ec=Oc,he=new p.a(Ec)),g.a.render(d.a.createElement(h.a,null,d.a.createElement(jc,{hasToken:!!Oc})),document.getElementById("root"))}},[[436,1,2]]]);
//# sourceMappingURL=main.e102ef4b.chunk.js.map